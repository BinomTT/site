$j(document).ready(function(e){var t=null;t||(t=e(".edubarMainSkin").last());var i=t.hasClass("blindFriendly")?2:1,n=null;function s(){t||(t=e(".edubarMainSkin").last()),e(".skgd.skgdFixedHeader").each(function(){if(e(this).hasClass("fixed")||e(this).hasClass("forceFixed")){var t=e(".edubarMainSkin").first().offset().left/i,n=(e(window).width()-(e(".edubarMainSkin").first().offset().left+e(".edubarMainSkin").first().outerWidth()))/i;e(this).css("left",t+"px"),e(this).css("right",n+"px")}else e(this).css("left","0"),e(this).css("right","0")}),n=e(".skgd.skgdFixedSidebar").each(function(){if(!t.hasClass("wmaxL1")||e(this).hasClass("forceFixed")){var n=t.offset().left/i,s=t.offset().top/i;e(this).css("left",n+"px"),e(this).css("top",s+"px")}})}function o(){t||(t=e(".edubarMainSkin").last());var i=t,n=window.innerWidth;i.toggleClass("nowmaxL",!1),i.toggleClass("wmaxL1",n<=980||t.hasClass("blindFriendly")).toggleClass("wmaxL2",n<=500||t.hasClass("blindFriendly"))}function r(){var t=e(".skgd.skgdFixedHeader");if(t.length>0){var n=e(".edubarMainSkin").first().offset().top,o=t.offset();o.top=o.top/i,o.left=o.left/i;t.parent().find(".skgdFixedHeaderReplacement").remove();var r=e('<div class="skgdFixedHeaderReplacement"></div>').appendTo(t.parent());r.height(t.outerHeight()),e(window).off("scroll.skgdFixedHeader").on("scroll.skgdFixedHeader",function(){var a=e(window).scrollTop(),u=o.top<a+n;t.hasClass("forceFixed")&&(u=!0),t.toggleClass("fixed",u),t.css("top",u?n*(1/i)+"px":""),r.toggle(u),s(),u?t.find(".skgdSubmenuDiv").css("max-height",(e(window).innerHeight()-t.outerHeight()-2)/i+"px"):t.find(".skgdSubmenuDiv").css("max-height","none")})}}function a(){e(".skgdMasonryList").each(function(){var t=this;setTimeout(function(){e(t).css("width",""),e(t).masonry()},100)})}function u(){t||(t=e(".edubarMainSkin").last());var s=e(t).offset();e(".skgdFullWidthContainer").each(function(){var o=e(this).offset();o.left=s.left;var r=e(t).width();if(!t.hasClass("wmaxL1")&&n&&n.length>0){var a=n.first().width();r-=a,o.left+=a}e(this).css("width",r/i),e(this).offset(o)})}function d(){var i=e(window).width();e(window).off("resize.skgdResponsive").on("resize.skgdResponsive",function(){e(window).width()!=i&&(i=e(window).width(),o(),s(),a(),u())}),e(".skgd.menub").each(function(){e(this).data("responsiveMenuSkinGadget")||e(this).responsiveMenuSkinGadget({})}),e(".skgd.menu .skgdToggleMenuBtn").off("click.skgdResponsive").on("click.skgdResponsive",function(t){t.stopPropagation();var i=e(this).closest(".skgd.menu");if(i.hasClass("opened"))s(i);else{var n=e(window).width();i.toggleClass("opened",!0),i.find(".skgdToggleMenu").toggleClass("nav_submenuSliding",!0),i.find(".skgdToggleMenu .menuOpen").toggleClass("menuOpen_x",!0).toggleClass("menuOpen",!1),e(document).on("click.skgdMenu",function(t){e(t.target).closest(".skgd.menu").attr("id")!=i.attr("id")&&s(i)}),e(window).on("resize.skgdMenu",function(){n!=e(window).width()&&s(i)})}function s(t){t.toggleClass("opened",!1),t.find(".skgdToggleMenu").toggleClass("nav_submenuSliding",!1).toggleClass("menuOpen",!0),t.find(".skgdToggleMenu .menuOpen_x").toggleClass("menuOpen_x",!1).toggleClass("menuOpen",!0),e(document).off("click.skgdMenu"),e(window).off("resize.skgdMenu")}}).off("keypress.skgdResponsive").on("keypress.skgdResponsive",function(t){13==t.which&&e(this).click()}),e(".skgd.vmenu .skgdSubmenuNoLink > a").off("click.skgdResponsive").on("click.skgdResponsive",function(t){var i=e(this).closest(".skgdSubmenuNoLink").get(0),n=e(i).closest("ul"),s=n.attr("data-cls1"),o=n.attr("data-cls2");n.children("li").each(function(){var t=this;this!=i||e(this).hasClass("opened")?e(t).children("ul").hide("fast",function(){e(t).toggleClass("opened",!1),e(t).find(" > a > i.submenuIconIndicator").toggleClass("fa-"+s,!0).toggleClass("fa-"+o,!1)}):e(t).children("ul").show("fast",function(){e(t).toggleClass("opened",!0),e(t).find(" > a > i.submenuIconIndicator").toggleClass("fa-"+s,!1).toggleClass("fa-"+o,!0)})})}).off("keypress.skgdResponsive").on("keypress.skgdResponsive",function(t){13==t.which&&e(this).click()}),e(".skgdMasonryList").each(function(){var t=this;e(this).imagesLoaded(function(){e(t).masonry({itemSelector:"li.skgdLi",percentPosition:!1,transitionDuration:0,fitWidth:!1})})}),e(".skgdFitText").each(function(){var t=e(this).css("overflow");e(this).css("overflow","auto");var i=e(this).outerWidth(),n=this.scrollWidth,s=e(this).outerHeight(),o=this.scrollHeight,r=parseFloat(e(this).css("font-size").replace("px","")),a=e(this).hasClass("skftfitWidth")||e(this).hasClass("skftfitBoth"),u=e(this).hasClass("skftfitHeight")||e(this).hasClass("skftfitBoth");function d(e,t,i,n){return!(a&&e>t&&Math.abs(e-t)>1.3)&&!(u&&i>n&&Math.abs(i-n)>1.3)}for(var h=0;h<120&&r>7&&!d(n,i,o,s);){r-=1,e(this).css("font-size",r.toFixed(2)+"px");i=e(this).outerWidth(),n=this.scrollWidth,s=e(this).outerHeight();if(d(n,i,o=this.scrollHeight,s))break;h++}e(this).css("overflow",t)});t.height(),t.width();e(".skgdChangeFontSize").off("click.skgdResponsive").on("click.skgdResponsive",function(){if("contrast"==e(this).attr("data-change"))barStartLoading(),e.post("/?toggleHighContrast=1",{},function(){document.location.reload()});else{var i=1*e(this).attr("data-change"),n=t.data("zoomInd")?t.data("zoomInd"):0,s=[1,1.5,2,2.5];n+=i,n=Math.max(0,Math.min(s.length-1,n)),t.data("zoomInd",n),t.data("zoomVal",s[n]),t.css("font-size",s[n].toFixed(1)+"em"),t.toggleClass("fontResized",0!=n)}}).off("keypress.skgdResponsive").on("keypress.skgdResponsive",function(t){13==t.which&&e(this).click()}),t.find(".edupage-gallery-link").off("click.skgdResponsive").on("click.skgdResponsive",function(){var t=e(this),i=t.attr("data-albumid"),n=t.attr("data-dirid"),s=t.attr("data-id");SkinResponsive.openGallery(i,n,s)}).off("keypress.skgdResponsive").on("keypress.skgdResponsive",function(t){13==t.which&&e(this).click()}),t.find(".edupage-image-link").off("click.skgdResponsive").on("click.skgdResponsive",function(){var t=e(this).attr("data-id"),i=[];e(this).closest(".erte-photos").find(".edupage-image-link").each(function(){i.push(e(this).attr("data-id"))}),SkinResponsive.openGallery("clipart","",t,i)}).off("keypress.skgdResponsive").on("keypress.skgdResponsive",function(t){13==t.which&&e(this).click()}),u(),t.find(".langChooserMenuBtn").click(function(){var t=JSON.parse(e(this).attr("data-langs"));barNewReactSourceDlg("/app/pics/jsw/components/AppSimpleMenu.js","AppSimpleMenu",{items:t,itemClick:function(e){window.location=e.url}},{dialogClass:"grayTitleDialog noPadding",width:400,title:lset(9998)})}).off("keypress.skgdResponsive").on("keypress",function(t){13==t.which&&e(this).click()})}e(document).on("skinUpdated",function(){s(),o(),r(),d(),a()}),s(),o(),r(),d()});var SkinResponsive={};function AscMasonry(){var e,t;!function(e,t){"use strict";"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],function(i){t(e,i)}):"object"==typeof module&&module.exports?module.exports=t(e,require("jquery")):e.jQueryBridget=t(e,e.jQuery)}(window,function(e,t){"use strict";function i(i,o,a){(a=a||t||e.jQuery)&&(o.prototype.option||(o.prototype.option=function(e){a.isPlainObject(e)&&(this.options=a.extend(!0,this.options,e))}),a.fn[i]=function(e){return"string"==typeof e?function(e,t,n){var s,o="$()."+i+'("'+t+'")';return e.each(function(e,u){var d=a.data(u,i);if(d){var h=d[t];if(h&&"_"!=t.charAt(0)){var l=h.apply(d,n);s=void 0===s?l:s}else r(o+" is not a valid method")}else r(i+" not initialized. Cannot call methods, i.e. "+o)}),void 0!==s?s:e}(this,e,s.call(arguments,1)):(function(e,t){e.each(function(e,n){var s=a.data(n,i);s?(s.option(t),s._init()):(s=new o(n,t),a.data(n,i,s))})}(this,e),this)},n(a))}function n(e){!e||e&&e.bridget||(e.bridget=i)}var s=Array.prototype.slice,o=e.console,r=void 0===o?function(){}:function(e){o.error(e)};return n(t||e.jQuery),i}),e=this,t=function(){function e(){}var t=e.prototype;return t.on=function(e,t){if(e&&t){var i=this._events=this._events||{},n=i[e]=i[e]||[];return-1==n.indexOf(t)&&n.push(t),this}},t.once=function(e,t){if(e&&t){this.on(e,t);var i=this._onceEvents=this._onceEvents||{};return(i[e]=i[e]||[])[t]=!0,this}},t.off=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){var n=i.indexOf(t);return-1!=n&&i.splice(n,1),this}},t.emitEvent=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){var n=0,s=i[n];t=t||[];for(var o=this._onceEvents&&this._onceEvents[e];s;){var r=o&&o[s];r&&(this.off(e,s),delete o[s]),s.apply(this,t),s=i[n+=r?0:1]}return this}},e},"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",t):"object"==typeof module&&module.exports?module.exports=t():e.EvEmitter=t(),function(e,t){"use strict";"function"==typeof define&&define.amd?define("get-size/get-size",[],function(){return t()}):"object"==typeof module&&module.exports?module.exports=t():e.getSize=t()}(window,function(){"use strict";function e(e){var t=parseFloat(e);return-1==e.indexOf("%")&&!isNaN(t)&&t}function t(e){var t=getComputedStyle(e);return t||o("Style returned "+t+". Are you running this code in a hidden iframe on Firefox? See http://bit.ly/getsizebug1"),t}function i(){if(!u){u=!0;var i=document.createElement("div");i.style.width="200px",i.style.padding="1px 2px 3px 4px",i.style.borderStyle="solid",i.style.borderWidth="1px 2px 3px 4px",i.style.boxSizing="border-box";var o=document.body||document.documentElement;o.appendChild(i);var r=t(i);n.isBoxSizeOuter=s=200==e(r.width),o.removeChild(i)}}function n(n){if(i(),"string"==typeof n&&(n=document.querySelector(n)),n&&"object"==typeof n&&n.nodeType){var o=t(n);if("none"==o.display)return function(){for(var e={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},t=0;a>t;t++)e[r[t]]=0;return e}();var u={};u.width=n.offsetWidth,u.height=n.offsetHeight;for(var d=u.isBorderBox="border-box"==o.boxSizing,h=0;a>h;h++){var l=r[h],c=o[l],f=parseFloat(c);u[l]=isNaN(f)?0:f}var g=u.paddingLeft+u.paddingRight,p=u.paddingTop+u.paddingBottom,m=u.marginLeft+u.marginRight,v=u.marginTop+u.marginBottom,k=u.borderLeftWidth+u.borderRightWidth,y=u.borderTopWidth+u.borderBottomWidth,M=d&&s,w=e(o.width);!1!==w&&(u.width=w+(M?0:g+k));var b=e(o.height);return!1!==b&&(u.height=b+(M?0:p+y)),u.innerWidth=u.width-(g+k),u.innerHeight=u.height-(p+y),u.outerWidth=u.width+m,u.outerHeight=u.height+v,u}}var s,o="undefined"==typeof console?function(){}:function(e){console.error(e)},r=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],a=r.length,u=!1;return n}),function(e,t){"use strict";"function"==typeof define&&define.amd?define("matches-selector/matches-selector",t):"object"==typeof module&&module.exports?module.exports=t():e.matchesSelector=t()}(window,function(){"use strict";var e=function(){var e=Element.prototype;if(e.matches)return"matches";if(e.matchesSelector)return"matchesSelector";for(var t=["webkit","moz","ms","o"],i=0;i<t.length;i++){var n=t[i]+"MatchesSelector";if(e[n])return n}}();return function(t,i){return t[e](i)}}),function(e,t){"use strict";"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["matches-selector/matches-selector"],function(i){return t(e,i)}):"object"==typeof module&&module.exports?module.exports=t(e,require("desandro-matches-selector")):e.fizzyUIUtils=t(e,e.matchesSelector)}(window,function(e,t){var i={extend:function(e,t){for(var i in t)e[i]=t[i];return e},modulo:function(e,t){return(e%t+t)%t},makeArray:function(e){var t=[];if(Array.isArray(e))t=e;else if(e&&"number"==typeof e.length)for(var i=0;i<e.length;i++)t.push(e[i]);else t.push(e);return t},removeFrom:function(e,t){var i=e.indexOf(t);-1!=i&&e.splice(i,1)},getParent:function(e,i){for(;e!=document.body;)if(e=e.parentNode,t(e,i))return e},getQueryElement:function(e){return"string"==typeof e?document.querySelector(e):e},handleEvent:function(e){var t="on"+e.type;this[t]&&this[t](e)},filterFindElements:function(e,n){e=i.makeArray(e);var s=[];return e.forEach(function(e){if(e instanceof HTMLElement){if(!n)return void s.push(e);t(e,n)&&s.push(e);for(var i=e.querySelectorAll(n),o=0;o<i.length;o++)s.push(i[o])}}),s},debounceMethod:function(e,t,i){var n=e.prototype[t],s=t+"Timeout";e.prototype[t]=function(){var e=this[s];e&&clearTimeout(e);var t=arguments,o=this;this[s]=setTimeout(function(){n.apply(o,t),delete o[s]},i||100)}},docReady:function(e){"complete"==document.readyState?e():document.addEventListener("DOMContentLoaded",e)},toDashed:function(e){return e.replace(/(.)([A-Z])/g,function(e,t,i){return t+"-"+i}).toLowerCase()}},n=e.console;return i.htmlInit=function(t,s){i.docReady(function(){var o=i.toDashed(s),r="data-"+o,a=document.querySelectorAll("["+r+"]"),u=document.querySelectorAll(".js-"+o),d=i.makeArray(a).concat(i.makeArray(u)),h=r+"-options",l=e.jQuery;d.forEach(function(e){var i,o=e.getAttribute(r)||e.getAttribute(h);try{i=o&&JSON.parse(o)}catch(t){return void(n&&n.error("Error parsing "+r+" on "+e.className+": "+t))}var a=new t(e,i);l&&l.data(e,s,a)})})},i}),function(e,t){"function"==typeof define&&define.amd?define("outlayer/item",["ev-emitter/ev-emitter","get-size/get-size"],function(i,n){return t(e,i,n)}):"object"==typeof module&&module.exports?module.exports=t(e,require("ev-emitter"),require("get-size")):(e.Outlayer={},e.Outlayer.Item=t(e,e.EvEmitter,e.getSize))}(window,function(e,t,i){"use strict";function n(e,t){e&&(this.element=e,this.layout=t,this.position={x:0,y:0},this._create())}var s=document.documentElement.style,o="string"==typeof s.transition?"transition":"WebkitTransition",r="string"==typeof s.transform?"transform":"WebkitTransform",a={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[o],u=[r,o,o+"Duration",o+"Property"],d=n.prototype=Object.create(t.prototype);d.constructor=n,d._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},d.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},d.getSize=function(){this.size=i(this.element)},d.css=function(e){var t=this.element.style;for(var i in e){t[u[i]||i]=e[i]}},d.getPosition=function(){var e=getComputedStyle(this.element),t=this.layout._getOption("originLeft"),i=this.layout._getOption("originTop"),n=e[t?"left":"right"],s=e[i?"top":"bottom"],o=this.layout.size,r=-1!=n.indexOf("%")?parseFloat(n)/100*o.width:parseInt(n,10),a=-1!=s.indexOf("%")?parseFloat(s)/100*o.height:parseInt(s,10);r=isNaN(r)?0:r,a=isNaN(a)?0:a,r-=t?o.paddingLeft:o.paddingRight,a-=i?o.paddingTop:o.paddingBottom,this.position.x=r,this.position.y=a},d.layoutPosition=function(){var e=this.layout.size,t={},i=this.layout._getOption("originLeft"),n=this.layout._getOption("originTop"),s=i?"paddingLeft":"paddingRight",o=i?"left":"right",r=i?"right":"left",a=this.position.x+e[s];t[o]=this.getXValue(a),t[r]="";var u=n?"paddingTop":"paddingBottom",d=n?"top":"bottom",h=n?"bottom":"top",l=this.position.y+e[u];t[d]=this.getYValue(l),t[h]="",this.css(t),this.emitEvent("layout",[this])},d.getXValue=function(e){var t=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&!t?e/this.layout.size.width*100+"%":e+"px"},d.getYValue=function(e){var t=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&t?e/this.layout.size.height*100+"%":e+"px"},d._transitionTo=function(e,t){this.getPosition();var i=this.position.x,n=this.position.y,s=parseInt(e,10),o=parseInt(t,10),r=s===this.position.x&&o===this.position.y;if(this.setPosition(e,t),!r||this.isTransitioning){var a=e-i,u=t-n,d={};d.transform=this.getTranslate(a,u),this.transition({to:d,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})}else this.layoutPosition()},d.getTranslate=function(e,t){return"translate3d("+(e=this.layout._getOption("originLeft")?e:-e)+"px, "+(t=this.layout._getOption("originTop")?t:-t)+"px, 0)"},d.goTo=function(e,t){this.setPosition(e,t),this.layoutPosition()},d.moveTo=d._transitionTo,d.setPosition=function(e,t){this.position.x=parseInt(e,10),this.position.y=parseInt(t,10)},d._nonTransition=function(e){for(var t in this.css(e.to),e.isCleaning&&this._removeStyles(e.to),e.onTransitionEnd)e.onTransitionEnd[t].call(this)},d._transition=function(e){if(parseFloat(this.layout.options.transitionDuration)){var t=this._transn;for(var i in e.onTransitionEnd)t.onEnd[i]=e.onTransitionEnd[i];for(i in e.to)t.ingProperties[i]=!0,e.isCleaning&&(t.clean[i]=!0);if(e.from){this.css(e.from);this.element.offsetHeight;null}this.enableTransition(e.to),this.css(e.to),this.isTransitioning=!0}else this._nonTransition(e)};var h="opacity,"+function(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}(u.transform||"transform");d.enableTransition=function(){this.isTransitioning||(this.css({transitionProperty:h,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(a,this,!1))},d.transition=n.prototype[o?"_transition":"_nonTransition"],d.onwebkitTransitionEnd=function(e){this.ontransitionend(e)},d.onotransitionend=function(e){this.ontransitionend(e)};var l={"-webkit-transform":"transform"};d.ontransitionend=function(e){if(e.target===this.element){var t=this._transn,i=l[e.propertyName]||e.propertyName;if(delete t.ingProperties[i],function(e){for(var t in e)return!1;return!0}(t.ingProperties)&&this.disableTransition(),i in t.clean&&(this.element.style[e.propertyName]="",delete t.clean[i]),i in t.onEnd)t.onEnd[i].call(this),delete t.onEnd[i];this.emitEvent("transitionEnd",[this])}},d.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(a,this,!1),this.isTransitioning=!1},d._removeStyles=function(e){var t={};for(var i in e)t[i]="";this.css(t)};var c={transitionProperty:"",transitionDuration:""};return d.removeTransitionStyles=function(){this.css(c)},d.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},d.remove=function(){return o&&parseFloat(this.layout.options.transitionDuration)?(this.once("transitionEnd",function(){this.removeElem()}),void this.hide()):void this.removeElem()},d.reveal=function(){delete this.isHidden,this.css({display:""});var e=this.layout.options,t={};t[this.getHideRevealTransitionEndProperty("visibleStyle")]=this.onRevealTransitionEnd,this.transition({from:e.hiddenStyle,to:e.visibleStyle,isCleaning:!0,onTransitionEnd:t})},d.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},d.getHideRevealTransitionEndProperty=function(e){var t=this.layout.options[e];if(t.opacity)return"opacity";for(var i in t)return i},d.hide=function(){this.isHidden=!0,this.css({display:""});var e=this.layout.options,t={};t[this.getHideRevealTransitionEndProperty("hiddenStyle")]=this.onHideTransitionEnd,this.transition({from:e.visibleStyle,to:e.hiddenStyle,isCleaning:!0,onTransitionEnd:t})},d.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},d.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},n}),function(e,t){"use strict";"function"==typeof define&&define.amd?define("outlayer/outlayer",["ev-emitter/ev-emitter","get-size/get-size","fizzy-ui-utils/utils","./item"],function(i,n,s,o){return t(e,i,n,s,o)}):"object"==typeof module&&module.exports?module.exports=t(e,require("ev-emitter"),require("get-size"),require("fizzy-ui-utils"),require("./item")):e.Outlayer=t(e,e.EvEmitter,e.getSize,e.fizzyUIUtils,e.Outlayer.Item)}(window,function(e,t,i,n,s){"use strict";function o(e,t){var i=n.getQueryElement(e);if(i){this.element=i,u&&(this.$element=u(this.element)),this.options=n.extend({},this.constructor.defaults),this.option(t);var s=++h;this.element.outlayerGUID=s,l[s]=this,this._create(),this._getOption("initLayout")&&this.layout()}else a&&a.error("Bad element for "+this.constructor.namespace+": "+(i||e))}function r(e){function t(){e.apply(this,arguments)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t}var a=e.console,u=e.jQuery,d=function(){},h=0,l={};o.namespace="outlayer",o.Item=s,o.defaults={containerStyle:{position:"relative"},initLayout:!0,originLeft:!0,originTop:!0,resize:!0,resizeContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}};var c=o.prototype;return n.extend(c,t.prototype),c.option=function(e){n.extend(this.options,e)},c._getOption=function(e){var t=this.constructor.compatOptions[e];return t&&void 0!==this.options[t]?this.options[t]:this.options[e]},o.compatOptions={initLayout:"isInitLayout",horizontal:"isHorizontal",layoutInstant:"isLayoutInstant",originLeft:"isOriginLeft",originTop:"isOriginTop",resize:"isResizeBound",resizeContainer:"isResizingContainer"},c._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),n.extend(this.element.style,this.options.containerStyle),this._getOption("resize")&&this.bindResize()},c.reloadItems=function(){this.items=this._itemize(this.element.children)},c._itemize=function(e){for(var t=this._filterFindItemElements(e),i=this.constructor.Item,n=[],s=0;s<t.length;s++){var o=new i(t[s],this);n.push(o)}return n},c._filterFindItemElements=function(e){return n.filterFindElements(e,this.options.itemSelector)},c.getItemElements=function(){return this.items.map(function(e){return e.element})},c.layout=function(){this._resetLayout(),this._manageStamps();var e=this._getOption("layoutInstant"),t=void 0!==e?e:!this._isLayoutInited;this.layoutItems(this.items,t),this._isLayoutInited=!0},c._init=c.layout,c._resetLayout=function(){this.getSize()},c.getSize=function(){this.size=i(this.element)},c._getMeasurement=function(e,t){var n,s=this.options[e];s?("string"==typeof s?n=this.element.querySelector(s):s instanceof HTMLElement&&(n=s),this[e]=n?i(n)[t]:s):this[e]=0},c.layoutItems=function(e,t){e=this._getItemsForLayout(e),this._layoutItems(e,t),this._postLayout()},c._getItemsForLayout=function(e){return e.filter(function(e){return!e.isIgnored})},c._layoutItems=function(e,t){if(this._emitCompleteOnItems("layout",e),e&&e.length){var i=[];e.forEach(function(e){var n=this._getItemLayoutPosition(e);n.item=e,n.isInstant=t||e.isLayoutInstant,i.push(n)},this),this._processLayoutQueue(i)}},c._getItemLayoutPosition=function(){return{x:0,y:0}},c._processLayoutQueue=function(e){e.forEach(function(e){this._positionItem(e.item,e.x,e.y,e.isInstant)},this)},c._positionItem=function(e,t,i,n){n?e.goTo(t,i):e.moveTo(t,i)},c._postLayout=function(){this.resizeContainer()},c.resizeContainer=function(){if(this._getOption("resizeContainer")){var e=this._getContainerSize();e&&(this._setContainerMeasure(e.width,!0),this._setContainerMeasure(e.height,!1))}},c._getContainerSize=d,c._setContainerMeasure=function(e,t){if(void 0!==e){var i=this.size;i.isBorderBox&&(e+=t?i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth:i.paddingBottom+i.paddingTop+i.borderTopWidth+i.borderBottomWidth),e=Math.max(e,0),this.element.style[t?"width":"height"]=e+"px"}},c._emitCompleteOnItems=function(e,t){function i(){s.dispatchEvent(e+"Complete",null,[t])}function n(){++r==o&&i()}var s=this,o=t.length;if(t&&o){var r=0;t.forEach(function(t){t.once(e,n)})}else i()},c.dispatchEvent=function(e,t,i){var n=t?[t].concat(i):i;if(this.emitEvent(e,n),u)if(this.$element=this.$element||u(this.element),t){var s=u.Event(t);s.type=e,this.$element.trigger(s,i)}else this.$element.trigger(e,i)},c.ignore=function(e){var t=this.getItem(e);t&&(t.isIgnored=!0)},c.unignore=function(e){var t=this.getItem(e);t&&delete t.isIgnored},c.stamp=function(e){(e=this._find(e))&&(this.stamps=this.stamps.concat(e),e.forEach(this.ignore,this))},c.unstamp=function(e){(e=this._find(e))&&e.forEach(function(e){n.removeFrom(this.stamps,e),this.unignore(e)},this)},c._find=function(e){return e?("string"==typeof e&&(e=this.element.querySelectorAll(e)),e=n.makeArray(e)):void 0},c._manageStamps=function(){this.stamps&&this.stamps.length&&(this._getBoundingRect(),this.stamps.forEach(this._manageStamp,this))},c._getBoundingRect=function(){var e=this.element.getBoundingClientRect(),t=this.size;this._boundingRect={left:e.left+t.paddingLeft+t.borderLeftWidth,top:e.top+t.paddingTop+t.borderTopWidth,right:e.right-(t.paddingRight+t.borderRightWidth),bottom:e.bottom-(t.paddingBottom+t.borderBottomWidth)}},c._manageStamp=d,c._getElementOffset=function(e){var t=e.getBoundingClientRect(),n=this._boundingRect,s=i(e);return{left:t.left-n.left-s.marginLeft,top:t.top-n.top-s.marginTop,right:n.right-t.right-s.marginRight,bottom:n.bottom-t.bottom-s.marginBottom}},c.handleEvent=n.handleEvent,c.bindResize=function(){e.addEventListener("resize",this),this.isResizeBound=!0},c.unbindResize=function(){e.removeEventListener("resize",this),this.isResizeBound=!1},c.onresize=function(){this.resize()},n.debounceMethod(o,"onresize",100),c.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},c.needsResizeLayout=function(){var e=i(this.element);return this.size&&e&&e.innerWidth!==this.size.innerWidth},c.addItems=function(e){var t=this._itemize(e);return t.length&&(this.items=this.items.concat(t)),t},c.appended=function(e){var t=this.addItems(e);t.length&&(this.layoutItems(t,!0),this.reveal(t))},c.prepended=function(e){var t=this._itemize(e);if(t.length){var i=this.items.slice(0);this.items=t.concat(i),this._resetLayout(),this._manageStamps(),this.layoutItems(t,!0),this.reveal(t),this.layoutItems(i)}},c.reveal=function(e){this._emitCompleteOnItems("reveal",e),e&&e.length&&e.forEach(function(e){e.reveal()})},c.hide=function(e){this._emitCompleteOnItems("hide",e),e&&e.length&&e.forEach(function(e){e.hide()})},c.revealItemElements=function(e){var t=this.getItems(e);this.reveal(t)},c.hideItemElements=function(e){var t=this.getItems(e);this.hide(t)},c.getItem=function(e){for(var t=0;t<this.items.length;t++){var i=this.items[t];if(i.element==e)return i}},c.getItems=function(e){e=n.makeArray(e);var t=[];return e.forEach(function(e){var i=this.getItem(e);i&&t.push(i)},this),t},c.remove=function(e){var t=this.getItems(e);this._emitCompleteOnItems("remove",t),t&&t.length&&t.forEach(function(e){e.remove(),n.removeFrom(this.items,e)},this)},c.destroy=function(){var e=this.element.style;e.height="",e.position="",e.width="",this.items.forEach(function(e){e.destroy()}),this.unbindResize();var t=this.element.outlayerGUID;delete l[t],delete this.element.outlayerGUID,u&&u.removeData(this.element,this.constructor.namespace)},o.data=function(e){var t=(e=n.getQueryElement(e))&&e.outlayerGUID;return t&&l[t]},o.create=function(e,t){var i=r(o);return i.defaults=n.extend({},o.defaults),n.extend(i.defaults,t),i.compatOptions=n.extend({},o.compatOptions),i.namespace=e,i.data=o.data,i.Item=r(s),n.htmlInit(i,e),u&&u.bridget&&u.bridget(e,i),i},o.Item=s,o}),function(e,t){"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size"],t):"object"==typeof module&&module.exports?module.exports=t(require("outlayer"),require("get-size")):e.Masonry=t(e.Outlayer,e.getSize)}(window,function(e,t){var i=e.create("masonry");return i.compatOptions.fitWidth="isFitWidth",i.prototype._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns(),this.colYs=[];for(var e=0;e<this.cols;e++)this.colYs.push(0);this.maxY=0},i.prototype.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var e=this.items[0],i=e&&e.element;this.columnWidth=i&&t(i).outerWidth||this.containerWidth}var n=this.columnWidth+=this.gutter,s=this.containerWidth+this.gutter,o=s/n,r=n-s%n;o=Math[r&&1>r?"round":"floor"](o),this.cols=Math.max(o,1)},i.prototype.getContainerWidth=function(){var e=this._getOption("fitWidth")?this.element.parentNode:this.element,i=t(e);this.containerWidth=i&&i.innerWidth},i.prototype._getItemLayoutPosition=function(e){e.getSize();var t=e.size.outerWidth%this.columnWidth,i=Math[t&&1>t?"round":"ceil"](e.size.outerWidth/this.columnWidth);i=Math.min(i,this.cols);for(var n=this._getColGroup(i),s=Math.min.apply(Math,n),o=n.indexOf(s),r={x:this.columnWidth*o,y:s},a=s+e.size.outerHeight,u=this.cols+1-n.length,d=0;u>d;d++)this.colYs[o+d]=a;return r},i.prototype._getColGroup=function(e){if(2>e)return this.colYs;for(var t=[],i=this.cols+1-e,n=0;i>n;n++){var s=this.colYs.slice(n,n+e);t[n]=Math.max.apply(Math,s)}return t},i.prototype._manageStamp=function(e){var i=t(e),n=this._getElementOffset(e),s=this._getOption("originLeft")?n.left:n.right,o=s+i.outerWidth,r=Math.floor(s/this.columnWidth);r=Math.max(0,r);var a=Math.floor(o/this.columnWidth);a-=o%this.columnWidth?0:1,a=Math.min(this.cols-1,a);for(var u=(this._getOption("originTop")?n.top:n.bottom)+i.outerHeight,d=r;a>=d;d++)this.colYs[d]=Math.max(u,this.colYs[d])},i.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var e={height:this.maxY};return this._getOption("fitWidth")&&(e.width=this._getContainerFitWidth()),e},i.prototype._getContainerFitWidth=function(){for(var e=0,t=this.cols;--t&&0===this.colYs[t];)e++;return(this.cols-e)*this.columnWidth-this.gutter},i.prototype.needsResizeLayout=function(){var e=this.containerWidth;return this.getContainerWidth(),e!=this.containerWidth},i})}SkinResponsive.lightboxSkinGadget=function(e){e.widget("edupage.lightboxskingadget",{options:{},popupBg:null,popupElem:null,mainDiv:null,_create:function(){this.initProperties({}),this.createContent()},initProperties:function(e){for(var t in e)this.options[t]=e[t]},createContent:function(){var e=this;this.mainDiv=this.element.closest(".edubarMainSkin").last(),this.element.on("click",function(t){"undefined"!=typeof SkinUtils&&SkinUtils.pageEditor&&SkinUtils.pageEditor.selectedGadgetid!=e.element.attr("id")||(t.preventDefault(),t.stopPropagation(),e.openPopup(!0))}),this.element.hasClass("popupOpened")&&this.openPopup(),this.element.find(".skgdLightboxPopup").on("childSelected",function(){e.openPopup()}).on("selectedGadget",function(){e.openPopup()})},preparePopup:function(){var t=this;this.popupBg=e('<div class="skgdLightboxBg"><div class="skgdPopupBox0"><div class="skgdPopupBoxTitle"><h1></h1><a class="skgdPopupCloseBtn"><img src="/user/pics/ic_action_cancel.png" alt=""></a></div><div class="skgdPopupBox1 skgd"></div></div></div>').appendTo(this.mainDiv),this.popupBg.find(".skgdPopupCloseBtn").click(function(){t.closePopup()}),this.popupBg.click(function(i){(i.target==i.currentTarget||e(i.target).hasClass("skgdPopupBoxTitle"))&&t.closePopup()})},openPopup:function(t){var i=this,n=this.element.find(".skgdLightboxPopup");0!=n.length&&(this.popupElem=n,this.popupBg||this.preparePopup(),this.popupBg.find(".skgdPopupBox1").append(this.popupElem),t?(this.popupBg.fadeIn("slow"),this.popupElem.fadeIn("slow")):(this.popupBg.show(),this.popupElem.show()),this.resize(!0),this.popupElem.find(".skgd").trigger("popupOpened"),this.resize(),this.element.toggleClass("popupOpened",!0),e(window).off("resize.popup"+this.element.attr("id")).on("resize.popup"+this.element.attr("id"),function(){i.popupElem.css("width",""),i.popupElem.css("height",""),i.resize()}))},closePopup:function(){this.popupElem.hide(),this.popupBg.hide(),this.element.append(this.popupElem),this.element.toggleClass("popupOpened",!1),this.popupElem.find(".skgd").trigger("popupClosed")},resize:function(t){var i=this.popupBg.find(".skgdPopupBox0"),n=.9*this.mainDiv.width(),s=.9*e(window).height()-100,o=this.popupElem.width(),r=this.popupElem.height();o>n&&this.popupElem.width(n),t||r>s&&this.popupElem.height(s),i.width(this.popupElem.width()),i.height(this.popupElem.height()+60);var a=(e(window).width()-i.outerWidth())/2,u=(e(window).height()-i.outerHeight()-100)/2;i.css("left",a+"px"),i.css("top",u+"px")}})},SkinResponsive.lightboxSkinGadget(jQuery),SkinResponsive.responsiveMenuSkinGadget=function(e){e.widget("edupage.responsiveMenuSkinGadget",{options:{},submenuItems:null,hideMenuTimeout:null,showMenuTimeout:null,miniMode:!1,fixedHeader:null,menuDiv:null,isMenuShown:!1,menuMode:"",_create:function(){e(this).data("responsiveMenuSkinGadget",this);var t=this;t.menuMode="",this.element.hasClass("sidebar")&&(t.menuMode="sidebar"),this.fixedHeader=this.element.closest(".skgdFixedHeader"),this.menuDiv=this.element.find(".skgdFullMenu"),this.submenuItems=this.element.find(".skgdMenuItem.hasSubmenu"),this.submenuItemLinks=this.submenuItems.find(".skgdMenuItemLink"),this.initSubmenuItemsLinks(this.submenuItemLinks),this.submenuItems.hover(function(){var i=this;t.miniMode||(t.hideMenuTimeout&&clearTimeout(t.hideMenuTimeout),t.showMenuTimeout&&clearTimeout(t.showMenuTimeout),t.isMenuShown?t.toggleMenu(e(i),!0):t.showMenuTimeout=setTimeout(function(){t.toggleMenu(e(i),!0)},1500))},function(){t.miniMode||(t.hideMenuTimeout&&clearTimeout(t.hideMenuTimeout),t.showMenuTimeout&&clearTimeout(t.showMenuTimeout))}),this.element.find(".skgdMiniMenuLink").click(function(){t.toggleMiniMenu()}).on("keypress",function(t){13==t.which&&e(this).click()});var i=this.element.find(".skgdSideMenuOpenBtn");this.edubarMainSkin||(this.edubarMainSkin=e(".edubarMainSkin").last()),this.sideMenuBtn=i,i.appendTo(this.edubarMainSkin.find(".skgdContainer").first().parent()),i.attr("tabindex","1"),i.click(function(){t.toggleSideMenu(!0)}).on("keypress",function(t){13==t.which&&e(this).click()}),"1"==sessionStorage.getItem("skgdSideMenuVis")&&t.toggleSideMenu(!1,!0),e(document).off("keydown.skgdMenub").on("keydown.skgdMenub",function(e){27==e.which&&t.isMenuShown&&t.toggleMenu(t.isMenuShown.item,!1)})},initSubmenuItemsLinks:function(t){var i=this;t.disableSelection(),t.click(function(){var t=e(this).closest(".skgdTopMenuItem");i.isMenuShown&&i.isMenuShown.item.get(0)==t.get(0)&&i.isMenuShown.since<(new Date).getTime()-1e3?i.toggleMenu(t,!1):i.toggleMenu(t,!0)}),t.on("keydown",function(t){13==t.which&&e(this).click()})},toggleSideMenu:function(t,i){this.edubarMainSkin||(this.edubarMainSkin=e(".edubarMainSkin").last());var n=this;if(!this.sideMenuElem){var s=this.element.find(".skgdFullMenu").html(),o="";s=EdubarUtils.strtr(s,{skgd:"skgd-sb-"}),o+='<div class="skgd-menu-sidebar">';var r="";r+='<div class="skgd-menu-sidebar-logo">',r+='<a class="skgdSideMenuOpenBtn2" tabindex="0">',r+='<i class="fa fa-fw fa-remove"></i>',r+="</a>",n.options.editable&&(r+='<a class="skgdSideMenuEdit" title="{#1474}: {#2339}">',r+='<i class="fa fa-fw fa-pencil"></i>',r+="</a>"),r+="</div>",o+=renderS(r,{opts:this.options}),o+='<ul class="level0">',o+=s,o+="</ul>",o+="</div>",this.sideMenuElem=e(o).appendTo(this.element),this.sideMenuElem.find(".skgdSideMenuOpenBtn2").click(function(){n.toggleSideMenu(!0)}).on("keypress",function(t){13==t.which&&e(this).click()});var a=this.sideMenuElem.find(".skgd-sb-MenuItem"),u=this.sideMenuElem.find(".skgd-sb-MenuItem.hasSubmenu").find(".skgd-sb-MenuItemLink");u.disableSelection();var d=0;u.each(function(){e(this).data("linkIndex",d);var t=sessionStorage.getItem("skgdSubmenuVis"+e(this).data("linkIndex")),i="1"==t;(!i&&"0"!==t&&0==d&&a.length<10&&(i=!0),i)&&e(this).closest(".skgd-sb-TopMenuItem").find(".skgd-sb-SubmenuDiv2").show();e(this).attr("aria-expanded",i?"true":"false"),d++}),u.click(function(){var t=e(this).closest(".skgd-sb-TopMenuItem").find(".skgd-sb-SubmenuDiv2");sessionStorage.setItem("skgdSubmenuVis"+e(this).data("linkIndex"),t.is(":visible")?"0":"1"),e(this).attr("aria-expanded",t.is(":visible")?"false":"true"),t.slideToggle()}),u.on("keydown",function(t){13==t.which&&e(this).click()}),this.sideMenuElem.on("scroll",function(){sessionStorage.setItem("skgdSideMenuScroll",e(this).scrollTop())}),this.options.editable&&this.sideMenuElem.find(".skgdSideMenuEdit").click(function(){barNewDialog({source:"/customize/modules.php"})}),this.resizeSideMenu(),e(window).off("resize.skgdSideMenu").on("resize.skgdSideMenu",function(){n.resizeSideMenu()}),e(document).off("skinUpdated.skgdSideMenu").on("skinUpdated.skgdSideMenu",function(){n.resizeSideMenu()})}var h=!1===i||!0===i?!i:this.sideMenuElem.is(":visible");if(this.element.find(".skgdSideMenuOpenBtn i").toggleClass("fa-bars",h).toggleClass("fa-close",!h),sessionStorage.setItem("skgdSideMenuVis",h?"0":"1"),t){h||this.sideMenuBtn.css("display",h?"":"none"),this.edubarMainSkin.toggleClass("skgdSideMenuOpened",!h,200),this.sideMenuElem.css("margin-"+ertl("left","right"),h?"0":"-300px");var l={};l["margin-"+ertl("left","right")]=h?-300:0,this.sideMenuElem.animate(l,{start:function(){h||e(this).show()},duration:200,done:function(){h&&e(this).hide(),e(document).trigger("skinUpdated"),n.sideMenuBtn.css("display",h?"":"none"),h?e(".skgdSideMenuOpenBtn").first().focus():e(".skgdSideMenuOpenBtn2").focus()}})}else this.sideMenuBtn.css("display",h?"":"none"),this.sideMenuElem.css("margin-"+ertl("left","right"),"0"),this.edubarMainSkin.toggleClass("skgdSideMenuOpened",!h),h?this.sideMenuElem.hide():this.sideMenuElem.show(),sessionStorage.getItem("skgdSideMenuScroll")&&this.sideMenuElem.scrollTop(sessionStorage.getItem("skgdSideMenuScroll")),e(document).trigger("skinUpdated")},resizeSideMenu:function(){if(this.sideMenuElem){this.edubarMainSkin||(this.edubarMainSkin=e(".edubarMainSkin").last());var t=this.edubarMainSkin.offset(),i=1*this.edubarMainSkin.css("margin-left").replace("px","");this.sideMenuElem.css("top",t.top),this.sideMenuElem.css("left",t.left-i)}},toggleMenu:function(t,i){var n=this;n.hideMenuTimeout&&clearTimeout(n.hideMenuTimeout);var s=t.hasClass("opened");s&&!0===i||(this.isMenuShown&&!s&&!1!==i?this.submenuItems.find(".skgdSubmenuDiv2").hide():this.submenuItems.find(".skgdSubmenuDiv2").fadeOut("fast"),this.submenuItems.toggleClass("opened",!1),t.children(".skgdMenuItemLink").attr("aria-expanded",s?"false":"true"),s||!1===i||(this.isMenuShown?t.find(".skgdSubmenuDiv2").show():t.find(".skgdSubmenuDiv2").fadeIn("fast"),t.toggleClass("opened",!0)),this.isMenuShown=!!i&&{since:(new Date).getTime(),item:t},i?e(document).off("click.skgdMenuB").on("click.skgdMenuB",function(t){e(t.target).closest(".skgd.menub").length>0||(n.isMenuShown?n.toggleMenu(n.isMenuShown.item,!1):e(document).off("click.skgdMenuB"))}):e(document).off("click.skgdMenuB"))},toggleMiniMenu:function(t){var i=this,n=this.fixedHeader,s=this.menuDiv,o=s.hasClass("opened");!1!==t&&!0!==t&&(t=!o),s.toggleClass("opened",t),this.miniMode=t,t?(this.element.find(".skgdSubmenuDiv").toggleClass("skgdSubmenuDivMini",!0).toggleClass("skgdSubmenuDiv",!1),this.element.find(".skgdMiniMenuLink i").toggleClass("fa-bars",!1).toggleClass("fa-close",!0),this.fixedHeader.length>0?this.fixedHeader.toggleClass("fixed",!0).toggleClass("forceFixed",!0):this.element.toggleClass("fixedMode",!0),e("body").css("overflow","hidden"),this.resizeMiniMenu(),e(window).off("resize.skgdMiniMenu").on("resize.skgdMiniMenu",function(){window.innerWidth>980?i.toggleMiniMenu(!1):i.resizeMiniMenu()}),e(window).scroll()):(e("body").css("overflow",""),this.element.find(".skgdSubmenuDivMini").toggleClass("skgdSubmenuDiv",!0).toggleClass("skgdSubmenuDivMini",!1),e(window).off("resize.skgdMiniMenu"),n.length>0?(n.toggleClass("forceFixed",!1),e(window).scroll()):this.element.toggleClass("fixedMode",!1),s.css("height",""),s.css("width",""),s.css("left",""),this.element.find(".skgdMiniMenuLink i").toggleClass("fa-close",!1).toggleClass("fa-bars",!0))},resizeMiniMenu:function(){if(this.edubarMainSkin||(this.edubarMainSkin=e(".edubarMainSkin").last()),!this.element.hasClass("sidebar")){var t=this.edubarMainSkin.hasClass("blindFriendly")?2:1;this.edubarMainSkin||(this.edubarMainSkin=e(".edubarMainSkin").last());var i=this.edubarMainSkin.offset(),n=this.menuDiv.offset(),s=e(window).height()-n.top;s=this.fixedHeader.length>0?e(window).innerHeight()-this.fixedHeader.outerHeight()*t:e(window).innerHeight()-this.element.outerHeight()*t,this.menuDiv.outerHeight(s/t),n.left=i.left,this.menuDiv.offset(n),this.menuDiv.outerWidth((e(window).innerWidth()-n.left)/t)}}})},SkinResponsive.responsiveMenuSkinGadget(jQuery),SkinResponsive.accordionMenuSkinGadget=function(e){e.widget("edupage.accordionMenuSkinGadget",{options:{},submenuItems:null,hideMenuTimeout:null,showMenuTimeout:null,miniMode:!1,fixedHeader:null,menuDiv:null,isMenuShown:!1,_create:function(){var t=this;this.submenuItems=this.element.find(".skgdMenuItem.hasSubmenu"),this.submenuItemLinks=this.submenuItems.find(".skgdMenuItemLink"),this.fixedHeader=this.element.closest(".skgdFixedHeader"),this.menuDiv=this.element.find(".skgdFullMenu"),this.submenuItemLinks.disableSelection(),this.submenuItemLinks.click(function(){var i=e(this).closest(".skgdTopMenuItem");t.isMenuShown&&t.isMenuShown.item.get(0)==i.get(0)&&t.isMenuShown.since<(new Date).getTime()-1e3?t.toggleMenu(i,!1):t.toggleMenu(i,!0)}),this.submenuItemLinks.on("keydown",function(t){13==t.which&&e(this).click()}),this.submenuItems.hover(function(){var i=this;t.miniMode||(t.hideMenuTimeout&&clearTimeout(t.hideMenuTimeout),t.showMenuTimeout&&clearTimeout(t.showMenuTimeout),t.isMenuShown?t.toggleMenu(e(i),!0):t.showMenuTimeout=setTimeout(function(){t.toggleMenu(e(i),!0)},300))},function(){var i=this;t.miniMode||(t.hideMenuTimeout&&clearTimeout(t.hideMenuTimeout),t.showMenuTimeout&&clearTimeout(t.showMenuTimeout),t.hideMenuTimeout=setTimeout(function(){t.toggleMenu(e(i),!1)},300))}),this.element.find(".skgdMiniMenuLink").click(function(){t.toggleMiniMenu()})},toggleMenu:function(e,t){self.hideMenuTimeout&&clearTimeout(self.hideMenuTimeout);var i=e.hasClass("opened");i&&!0===t||(this.isMenuShown&&!i&&!1!==t?this.submenuItems.find(".skgdSubmenuDiv").hide():this.submenuItems.find(".skgdSubmenuDiv").fadeOut("fast"),this.submenuItems.toggleClass("opened",!1),e.attr("aria-expanded",i?"true":"false"),i||!1===t||(this.isMenuShown?e.find(".skgdSubmenuDiv").show():e.find(".skgdSubmenuDiv").fadeIn("fast"),e.toggleClass("opened",!0)),this.isMenuShown=!!t&&{since:(new Date).getTime(),item:e})},toggleMiniMenu:function(t){var i=this,n=this.fixedHeader,s=this.menuDiv,o=s.hasClass("opened");!1!==t&&!0!==t&&(t=!o),s.toggleClass("opened",t),this.miniMode=t,t?(this.element.find(".skgdSubmenuDiv").toggleClass("skgdSubmenuDivMini",!0).toggleClass("skgdSubmenuDiv",!1),this.element.find(".skgdMiniMenuLink i").toggleClass("fa-bars",!1).toggleClass("fa-close",!0),this.fixedHeader.length>0?this.fixedHeader.toggleClass("fixed",!0).toggleClass("forceFixed",!0):this.element.toggleClass("fixedMode",!0),this.resizeMiniMenu(),e(window).off("resize.skgdMiniMenu").on("resize.skgdMiniMenu",function(){window.innerWidth>980?i.toggleMiniMenu(!1):i.resizeMiniMenu()})):(this.element.find(".skgdSubmenuDivMini").toggleClass("skgdSubmenuDiv",!0).toggleClass("skgdSubmenuDivMini",!1),e(window).off("resize.skgdMiniMenu"),n.length>0?(n.toggleClass("forceFixed",!1),e(window).scroll()):this.element.toggleClass("fixedMode",!1),s.css("height",""),s.css("width",""),s.css("left",""),this.element.find(".skgdMiniMenuLink i").toggleClass("fa-close",!1).toggleClass("fa-bars",!0))},resizeMiniMenu:function(){var t=this.menuDiv.offset(),i=e(window).height()-t.top;i=this.fixedHeader.length>0?e(window).innerHeight()-this.fixedHeader.outerHeight():e(window).innerHeight()-this.element.outerHeight(),this.menuDiv.outerHeight(i),t.left=0,this.menuDiv.offset(t),this.menuDiv.width(e(window).innerWidth())}})},SkinResponsive.responsiveMenuSkinGadget(jQuery),SkinResponsive.openGallery=function(e,t,i,n){if(MobileAppBridge.isV2Active())EdupageApp.pushReactComponentView("/app/pics/jsw/views/noticeboard/GalleryView.js",{albumid:e,galleryid:t,fileid:i,files:n,noTransitions:!0});else if(window.edupageOpenedGallery!=e+":"+t){MobileAppBridge.isActive()&&!MobileAppBridge.isIOS()&&$(window).width()>$(window).height()&&(window.ascFullscreenOpened=!0,MobileAppBridge.runFlexMethod("fullScreenOpen",[]));var s=[];inner=!1;var o=inner?elem:$j("body"),r=$(window).scrollTop();$j(o).children().each(function(){$j(this).is(":visible")&&(s.push({elem:$j(this),display:$j(this).css("display")}),$j(this).css("display","none"))});var a=$j('<div class="photos-galleryWindow photos-outerWindow '+et(MobileAppBridge.isActive()?"photos-galleryWindow-mobile":"")+'"></div>').appendTo(o);i=i||"";var u={};return n&&(u.files=n.join(";")),$j.post("/photos/?jwgc=EdupageGalleryViewer&photo="+e+"&gallery="+t+"&fileid="+i,u,function(e){""!=e&&(a.html(e),MobileAppBridge.isActive()||a.css("background-image","none"))}),shownGalleryDialog=a,a.on("remove",function(){window.location.hash="",shownGalleryDialog=null;for(var e=0;e<s.length;e++)s[e].elem.css("display",s[e].display);$(window).scrollTop(r)}),a}},AscMasonry();