var $j=jQuery.noConflict();window.$=$j,function(e,t){"use strict";function i(e){var t=Array.prototype.slice.call(arguments,1);return e.prop?e.prop.apply(e,t):e.attr.apply(e,t)}function n(e,t,i){var n,a;for(n in i)i.hasOwnProperty(n)&&(a=n.replace(/ |$/g,t.eventNamespace),e.bind(a,i[n]))}function a(e,t,i){n(e,i,{focus:function(){t.addClass(i.focusClass)},blur:function(){t.removeClass(i.focusClass),t.removeClass(i.activeClass)},mouseenter:function(){t.addClass(i.hoverClass)},mouseleave:function(){t.removeClass(i.hoverClass),t.removeClass(i.activeClass)},"mousedown touchbegin":function(){e.is(":disabled")||t.addClass(i.activeClass)},"mouseup touchend":function(){t.removeClass(i.activeClass)}})}function o(e,t){e.removeClass(t.hoverClass+" "+t.focusClass+" "+t.activeClass)}function r(e,t,i){i?e.addClass(t):e.removeClass(t)}function s(e,t,i){var n="checked",a=t.is(":"+n);t.prop?t.prop(n,a):a?t.attr(n,n):t.removeAttr(n),r(e,i.checkedClass,a)}function l(e,t,i){r(e,i.disabledClass,t.is(":disabled"))}function d(e,t,i){switch(i){case"after":return e.after(t),e.next();case"before":return e.before(t),e.prev();case"wrap":return e.wrap(t),e.parent()}return null}function u(t,n,a){var o,r,s;return a||(a={}),a=e.extend({bind:{},divClass:null,divWrap:"wrap",spanClass:null,spanHtml:null,spanWrap:"wrap"},a),o=e("<div />"),r=e("<span />"),n.autoHide&&t.is(":hidden")&&"none"===t.css("display")&&o.hide(),a.divClass&&o.addClass(a.divClass),n.wrapperClass&&o.addClass(n.wrapperClass),a.spanClass&&r.addClass(a.spanClass),s=i(t,"id"),n.useID&&s&&i(o,"id",n.idPrefix+"-"+s),a.spanHtml&&r.html(a.spanHtml),o=d(t,o,a.divWrap),r=d(t,r,a.spanWrap),l(o,t,n),{div:o,span:r}}function c(t,i){return i.wrapperClass?d(t,e("<span />").addClass(i.wrapperClass),"wrap"):null}function p(t){return t?e("<span />").text(t).html():""}function h(){return navigator.cpuClass&&!navigator.product}function f(e){var t;return!!e[0].multiple||!(!(t=i(e,"size"))||1>=t)}function g(){return!1}function b(e,t){var i="none";n(e,t,{"selectstart dragstart mousedown":g}),e.css({MozUserSelect:i,msUserSelect:i,webkitUserSelect:i,userSelect:i})}function m(e,t,i){var n=e.val();""===n?n=i.fileDefaultHtml:n=(n=n.split(/[\/\\]+/))[n.length-1],t.text(n)}function v(e,t,i){var n,a;for(n=[],e.each(function(){var e;for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n.push({el:this,name:e,old:this.style[e]}),this.style[e]=t[e])}),i();n.length;)(a=n.pop()).el.style[a.name]=a.old}function y(e,t){var i;(i=e.parents()).push(e[0]),v(i=i.not(":visible"),{visibility:"hidden",display:"block",position:"absolute"},t)}function w(e,t){return function(){e.unwrap().unwrap().unbind(t.eventNamespace)}}var S=!0,k=!1,C=[{match:function(e){return e.is("a, button, :submit, :reset, input[type='button']")},apply:function(e,t){var r,s,d,c,h;return s=t.submitDefaultHtml,e.is(":reset")&&(s=t.resetDefaultHtml),c=e.is("a, button")?function(){return e.html()||s}:function(){return p(i(e,"value"))||s},d=u(e,t,{divClass:t.buttonClass,spanHtml:c()}),r=d.div,a(e,r,t),h=!1,n(r,t,{"click touchend":function(){var t,n,a,o;h||e.is(":disabled")||(h=!0,e[0].dispatchEvent?((t=document.createEvent("MouseEvents")).initEvent("click",!0,!0),n=e[0].dispatchEvent(t),e.is("a")&&n&&(a=i(e,"target"),o=i(e,"href"),a&&"_self"!==a?window.open(o,a):document.location.href=o)):e.click(),h=!1)}}),b(r,t),{remove:function(){return r.after(e),r.remove(),e.unbind(t.eventNamespace),e},update:function(){o(r,t),l(r,e,t),e.detach(),d.span.html(c()).append(e)}}}},{match:function(e){return e.is(":checkbox")},apply:function(e,t){var i,r,d;return i=u(e,t,{divClass:t.checkboxClass}),r=i.div,d=i.span,a(e,r,t),n(e,t,{"click touchend":function(){s(d,e,t)}}),s(d,e,t),{remove:w(e,t),update:function(){o(r,t),d.removeClass(t.checkedClass),s(d,e,t),l(r,e,t)}}}},{match:function(e){return e.is(":file")},apply:function(t,r){function s(){m(t,f,r)}var c,p,f,g;return c=u(t,r,{divClass:r.fileClass,spanClass:r.fileButtonClass,spanHtml:r.fileButtonHtml,spanWrap:"after"}),p=c.div,g=c.span,(f=e("<span />").html(r.fileDefaultHtml)).addClass(r.filenameClass),f=d(t,f,"after"),i(t,"size")||i(t,"size",p.width()/10),a(t,p,r),s(),h()?n(t,r,{click:function(){t.trigger("change"),setTimeout(s,0)}}):n(t,r,{change:s}),b(f,r),b(g,r),{remove:function(){return f.remove(),g.remove(),t.unwrap().unbind(r.eventNamespace)},update:function(){o(p,r),m(t,f,r),l(p,t,r)}}}},{match:function(e){if(e.is("input")){var t=(" "+i(e,"type")+" ").toLowerCase();return" color date datetime datetime-local email month number password search tel text time url week ".indexOf(t)>=0}return!1},apply:function(e,t){var n,o;return n=i(e,"type"),e.addClass(t.inputClass),o=c(e,t),a(e,e,t),t.inputAddTypeAsClass&&e.addClass(n),{remove:function(){e.removeClass(t.inputClass),t.inputAddTypeAsClass&&e.removeClass(n),o&&e.unwrap()},update:g}}},{match:function(e){return e.is(":radio")},apply:function(t,r){var d,c,p;return d=u(t,r,{divClass:r.radioClass}),c=d.div,p=d.span,a(t,c,r),n(t,r,{"click touchend":function(){e.uniform.update(e(':radio[name="'+i(t,"name")+'"]'))}}),s(p,t,r),{remove:w(t,r),update:function(){o(c,r),s(p,t,r),l(c,t,r)}}}},{match:function(e){return!(!e.is("select")||f(e))},apply:function(t,i){var r,s,d,c;return i.selectAutoWidth&&y(t,function(){c=t.width()}),r=u(t,i,{divClass:i.selectClass,spanHtml:(t.find(":selected:first")||t.find("option:first")).html(),spanWrap:"before"}),s=r.div,d=r.span,i.selectAutoWidth?y(t,function(){v(e([d[0],s[0]]),{display:"block"},function(){var e;e=d.outerWidth()-d.width(),s.width(c+e),d.width(c)})}):s.addClass("fixedWidth"),a(t,s,i),n(t,i,{change:function(){d.html(t.find(":selected").html()),s.removeClass(i.activeClass)},"click touchend":function(){var e=t.find(":selected").html();d.html()!==e&&t.trigger("change")},keyup:function(){d.html(t.find(":selected").html())}}),b(d,i),{remove:function(){return d.remove(),t.unwrap().unbind(i.eventNamespace),t},update:function(){i.selectAutoWidth?(e.uniform.restore(t),t.uniform(i)):(o(s,i),d.html(t.find(":selected").html()),l(s,t,i))}}}},{match:function(e){return!(!e.is("select")||!f(e))},apply:function(e,t){var i;return e.addClass(t.selectMultiClass),i=c(e,t),a(e,e,t),{remove:function(){e.removeClass(t.selectMultiClass),i&&e.unwrap()},update:g}}},{match:function(e){return e.is("textarea")},apply:function(e,t){var i;return e.addClass(t.textareaClass),i=c(e,t),a(e,e,t),{remove:function(){e.removeClass(t.textareaClass),i&&e.unwrap()},update:g}}}];h()&&!(void 0!==window.XMLHttpRequest)&&(S=!1),e.uniform={defaults:{activeClass:"active",autoHide:!0,buttonClass:"button",checkboxClass:"checker",checkedClass:"checked",disabledClass:"disabled",eventNamespace:".uniform",fileButtonClass:"action",fileButtonHtml:"Choose File",fileClass:"uploader",fileDefaultHtml:"No file selected",filenameClass:"filename",focusClass:"focus",hoverClass:"hover",idPrefix:"uniform",inputAddTypeAsClass:!0,inputClass:"uniform-input",radioClass:"radio",resetDefaultHtml:"Reset",resetSelector:!1,selectAutoWidth:!0,selectClass:"selector",selectMultiClass:"uniform-multiselect",submitDefaultHtml:"Submit",textareaClass:"uniform",useID:!0,wrapperClass:null},elements:[]},e.fn.uniform=function(t){var i=this;return t=e.extend({},e.uniform.defaults,t),k||(k=!0,function(){var t,i,n,a;return i=e('<div style="width:0;height:0;color:'+(a="rgb(120,2,153)")+'">'),e("body").append(i),n=i.get(0),t=window.getComputedStyle?window.getComputedStyle(n,"").color:(n.currentStyle||n.style||{}).color,i.remove(),t.replace(/ /g,"")!==a}()&&(S=!1)),S?(t.resetSelector&&e(t.resetSelector).mouseup(function(){window.setTimeout(function(){e.uniform.update(i)},10)}),this.each(function(){var i,n,a,o=e(this);if(o.data("uniformed"))e.uniform.update(o);else for(i=0;C.length>i;i+=1)if((n=C[i]).match(o,t))return a=n.apply(o,t),o.data("uniformed",a),void e.uniform.elements.push(o.get(0))})):this},e.uniform.restore=e.fn.uniform.restore=function(i){i===t&&(i=e.uniform.elements),e(i).each(function(){var t,i,n=e(this);(i=n.data("uniformed"))&&(i.remove(),(t=e.inArray(this,e.uniform.elements))>=0&&e.uniform.elements.splice(t,1),n.removeData("uniformed"))})},e.uniform.update=e.fn.uniform.update=function(i){i===t&&(i=e.uniform.elements),e(i).each(function(){var t,i=e(this);(t=i.data("uniformed"))&&t.update(i,t.options)})}}(jQuery),function(e){function t(e,t){return"function"==typeof e?e.call(t):e}function i(t,i){this.$element=e(t),this.options=i,this.enabled=!0,this.fixTitle()}i.prototype={show:function(){var i=this.getTitle();if(i&&this.enabled){var n=this.tip();n.find(".tipsy-inner")[this.options.html?"html":"text"](i),n[0].className="tipsy",n.remove().css({top:0,left:0,visibility:"hidden",display:"block","white-space":"nowrap"}).prependTo(document.body);var a=n.width();a>300&&(a=300),n.width(a),n.css("white-space","normal");var o,r=e.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight}),s=n[0].offsetWidth,l=n[0].offsetHeight,d=t(this.options.gravity,this.$element[0]);switch(d.charAt(0)){case"n":o={top:r.top+r.height+this.options.offset,left:r.left+r.width/2-s/2};break;case"s":o={top:r.top-l-this.options.offset,left:r.left+r.width/2-s/2};break;case"e":o={top:r.top+r.height/2-l/2,left:r.left-s-this.options.offset};break;case"w":o={top:r.top+r.height/2-l/2,left:r.left+r.width+this.options.offset}}if(2==d.length&&(o.left="w"==d.charAt(1)?r.left+r.width/2-15:r.left+r.width/2-s+15),"absolute"!=n.css("position")&&n.css("position","absolute"),n.css(o).addClass("tipsy-"+d),this.options.fixedPosition){var u=n.offset();n.css("position","fixed"),n.offset(u)}n.find(".tipsy-arrow")[0].className="tipsy-arrow tipsy-arrow-"+d.charAt(0),this.options.className&&n.addClass(t(this.options.className,this.$element[0])),this.options.fade?n.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity}):n.css({visibility:"visible",opacity:this.options.opacity})}},hide:function(){this.options.fade?this.tip().stop().fadeOut(function(){e(this).remove()}):this.tip().remove()},fixTitle:function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("original-title"))&&e.attr("original-title",e.attr("title")||"").removeAttr("title")},getTitle:function(){var e,t=this.$element,i=this.options;return this.fixTitle(),"string"==typeof(i=this.options).title?e=t.attr("title"==i.title?"original-title":i.title):"function"==typeof i.title&&(e=i.title.call(t[0])),(e=(""+e).replace(/(^\s*|\s*$)/,""))||i.fallback},tip:function(){return this.$tip||(this.$tip=e('<div class="tipsy"></div>').html('<div class="tipsy-arrow"></div><div class="tipsy-inner"></div>')),this.$tip},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled}},e.fn.tipsy=function(t){function n(n){var a=e.data(n,"tipsy");return a||(a=new i(n,e.fn.tipsy.elementOptions(n,t)),e.data(n,"tipsy",a)),a}if(!0===t)return this.data("tipsy");if("string"==typeof t){var a=this.data("tipsy");return a&&a[t](),this}if((t=e.extend({},e.fn.tipsy.defaults,t)).live||this.each(function(){n(this)}),"manual"!=t.trigger){var o=t.live?"live":"bind",r="hover"==t.trigger?"mouseenter":"focus",s="hover"==t.trigger?"mouseleave":"blur";this[o](r,function(){var e=n(this);e.hoverState="in",0==t.delayIn?e.show():(e.fixTitle(),setTimeout(function(){"in"==e.hoverState&&e.show()},t.delayIn))})[o](s,function(){var e=n(this);e.hoverState="out",0==t.delayOut?e.hide():setTimeout(function(){"out"==e.hoverState&&e.hide()},t.delayOut)})}return this},e.fn.tipsy.defaults={className:null,delayIn:0,delayOut:0,fade:!1,fallback:"",gravity:"n",html:!1,live:!1,offset:0,opacity:1,title:"title",trigger:"hover"},e.fn.tipsy.elementOptions=function(t,i){return e.metadata?e.extend({},i,e(t).metadata()):i},e.fn.tipsy.autoNS=function(){return e(this).offset().top>e(document).scrollTop()+e(window).height()/2?"s":"n"},e.fn.tipsy.autoWE=function(){return e(this).offset().left>e(document).scrollLeft()+e(window).width()/2?"e":"w"},e.fn.tipsy.autoBounds=function(t,i){return function(){var n={ns:i[0],ew:i.length>1&&i[1]},a=e(document).scrollTop()+t,o=e(document).scrollLeft()+t,r=e(this);return r.offset().top<a&&(n.ns="n"),r.offset().left<o&&(n.ew="w"),e(window).width()+e(document).scrollLeft()-r.offset().left<t&&(n.ew="e"),e(window).height()+e(document).scrollTop()-r.offset().top<t&&(n.ns="s"),n.ns+(n.ew?n.ew:"")}}}(jQuery),function(e,t){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",t):"object"==typeof module&&module.exports?module.exports=t():e.EvEmitter=t()}(this,function(){function e(){}var t=e.prototype;return t.on=function(e,t){if(e&&t){var i=this._events=this._events||{},n=i[e]=i[e]||[];return-1==n.indexOf(t)&&n.push(t),this}},t.once=function(e,t){if(e&&t){this.on(e,t);var i=this._onceEvents=this._onceEvents||{};return(i[e]=i[e]||[])[t]=!0,this}},t.off=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){var n=i.indexOf(t);return-1!=n&&i.splice(n,1),this}},t.emitEvent=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){var n=0,a=i[n];t=t||[];for(var o=this._onceEvents&&this._onceEvents[e];a;){var r=o&&o[a];r&&(this.off(e,a),delete o[a]),a.apply(this,t),a=i[n+=r?0:1]}return this}},e}),function(e,t){"use strict";"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(i){return t(e,i)}):"object"==typeof module&&module.exports?module.exports=t(e,require("ev-emitter")):e.imagesLoaded=t(e,e.EvEmitter)}(window,function(e,t){function i(e,t){for(var i in t)e[i]=t[i];return e}function n(e,t,a){return this instanceof n?("string"==typeof e&&(e=document.querySelectorAll(e)),this.elements=function(e){var t=[];if(Array.isArray(e))t=e;else if("number"==typeof e.length)for(var i=0;i<e.length;i++)t.push(e[i]);else t.push(e);return t}(e),this.options=i({},this.options),"function"==typeof t?a=t:i(this.options,t),a&&this.on("always",a),this.getImages(),r&&(this.jqDeferred=new r.Deferred),void setTimeout(function(){this.check()}.bind(this))):new n(e,t,a)}function a(e){this.img=e}function o(e,t){this.url=e,this.element=t,this.img=new Image}var r=e.jQuery,s=e.console;n.prototype=Object.create(t.prototype),n.prototype.options={},n.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},n.prototype.addElementImages=function(e){"IMG"==e.nodeName&&this.addImage(e),!0===this.options.background&&this.addElementBackgroundImages(e);var t=e.nodeType;if(t&&l[t]){for(var i=e.querySelectorAll("img"),n=0;n<i.length;n++){var a=i[n];this.addImage(a)}if("string"==typeof this.options.background){var o=e.querySelectorAll(this.options.background);for(n=0;n<o.length;n++){var r=o[n];this.addElementBackgroundImages(r)}}}};var l={1:!0,9:!0,11:!0};return n.prototype.addElementBackgroundImages=function(e){var t=getComputedStyle(e);if(t)for(var i=/url\((['"])?(.*?)\1\)/gi,n=i.exec(t.backgroundImage);null!==n;){var a=n&&n[2];a&&this.addBackground(a,e),n=i.exec(t.backgroundImage)}},n.prototype.addImage=function(e){var t=new a(e);this.images.push(t)},n.prototype.addBackground=function(e,t){var i=new o(e,t);this.images.push(i)},n.prototype.check=function(){function e(e,i,n){setTimeout(function(){t.progress(e,i,n)})}var t=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function(t){t.once("progress",e),t.check()}):void this.complete()},n.prototype.progress=function(e,t,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded,this.emitEvent("progress",[this,e,t]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,e),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&s&&s.log("progress: "+i,e,t)},n.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(e,[this]),this.emitEvent("always",[this]),this.jqDeferred){var t=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[t](this)}},a.prototype=Object.create(t.prototype),a.prototype.check=function(){return this.getIsImageComplete()?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.src))},a.prototype.getIsImageComplete=function(){return this.img.complete&&void 0!==this.img.naturalWidth},a.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.img,t])},a.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},a.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},a.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},a.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},o.prototype=Object.create(a.prototype),o.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},o.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},o.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.element,t])},n.makeJQueryPlugin=function(t){(t=t||e.jQuery)&&((r=t).fn.imagesLoaded=function(e,t){return new n(this,e,t).jqDeferred.promise(r(this))})},n.makeJQueryPlugin(),n}),function(e,t){if("function"==typeof define&&define.amd)define(["module","exports"],t);else if("undefined"!=typeof exports)t(module,exports);else{var i={exports:{}};t(i,i.exports),e.autosize=i.exports}}(this,function(e,t){"use strict";var i,n,a="function"==typeof Map?new Map:(i=[],n=[],{has:function(e){return-1<i.indexOf(e)},get:function(e){return n[i.indexOf(e)]},set:function(e,t){-1===i.indexOf(e)&&(i.push(e),n.push(t))},del:function(e){var t=i.indexOf(e);-1<t&&(i.splice(t,1),n.splice(t,1))}}),o=function(e){return new Event(e,{bubbles:!0})};try{new Event("test")}catch(e){o=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!1),t}}function r(e){var t=a.get(e);t&&t.destroy()}function s(e){var t=a.get(e);t&&t.update()}var l=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((l=function(e){return e}).destroy=function(e){return e},l.update=function(e){return e}):((l=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],function(e){return function(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!a.has(e)){var t,i=null,n=null,r=null,s=function(){e.clientWidth!==n&&c()},l=function(t){window.removeEventListener("resize",s,!1),e.removeEventListener("input",c,!1),e.removeEventListener("keyup",c,!1),e.removeEventListener("autosize:destroy",l,!1),e.removeEventListener("autosize:update",c,!1),Object.keys(t).forEach(function(i){e.style[i]=t[i]}),a.del(e)}.bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",l,!1),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",c,!1),window.addEventListener("resize",s,!1),e.addEventListener("input",c,!1),e.addEventListener("autosize:update",c,!1),e.style.overflowX="hidden",e.style.wordWrap="break-word",a.set(e,{destroy:l,update:c}),"vertical"===(t=window.getComputedStyle(e,null)).resize?e.style.resize="none":"both"===t.resize&&(e.style.resize="horizontal"),i="content-box"===t.boxSizing?-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)):parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),isNaN(i)&&(i=0),c()}function d(t){var i=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=i,e.style.overflowY=t}function u(){if(0!==e.scrollHeight){var t=function(e){for(var t=[];e&&e.parentNode&&e.parentNode instanceof Element;)e.parentNode.scrollTop&&t.push({node:e.parentNode,scrollTop:e.parentNode.scrollTop}),e=e.parentNode;return t}(e),a=document.documentElement&&document.documentElement.scrollTop;e.style.height="",e.style.height=e.scrollHeight+i+"px",n=e.clientWidth,t.forEach(function(e){e.node.scrollTop=e.scrollTop}),a&&(document.documentElement.scrollTop=a)}}function c(){u();var t=Math.round(parseFloat(e.style.height)),i=window.getComputedStyle(e,null),n="content-box"===i.boxSizing?Math.round(parseFloat(i.height)):e.offsetHeight;if(n<t?"hidden"===i.overflowY&&(d("scroll"),u(),n="content-box"===i.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight):"hidden"!==i.overflowY&&(d("hidden"),u(),n="content-box"===i.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight),r!==n){r=n;var a=o("autosize:resized");try{e.dispatchEvent(a)}catch(t){}}}}(e)}),e}).destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],r),e},l.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],s),e}),t.default=l,e.exports=t.default}),function(){"use strict";function t(e){e?(f[0]=f[16]=f[1]=f[2]=f[3]=f[4]=f[5]=f[6]=f[7]=f[8]=f[9]=f[10]=f[11]=f[12]=f[13]=f[14]=f[15]=0,this.blocks=f):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}var h="object"==typeof window?window:{},s=!h.JS_SHA1_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;s&&(h=global);var i=!h.JS_SHA1_NO_COMMON_JS&&"object"==typeof module&&module.exports,e="function"==typeof define&&define.amd,r="0123456789abcdef".split(""),o=[-2147483648,8388608,32768,128],n=[24,16,8,0],a=["hex","array","digest","arrayBuffer"],f=[],u=function(e){return function(i){return new t(!0).update(i)[e]()}},c=function(){var e=u("hex");s&&(e=p(e)),e.create=function(){return new t},e.update=function(t){return e.create().update(t)};for(var i=0;i<a.length;++i){var n=a[i];e[n]=u(n)}return e},p=function(t){var h=eval("require('crypto')"),s=eval("require('buffer').Buffer"),i=function(e){if("string"==typeof e)return h.createHash("sha1").update(e,"utf8").digest("hex");if(e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(void 0===e.length)return t(e);return h.createHash("sha1").update(new s(e)).digest("hex")};return i};t.prototype.update=function(e){if(!this.finalized){var t="string"!=typeof e;t&&e.constructor===h.ArrayBuffer&&(e=new Uint8Array(e));for(var i,a,o=0,r=e.length||0,s=this.blocks;o<r;){if(this.hashed&&(this.hashed=!1,s[0]=this.block,s[16]=s[1]=s[2]=s[3]=s[4]=s[5]=s[6]=s[7]=s[8]=s[9]=s[10]=s[11]=s[12]=s[13]=s[14]=s[15]=0),t)for(a=this.start;o<r&&a<64;++o)s[a>>2]|=e[o]<<n[3&a++];else for(a=this.start;o<r&&a<64;++o)(i=e.charCodeAt(o))<128?s[a>>2]|=i<<n[3&a++]:i<2048?(s[a>>2]|=(192|i>>6)<<n[3&a++],s[a>>2]|=(128|63&i)<<n[3&a++]):i<55296||i>=57344?(s[a>>2]|=(224|i>>12)<<n[3&a++],s[a>>2]|=(128|i>>6&63)<<n[3&a++],s[a>>2]|=(128|63&i)<<n[3&a++]):(i=65536+((1023&i)<<10|1023&e.charCodeAt(++o)),s[a>>2]|=(240|i>>18)<<n[3&a++],s[a>>2]|=(128|i>>12&63)<<n[3&a++],s[a>>2]|=(128|i>>6&63)<<n[3&a++],s[a>>2]|=(128|63&i)<<n[3&a++]);this.lastByteIndex=a,this.bytes+=a-this.start,a>=64?(this.block=s[16],this.start=a-64,this.hash(),this.hashed=!0):this.start=a}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},t.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[16]=this.block,e[t>>2]|=o[3&t],this.block=e[16],t>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}},t.prototype.hash=function(){var e,t,i=this.h0,n=this.h1,a=this.h2,o=this.h3,r=this.h4,s=this.blocks;for(e=16;e<80;++e)t=s[e-3]^s[e-8]^s[e-14]^s[e-16],s[e]=t<<1|t>>>31;for(e=0;e<20;e+=5)i=(t=(n=(t=(a=(t=(o=(t=(r=(t=i<<5|i>>>27)+(n&a|~n&o)+r+1518500249+s[e]<<0)<<5|r>>>27)+(i&(n=n<<30|n>>>2)|~i&a)+o+1518500249+s[e+1]<<0)<<5|o>>>27)+(r&(i=i<<30|i>>>2)|~r&n)+a+1518500249+s[e+2]<<0)<<5|a>>>27)+(o&(r=r<<30|r>>>2)|~o&i)+n+1518500249+s[e+3]<<0)<<5|n>>>27)+(a&(o=o<<30|o>>>2)|~a&r)+i+1518500249+s[e+4]<<0,a=a<<30|a>>>2;for(;e<40;e+=5)i=(t=(n=(t=(a=(t=(o=(t=(r=(t=i<<5|i>>>27)+(n^a^o)+r+1859775393+s[e]<<0)<<5|r>>>27)+(i^(n=n<<30|n>>>2)^a)+o+1859775393+s[e+1]<<0)<<5|o>>>27)+(r^(i=i<<30|i>>>2)^n)+a+1859775393+s[e+2]<<0)<<5|a>>>27)+(o^(r=r<<30|r>>>2)^i)+n+1859775393+s[e+3]<<0)<<5|n>>>27)+(a^(o=o<<30|o>>>2)^r)+i+1859775393+s[e+4]<<0,a=a<<30|a>>>2;for(;e<60;e+=5)i=(t=(n=(t=(a=(t=(o=(t=(r=(t=i<<5|i>>>27)+(n&a|n&o|a&o)+r-1894007588+s[e]<<0)<<5|r>>>27)+(i&(n=n<<30|n>>>2)|i&a|n&a)+o-1894007588+s[e+1]<<0)<<5|o>>>27)+(r&(i=i<<30|i>>>2)|r&n|i&n)+a-1894007588+s[e+2]<<0)<<5|a>>>27)+(o&(r=r<<30|r>>>2)|o&i|r&i)+n-1894007588+s[e+3]<<0)<<5|n>>>27)+(a&(o=o<<30|o>>>2)|a&r|o&r)+i-1894007588+s[e+4]<<0,a=a<<30|a>>>2;for(;e<80;e+=5)i=(t=(n=(t=(a=(t=(o=(t=(r=(t=i<<5|i>>>27)+(n^a^o)+r-899497514+s[e]<<0)<<5|r>>>27)+(i^(n=n<<30|n>>>2)^a)+o-899497514+s[e+1]<<0)<<5|o>>>27)+(r^(i=i<<30|i>>>2)^n)+a-899497514+s[e+2]<<0)<<5|a>>>27)+(o^(r=r<<30|r>>>2)^i)+n-899497514+s[e+3]<<0)<<5|n>>>27)+(a^(o=o<<30|o>>>2)^r)+i-899497514+s[e+4]<<0,a=a<<30|a>>>2;this.h0=this.h0+i<<0,this.h1=this.h1+n<<0,this.h2=this.h2+a<<0,this.h3=this.h3+o<<0,this.h4=this.h4+r<<0},t.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,i=this.h2,n=this.h3,a=this.h4;return r[e>>28&15]+r[e>>24&15]+r[e>>20&15]+r[e>>16&15]+r[e>>12&15]+r[e>>8&15]+r[e>>4&15]+r[15&e]+r[t>>28&15]+r[t>>24&15]+r[t>>20&15]+r[t>>16&15]+r[t>>12&15]+r[t>>8&15]+r[t>>4&15]+r[15&t]+r[i>>28&15]+r[i>>24&15]+r[i>>20&15]+r[i>>16&15]+r[i>>12&15]+r[i>>8&15]+r[i>>4&15]+r[15&i]+r[n>>28&15]+r[n>>24&15]+r[n>>20&15]+r[n>>16&15]+r[n>>12&15]+r[n>>8&15]+r[n>>4&15]+r[15&n]+r[a>>28&15]+r[a>>24&15]+r[a>>20&15]+r[a>>16&15]+r[a>>12&15]+r[a>>8&15]+r[a>>4&15]+r[15&a]},t.prototype.toString=t.prototype.hex,t.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,i=this.h2,n=this.h3,a=this.h4;return[e>>24&255,e>>16&255,e>>8&255,255&e,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24&255,i>>16&255,i>>8&255,255&i,n>>24&255,n>>16&255,n>>8&255,255&n,a>>24&255,a>>16&255,a>>8&255,255&a]},t.prototype.array=t.prototype.digest,t.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(20),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),e};var y=c();i?module.exports=y:(h.sha1=y,e&&define(function(){return y}))}(),CKEDITOR_BASEPATH="/global/pics/js/ckeditor/",
/*!
 * hoverIntent r7 // 2013.03.11 // jQuery 1.9.1+
 * http://cherne.net/brian/resources/jquery.hoverIntent.html
 *
 * You may use hoverIntent under the terms of the MIT license.
 * Copyright 2007, 2013 Brian Cherne
 * 
 * sluzi na otvaranie edubarmenu - aby sa neotvaral, len ked naozaj na nom sme 
 */
function(e){e.fn.hoverIntent=function(t,i,n){var a,o,r,s,l={interval:100,sensitivity:7,timeout:0};l="object"==typeof t?e.extend(l,t):e.isFunction(i)?e.extend(l,{over:t,out:i,selector:n}):e.extend(l,{over:t,out:t,selector:i});var d=function(e){a=e.pageX,o=e.pageY},u=function(t,i){if(i.hoverIntent_t=clearTimeout(i.hoverIntent_t),Math.abs(r-a)+Math.abs(s-o)<l.sensitivity)return e(i).off("mousemove.hoverIntent",d),i.hoverIntent_s=1,l.over.apply(i,[t]);r=a,s=o,i.hoverIntent_t=setTimeout(function(){u(t,i)},l.interval)},c=function(t){var i=jQuery.extend({},t),n=this;n.hoverIntent_t&&(n.hoverIntent_t=clearTimeout(n.hoverIntent_t)),"mouseenter"==t.type?(r=i.pageX,s=i.pageY,e(n).on("mousemove.hoverIntent",d),1!=n.hoverIntent_s&&(n.hoverIntent_t=setTimeout(function(){u(i,n)},l.interval))):(e(n).off("mousemove.hoverIntent",d),1==n.hoverIntent_s&&(n.hoverIntent_t=setTimeout(function(){var e,t;e=i,(t=n).hoverIntent_t=clearTimeout(t.hoverIntent_t),t.hoverIntent_s=0,l.out.apply(t,[e])},l.timeout)))};return this.on({"mouseenter.hoverIntent":c,"mouseleave.hoverIntent":c},l.selector)}}(jQuery);try{parent&&parent.barPagePreview&&$j("html").toggleClass("edubarHidden",!0)}catch(e){}function barShowAjaxErrorDlg(e){if(window.ajaxErrorDlg)window.ajaxErrorDlg.find(".exceptions").append("<div>"+et(e)+"</div>");else{var t="";t+='<div style="text-align:center">',t+='<div style="font-size:32px;opacity:0.5;"><i class="fa fa-fw fa-warning"></i></div>',t+='<div style="margin:16px 0">'+et(ls(3470))+"</div>",t+='<div class="exceptions">',t+="<div>"+et(e)+"</div>",t+="</div>",t+="</div>",t+='<div style="text-align:center;margin-top:10px;clear:both;">',t+='<input type="button" class="button-green closeBtn" value="'+et(ls(1573))+'" onclick="barCloseDialog(this)">',t+="</div>",window.ajaxErrorDlg=barNewDialog({title:et(ls(2315)),content:t,width:350,close:function(){window.ajaxErrorDlg=null}})}}if($j(document).ready(function(){setTimeout("barFixYuiDialogs()",1e3),barRefreshPage(),$j(window).one("load.edubar",function(){barInitPage()}),$j(window).off("resize.edubar"),$j(window).on("resize.edubar",function(){barWndResize()});var e=!1;$j(window).off("beforeunload.edubar"),$j(window).on("beforeunload.edubar",function(){e=!0}),$j(document).ajaxError(function(t,i,n,a){$(".loadingDiv").hide(),"abort"!=a&&(e||i.isErrorHandled||barShowAjaxErrorDlg(a.message||a))}),$j.datepicker&&$j.datepicker.setDefaults({defaultDate:new Date,dateFormat:"dd.mm.yy",monthNames:[ls(1711),ls(1712),ls(1713),ls(1714),ls(1715),ls(1716),ls(1717),ls(1718),ls(1719),ls(1720),ls(1721),ls(1722)],dayNames:[ls(1709),ls(1703),ls(1704),ls(1705),ls(1706),ls(1707),ls(1708)],firstDay:1,dayNamesMin:[ls(1709).substr(0,2),ls(1703).substr(0,2),ls(1704).substr(0,2),ls(1705).substr(0,2),ls(1706).substr(0,2),ls(1707).substr(0,2),ls(1708).substr(0,2)]})}),$j.ui&&$j.widget&&($j.widget("ui.dialog",$j.ui.dialog,{_allowInteraction:function(e){return!!$j(e.target).closest(".cke_dialog_body").length||!!$j(e.target).closest(".cke_skin_office2003").length||!!$j(e.target).closest(".cke").length||this._super(e)}}),$j.widget("ui.dialog",$j.ui.dialog,{_moveToTop:function(e,t){e&&this.options.modal||this._super(e,t)}})),$j.fn.selectText=function(){var e,t;return this.each(function(){document.body.createTextRange?((e=document.body.createTextRange()).moveToElementText(this),e.select()):window.getSelection&&(t=window.getSelection(),(e=document.createRange()).selectNodeContents(this),t.removeAllRanges(),t.addRange(e))})},"undefined"==typeof MobileAppData&&!window.AscMobileAppVersion){$j.origPost=$j.post;var maxEqav=7;window.maxEqav=maxEqav,$j.post=function(e,t,i,n,a){a||(a=1);var o,r=e,s=t,l=i,d=n;e+=(e.indexOf("?")>=0?"&":"?")+"eqav="+a+"&maxEqav="+maxEqav;var u=!1,c=[],p=[],h=[];if(a==maxEqav)return $j.origPost(e,t,i,n);var f=!MobileAppBridge.isActive(),g=a%2==1,b="";"function"==typeof t?(b="",i=t):b="string"==typeof t?t:$.param(t);var m="";if(g)try{for(var v=new TextEncoder,y=new Zlib.RawDeflate(v.encode(b)).compress(),w="",S=0;S<y.length;S+=1e4)w+=String.fromCharCode.apply(null,y.subarray(S,S+1e4));m="dz:"+btoa(w)}catch(e){m=Base64.encode(b,!0)}else m=Base64.encode(b,!0);var k={eqap:m,eqacs:sha1(m),eqaz:f?"1":"0"};function C(e,t,i,n){for(var a=0;a<e.length;a++)e[a]&&e[a](t,i,n)}return(o=$j.ajax({type:"POST",url:e,data:k,success:function(e,t,n){!u&&i&&i(e,t,n)},dataType:n,dataFilter:function(e,t){return"eqwd:"==e.substr(0,5)&&(e=e.substr(5),u=!0),f?"eqz:"!=e.substr(0,4)?e:Base64.decode(e.substr(4),!0):e},complete:function(e,t){if(u){a++;var i=$j.post(r,s,l,d,a);i.always(function(e,t,i){C(h,e,t,i)}),i.fail(function(e,t,i){C(p,e,t,i)}),i.done(function(e,t,i){C(c,e,t,i)}),barShowMessage(lset(9555)+"<div><u>"+lset(1553)+"</u></div>",3e4,"connectionError",function(){barNewDialog({source:"/customize/helpus.php?cmd=HelpusHelpDialog&helpid=3117"})})}}})).always0=o.always,o.fail0=o.fail,o.done0=o.done,o.done=function(e){return c.push(e),o.done0(function(t,i,n){u||e&&e(t,i,n)})},o.fail=function(e){return p.push(e),o.fail0(function(t,i,n){u||e&&e(t,i,n)})},o.always=function(e){return h.push(e),o.always0(function(t,i,n){u||e&&e(t,i,n)})},o}}function barFixYuiDialogs(){$j(".yui-dialog").each(function(){$j(this).css("z-index")<100&&$j(this).css("z-index",1*$j(this).css("z-index")+100)})}function barHideAllDropDowns(){"undefined"!=typeof ASC&&ASC.hidePopups?ASC.hidePopups():($j(".dropDown").fadeOut(150).trigger("closed"),$j(".dropDownBtn").not(".asc").children("a").removeClass("icon-button-active"),$j(".dropDownBtn").not(".asc").removeClass("btnSelected"))}function barRefreshPage(e){elem=e,elem||(elem=$j("body")),$j(".tipsy").remove(),elem.find(".tips").tipsy({gravity:"s",html:!0,delayIn:200}),elem.find(".tips-fade").tipsy({gravity:"s",html:!0,delayIn:500,fade:!1}),elem.find(".tips-right").tipsy({gravity:"w",html:!0,delayIn:200}),elem.find(".tips-left").tipsy({gravity:"e",html:!0,delayIn:200}),elem.find(".tips-bottom").tipsy({gravity:"n",html:!0,delayIn:200}),elem.find(".tips-se").tipsy({gravity:"se",html:!0,delayIn:500}),elem.find(".tipsy").css("position","fixed"),elem.find(".uniform").uniform({selectAutoWidth:!0}).removeClass("uniform"),elem.find(".dropDownBtn").off("click.dropDownBtn"),elem.find(".dropDownBtn").attr("tabindex","0").on("click.dropDownBtn",function(e){if(!$j(this).hasClass("disabled")){var t=!1,i=$j(this).children(".dropDown");this.dataDropDown||(t=!0),this.dataDropDown=i;if($j(this).children(".dropDown").length>0&&!$j(this).children(".dropDown").is(":visible")&&!$j(this).children("a").hasClass("button-disabled")){if($j(".dropDown").fadeOut(150).trigger("closed"),$j(".dropDownBtn").removeClass("btnSelected"),"fixed"==i.css("position")){t=$j(this).offset();if(!i.data("positioned")||i.data("oldpos").top!=t.top||i.data("oldpos").left!=t.left){var n={top:$j(window).scrollTop(),left:$j(window).scrollLeft()};i.css("top",t.top+$j(this).outerHeight()-n.top+"px"),i.css("left",t.left-n.left+"px"),i.data("positioned",!0),i.data("oldpos",t)}}i.fadeIn(150,function(){if($j(this).scrollTop(0),i.width()+i.offset().left>$j(document).width()&&i.css("left",$j(document).width()-i.width()-i.offset().left+"px"),"auto"==i.css("overflow-y")&&("none"==i.css("max-height")||i.data("autoheight"))){var e=Math.max(200,$j(window).height()-(i.offset().top-$j(window).scrollTop())-15);i.css("max-height",e+"px"),i.data("autoheight",!0)}var t=$j(this).find(".dropDownPanel li.marked").position();t&&t.top&&$j(this).scrollTop(Math.max(0,t.top-$j(this).height()/2))}),$j(this).addClass("btnSelected"),$j(this).trigger("dropDownOpened",{}),"undefined"!=typeof YAHOO&&YAHOO&&e.stopPropagation()}else $j(this).children(".dropDown").length>0&&0==$j(e.target).closest(".dropDown").length&&($j(".dropDown").fadeOut(150).trigger("closed"),$j(".dropDownBtn").removeClass("btnSelected"),$j(this).trigger("dropDownClosed",{}))}}).off("keypress.dropdownbtn").on("keypress.dropdownbtn",function(e){32==e.which&&e.preventDefault(),32!=e.which&&13!=e.which||$(e.target).click()}),elem.find('.ui-dialog-content form input[type="text"]').off("keydown.preventEnter"),elem.find('.ui-dialog-content form input[type="text"]').on("keydown.preventEnter",function(e){return 13==e.which&&e.preventDefault(),13!==e.which}),elem.find(".simple-tips .close").off("click.simpletips"),elem.find(".simple-tips .close").on("click.simpletips",function(){elem.find(".simple-tips").slideToggle()}),edubar&&edubar.initSmartLinks&&edubar.initSmartLinks(e?elem:$j("#bar_mainDiv")),edubar&&edubar.initFixedRightPos&&edubar.initFixedRightPos(),elem.find("a.messageDangerousUrl").off("click.messageDangerousUrl").on("click.messageDangerousUrl",function(e){var t=$(e.target).attr("href");e.preventDefault(),barShowMessageBox(ls(12035),"fa-warning",{confirm:function(){window.open(t,"_blank")||(location.href=t)}})})}function barWndSize(){var e=$j("#edubar .edubarHeader").outerHeight(),t=$j("#edubar .edubarSidebar").width(),i=$j(window).height()-(e||0);return{width:$j(window).width().w-(t||0),height:i}}function barWndResize(){var e=barWndSize().height;if(document.getElementById("bar_mainDiv")){var t=document.getElementById("bar_mainDiv");$j(t).css("min-height",e+"px")}if(null!=document.getElementById("fitheight")&&$j("#fitheight").height()!=e&&$j("#fitheight").css("min-height",e+"px"),$j("#edubar div.edubarHeaderTitle").length>0){var i=$j("#edubar .edubarHeaderRight").width();$j("#edubar div.edubarHeaderTitle").css("right",i+10+"px")}}function wndResize(){barWndResize()}function wndSize(){return barWndSize()}function barInitPage(){barRefreshPage(),barWndResize(),barHandleHashAction(),$j(window).off("resize.edubar"),$j(window).on("resize.edubar",function(){barWndResize()})}function ertl(e,t){return window.rtlMode?"rtl"==window.rtlMode?t:e:(window.eduRtl||(window.eduRtl=$("body").hasClass("eduRtl")?"rtl":"ltr"),"rtl"==window.eduRtl?t:edubar&&edubar.options.rtl?t:e)}function barRemoveDomElem(e,t,i){i||(i=0),0==i&&"undefined"!=typeof ASC&&ASC&&ASC.unmountReactChildren&&ASC.unmountReactChildren($j(e).get(0));for(var n=$j(e).children(),a=0;a<n.length;a++)barRemoveDomElem(n.get(a),!1,i+1);t||($j(e).remove(),delete e)}var barSrcLoading={},barSrcLoading2={},barSrcLoadFuncs={},barSrcReadyTriggered=!1,barReadyFuncs=null,barReadyHandler=null,barWasReady=!1,barJsIsLoading=!1,barHoldingReady=!1;function barJsLibraryIsLoaded(e){var t=e.split("?")[0];return window.barLoadedJsLibraries||(window.barLoadedJsLibraries={}),!!window.barLoadedJsLibraries[e]||!!window.barLoadedJsLibraries[t]}function barInitializeJsLoad(){barJsIsLoading||(barWasReady=$j.isReady,barHoldingReady||($j.holdReady(!0),barHoldingReady=!0),$j.isReady=!1,barReadyFuncs||(barReadyFuncs=[]),barReadyHandler=jQuery.fn.ready,jQuery.fn.ready=function(e){barReadyFuncs||(barReadyFuncs=[]),barReadyFuncs.push(e)},barJsIsLoading=!0)}function barJsLoadingDone(){if(barJsIsLoading){var e=!0,t=!0,i=[];for(var n in barSrcLoading)"done"!=barSrcLoading[n]&&(e=!1),"done"!=barSrcLoading[n]&&"error"!=barSrcLoading[n]&&(t=!1),"error"==barSrcLoading[n]&&i.push(n);if(e)if($j.isReady=barWasReady,jQuery.fn.ready=barReadyHandler,barHoldingReady=!1,$j.holdReady(!1),barJsIsLoading=!1,$j.isReady){if(barReadyFuncs)for(var a=0;a<barReadyFuncs.length;a++)barReadyFuncs[a]($j);barReadyFuncs=null}else $j(document).ready(function(){if(barReadyFuncs)for(var e=0;e<barReadyFuncs.length;e++)barReadyFuncs[e]($j);barReadyFuncs=null});else t&&barShowAjaxErrorDlg(i.join("<br>"))}}function barRequireJs(e,t){$j.isArray(e)||(e=[e]);for(var i=0,n=0;n<e.length;n++){var a=e[n];a.split("?")[0];barJsLibraryLoad(a,function(){++i>=e.length&&t&&t()})}}var barYoutubeReadyFunc=[];function barLoadYoutubeApi(e){window.isYoutubePlayerReady?e():barJsLibraryLoad("https://www.youtube.com/iframe_api",function(){window.isYoutubePlayerReady?e():barYoutubeReadyFunc.push(e)})}function onYouTubePlayerAPIReady(){window.isYoutubePlayerReady=!0;for(var e=0;e<barYoutubeReadyFunc.length;e++)barYoutubeReadyFunc[e]();barYoutubeReadyFunc=[]}function barJsLibraryLoad(e,t,i,n){var a=e.split("?");if(1==a.length){var o=window.ascSrcVer&&window.ascSrcVer[e.toLocaleLowerCase()]?window.ascSrcVer[e.toLocaleLowerCase()]:"";o&&(e+="?v="+o)}var r,s=a[0];barJsLibraryIsLoaded(e)?(t&&t(),i&&i()):("https://www.google.com/jsapi"==e.toLowerCase()&&(edubar&&"cn"==edubar.options.school_country||n&&"cn"==n.school_country)&&(barCssLoad("/global/pics/js/gjsapi/visualization1.css"),barCssLoad("/global/pics/js/gjsapi/static/modules/gviz/1.0/core/tooltip.css"),e="/global/pics/js/gjsapi/gvis.min.js?v=7"),$j.ajaxSetup({cache:!0}),t?"loading"!=barSrcLoading2[s]?(barSrcLoading2[s]="loading","/"==e[0]?((r=new XMLHttpRequest).open("GET",e),r.setRequestHeader("Accept","text/javascript, application/javascript, application/ecmascript, application/x-ecmascript, */*; q=0.01"),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.onload=function(){if("404"==r.status)return console.log("error loading 404: "+e),barSrcLoading2[s]="error",void barShowAjaxErrorDlg(e+": 404 not found");var i=r.responseText;if(i=i.replace("var ASC;",";"),i+="\n//@ sourceURL="+e,eval.call(null,i),barSrcLoading2[s]="done",window.barLoadedJsLibraries[s]=!0,t(),barSrcLoadFuncs[s]){for(var n=0;n<barSrcLoadFuncs[s].length;n++)barSrcLoadFuncs[s][n]();barSrcLoadFuncs[s]=[]}},r.onerror=function(t){console.log("error loading "+e+";"+t),barSrcLoading2[s]="error",barShowAjaxErrorDlg(s+": "+t)},r.send()):$j.ajax({dataType:"script",url:e,success:function(){if(barSrcLoading2[s]="done",window.barLoadedJsLibraries[s]=!0,t(),barSrcLoadFuncs[s]){for(var e=0;e<barSrcLoadFuncs[s].length;e++)barSrcLoadFuncs[s][e]();barSrcLoadFuncs[s]=[]}},error:function(t,i,n){console.log("error loading "+e+";"+n),barSrcLoading2[s]="error",barShowAjaxErrorDlg(e+": "+n)}})):(barSrcLoadFuncs[s]||(barSrcLoadFuncs[s]=[]),barSrcLoadFuncs[s].push(t)):"loading"!=barSrcLoading[s]&&(barSrcLoading[s]="loading",barInitializeJsLoad(),"/"==e[0]?((r=new XMLHttpRequest).open("GET",e),r.onload=function(){if("404"==r.status)return console.log("error loading 404: "+e),barSrcLoading[s]="error",void barJsLoadingDone();var t=r.responseText;t=t.replace("var ASC;",";"),t+="\n//@ sourceURL="+e;try{eval.call(null,t)}catch(t){console.log("error loading: "+e),console.log(t)}window.barLoadedJsLibraries[s]=!0,barSrcLoading[s]="done",barJsLoadingDone()},r.onerror=function(t){console.log("error loading "+e+";"+t),barSrcLoading[s]="error",barJsLoadingDone()},r.send()):$j.ajax({dataType:"script",url:e,success:function(){window.barLoadedJsLibraries[s]=!0,barSrcLoading[s]="done",barJsLoadingDone()},error:function(t,i,n){console.log("error loading "+e+";"+n),barSrcLoading[s]="error",barJsLoadingDone()}})))}function barCssLoad(e,t){if(t||(t="all"),!barJsLibraryIsLoaded(e)){if($j.ajaxSetup({cache:!0}),$j("head").find('link[rel="stylesheet"][href="'+et(e)+'"]').length>0)return void(window.barLoadedJsLibraries[e]=!0);var i=jQuery(document.createElement("link")).attr({href:e,media:t,type:"text/css",rel:"stylesheet"});$("#appdarkModeCss").length>0?i.insertBefore($("#appdarkModeCss")):i.appendTo("head"),window.barLoadedJsLibraries[e]=!0}}function barRegisterSmartLeaveFunc(e){edubar&&(edubar.smartLeaveFunc=e)}function barRegisterPopstateHandler(e,t,i,n,a){edubar&&(edubar.popStateHandlers||(edubar.popStateHandlers=[]),barUnregisterPopstateHandler(e),edubar.popStateHandlers.push({elem:e,func:"function"!=typeof e||t?t:e,state:n||window.history.state,url:i||window.location.href}),window.history.pushState(n||window.history.state,"",i||window.location.href),"function"==typeof e||!1!==a&&$j(e).on("remove.barRegisterPopstateHandler",function(){barUnregisterPopstateHandler(e)}))}function barUnregisterPopstateHandler(e){if(edubar){edubar.popStateHandlers||(edubar.popStateHandlers=[]);for(var t=[],i=0;i<edubar.popStateHandlers.length;i++){var n=edubar.popStateHandlers[i];n.elem!=e&&t.push(n)}edubar.popStateHandlers=t,"function"!=typeof e&&$j(e).off("remove.barRegisterPopstateHandler")}}function barSmartLoadPage(e,t,i,n,a){if(MobileAppBridge.isV2Active())$(window).trigger("smartLoadPage",[e]);else if(!MobileAppBridge.isActive()||i||MobileAppBridge.isV2Active()||$j("#bar_mainDiv").empty(),edubar||(window.location=e),edubar&&edubar.options.hasActiveModuleSkin)window.location=e;else{if(i&&(edubar.noHideContent=!0),i){var o=$(window).scrollTop();edubar.smartLoadPage(e,t,t,!1,function(){$(window).scrollTop(o),a&&a()})}else edubar.smartLoadPage(e,t,t,!1,a);MobileAppBridge.isActive()&&n&&!MobileAppBridge.isV2Active()&&(window.location="https://barsmartloadingpage/")}}function barSmartEmptyPage(){$j("#bar_mainDiv").empty()}function barSmartLoadPageForce(e){edubar||(window.location=e),edubar.smartLoadPage(e,!1,!0)}function barSmartReloadPage(e){edubar||document.location.reload(!0),edubar&&edubar.smartLoadPage&&edubar.smartLoadPage(window.location.href,!0,!0,null,e),MobileAppBridge.isV2Active()&&($(window).trigger("edupageTablesUpdated",[{},EdubarUtils.getEdupage(),EdubarUtils.getLoggedUser(),"actionAdded"]),$(window).trigger("smartReloadPage"))}function barSmartLoadScript(e,t){if(!edubar)return e=e+(-1==e.indexOf("?")?"?":"&")+"barNoSkin=1&barContentOnly=1",t||(t="GET"),void $j.ajax({type:t,url:e,data:{},success:function(e){$j("body").append('<div class="barSmartLinkDataDiv" style="display:none">'+e+"</div>")}});edubar.smartLoadScript(e,t)}function barShowSchoolYearSelector(){$j("#edubarSchoolYear").show()}function barHideSchoolYearSelector(){$j("#edubarSchoolYear").hide()}function barShowMessage(e,t,i,n){barShowMessageEx(e,t,{specialClass:i,clickFunc:n,appCloseButton:MobileAppBridge.isV2Active()&&"undoMsg"==i})}function barShowMessageEx(e,t,i){i||(i={}),t||(t=1e4),$j("body").children(".barMessageText").remove();var n="",a="",o="";if(i.attachToElem){var r=$j(i.attachToElem).offset();a=r.left+$j(i.attachToElem).outerWidth()/2+"px",o=r.top+3+"px",i.specialClass||(i.specialClass=""),i.specialClass+=" barMessageAttached"}n+=renderS('<div class="barMessageText {specialClass}" role="status" style="display:none;left:{left};top: {top};">',{specialClass:i.specialClass?i.specialClass:"",left:a,top:o}),i.appCloseButton&&(n+='<div class="barMessageTextCloseButton"><a class="app-link-button inheritColor closeBtn"><i class="material-icons" style="vertical-align:middle">close</i></a></div>'),n+=e;var s=$j(n+="</div>").appendTo($j("body"));return i.keepOpen?s.fadeIn("fast"):(t>0?s.fadeIn("fast").delay(t).fadeOut("fast",function(){$(window).off("edupageAppViewsChanged.barShowMessageEx"),$j(this).remove()}):s.fadeIn("fast"),$(window).one("edupageAppViewsChanged.barShowMessageEx",function(){i.keepOnViewChange||s.remove()}),s.on("click",function(e){$(e.target).closest(".closeBtn").length>0||(i.clickFunc&&i.clickFunc(),$(window).off("edupageAppViewsChanged.barShowMessageEx"),$j(this).remove())})),s.find(".closeBtn").on("click",function(){$(window).off("edupageAppViewsChanged.barShowMessageEx"),$j(s).remove()}),s}var barUrlToModule={},edubar=null;function barSelectEdubarModule(e){edubar&&edubar.selectModuleById&&edubar.selectModuleById(e)}function barHandleHashAction(){if("#edubaract_"==window.location.hash.substr(0,11)){var e=window.location.hash.substr(1);"function"==typeof window[e]&&(window.location.hash="",window[e]())}}function barGotoUrl(e){window.location=e}function barTrackTiming(e,t,i,n){}function barTrackEvent(e){}function showProtoUserCallout(){zn_showPopup("bar_protoUserCallout",getX(document.getElementById("barKontoBtn"))-120,getY(document.getElementById("barKontoBtn"))+15)}function barEncLink(e){var t=e.indexOf("?"),i=e.indexOf("#",-1==t?0:t);-1===t&&-1!=i&&(t=i-1);var n=-1==t?"":-1!=i?e.substr(t+1,i-t-1):e.substr(t+1),a=-1==t?e:e.substr(0,t);return a+="?",n&&(a+="eqa="+encodeURIComponent(Base64.encode(n,!0))),-1!=i&&(a+=e.substr(i)),a}function barGetPicUrl(e,t){return e?"/elearning/ruqjzfpv"==e.substr(0,"/elearning/ruqjzfpv".length)?e:t+("/"==t.substr(-1)||"/"==url.substr(0,1)?"":"/")+e:""}function staticUrl(e){return e?ASC&&ASC.ascdevelop?e:"http"==e.substr(0,4)||"//"==e.substr(0,2)?e:("/"!=e.substr(0,1)&&(e="/"+e),"/elearn/"==e.substr(0,8)?e:"/files/"==e.substr(0,7)?e:"/photos/"==e.substr(0,8)?e:"//static.edupage.org"+e):e}function getXYSize(){var e=0,t=0;return"number"==typeof window.innerWidth?(e=window.innerWidth,t=window.innerHeight):document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?(e=document.documentElement.clientWidth,t=document.documentElement.clientHeight):document.body&&(document.body.clientWidth||document.body.clientHeight)&&(e=document.body.clientWidth,t=document.body.clientHeight),{y:t,x:e}}function getYSize(){return getXYSize().y}function getXSize(){return getXYSize().x}function getDocumentHeight(){var e=document;return Math.max(Math.max(e.body.scrollHeight,e.documentElement.scrollHeight),Math.max(e.body.offsetHeight,e.documentElement.offsetHeight),Math.max(e.body.clientHeight,e.documentElement.clientHeight))}function getDocumentWidth(){var e=document;return Math.max(Math.max(e.body.scrollWidth,e.documentElement.scrollWidth),Math.max(e.body.offsetWidth,e.documentElement.offsetWidth),Math.max(e.body.clientWidth,e.documentElement.clientWidth))}function getXYScroll(){var e=0,t=0;return"number"==typeof window.pageYOffset?(t=window.pageYOffset,e=window.pageXOffset):document.body&&(document.body.scrollLeft||document.body.scrollTop)?(t=document.body.scrollTop,e=document.body.scrollLeft):document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)&&(t=document.documentElement.scrollTop,e=document.documentElement.scrollLeft),{x:e,y:t}}function getXScroll(){return getXYScroll().x}function getYScroll(){return getXYScroll().y}function getY(e){for(var t=0;null!=e;)t+=e.offsetTop,e=e.offsetParent;return t}function getX(e){for(var t=0;null!=e;)t+=e.offsetLeft,e=e.offsetParent;return t}function ls(e){return"undefined"!=typeof Langs&&Langs&&Langs[e]?edubar&&edubar.options&&edubar.options.showLangIds?e.toString():Langs[e]:e.toString()}function lsf(e,t){var i=parseInt(e)?ls(parseInt(e)):e;if(t)for(var n in t){var a=t[n];for(i=i.replace("{"+n+"}",a+"");;){var o=i.indexOf("{"+n+":");if(!(o>=0))break;var r=o+2+n.length,s=i.indexOf("}",r),l=i.substring(r,s).split("|"),d=1;switch(EdubarUtils.getLang()){case"sk":case"cz":d=1==a?1:a>=2&&a<5&&Math.ceil(a)==Math.floor(a)?2:3;break;default:d=1==a?1:2;case"hr":var u=Math.abs(parseInt(a+""));d=u%10==1&&u%100!=11?1:u%10>=2&&u%10<5&&(u%100<10||u%100>=20)?2:3}1==l.length&&(l=["",l[0],l[0]]),2==l.length&&(l=[l[0],l[1],l[1]]),i=i.substr(0,o)+l[d-1]+i.substr(s+1)}}return i}function lset(e){return"undefined"!=typeof Langs&&Langs?Langs[e]?edubar&&edubar.options&&edubar.options.showLangIds?et(e.toString()):et(Langs[e]):et(e.toString()):e.toString()}function barLangToRtl(e){return"il"==e?"rtl":"rb"==e?"rtl":"ltr"}function et(e){return null==e&&(e=""),(e+="").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function etTexSafe(e){return null==e&&(e=""),et(e+="").replace(/\{/g,"@@lbrace@@").replace(/\}/g,"@@rbrace@@")}function etnl2br(e){var t=et(e);return t=t.replace(new RegExp("\n","gi"),"<br>")}function et2(e){return null==e&&(e=""),(e+="").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function et2nl2br(e){var t=et2(e);return t=t.replace(new RegExp("\n","gi"),"<br>")}function undoet(e){return null==e&&(e=""),(e+="").replace(/&amp;/g,"&").replace(/&nbsp;/g," ").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#039;/g,"'")}function renderS0(e,t){var i=e.match(new RegExp("{#?!?[a-z0-9A-Z_.]+}","g"));if(!i)return e;for(var n={},a=0;a<i.length;a++){var o=i[a],r=o.substr(1,i[a].length-2),s=!1;"!"==r.substr(0,1)&&(r=r.substr(1),s=!0);var l=null;if("#"==r.substr(0,1))l=ls(r.substr(1));else if(t){for(var d=r.split("."),u=t,c=0;c<d.length-1;c++){if(!u[d[c]]){u=null;break}u=u[d[c]]}if(c=d.length-1,u){var p=d[c];l=u[p]||0===u[p]?u[d[c]]:""}}null!==l&&(l=l.toString(),s||(l=et(l)),n[o]=l)}return e=EdubarUtils.strtr(e,n)}$j.widget&&$j.widget("edupage.edubar",{options:{edupageUrl:"",erid:"",sessionPingInterval:600,sessionPingUrl:"",somNaPortali:!1,urlToModule:{},chatVisible:!1,loggedUser:"",lang:"",hasActiveModuleSkin:!1,syncIntervalMultiplier:1,lastSync:""},menuOpened:null,defaultHeadHtml:"",lastLoadedLocation:"",lastSyncTime:0,lastSessionPingTime:0,openedChatWindows:{},switchAccount:function(e){window.location="/login/edupageChange?rid="+encodeURIComponent(e)},switchToAdmin:function(){barNewDialog({source:"/portal/?cmd=SwitchToAdmin"})},_create:function(){var e=this;edubar=this,barUrlToModule=this.options.urlToModule,EdubarUtils.getLoggedUser()&&(this.options.defNarrow?$j("body").toggleClass("edubarSidebarCollapsed","0"!==localStorage.getItem("edubarSidebarCollapsed"+sha1(EdubarUtils.getLoggedUser()))):$j("body").toggleClass("edubarSidebarCollapsed","1"===localStorage.getItem("edubarSidebarCollapsed"+sha1(EdubarUtils.getLoggedUser())))),this.defaultHeadHtml=$j("head").html(),this.element.find(".edubarFeedbackBtn").on("click",function(){barNewDialog({source:e.options.edupageUrl+"/znamky/?jwgc=ZnamkyFeedbackDialog"})}),this.element.find(".edubarChangeEdurowBtn").on("click",function(){e.switchAccount($j(this).attr("data-rowid"))}),this.element.find(".switchToAdminBtn").on("click",function(){e.switchToAdmin()}),this.element.find(".edubarChatBtn").on("click",function(){e.toggleChat()}),this.element.find("#edubarBBBtn").on("click",function(){e.action_openBBPopup()}),this.element.find("ul.edubarMenulist.level1").each(function(){$j(this).width(70*$j(this).children("li").length)}),this.element.find("ul.edubarMenulist > li").hoverIntent({over:function(){$j(this).siblings("li").find("ul.edubarMenulist").hide(),$j(this).children("ul.edubarMenulist").show()},out:function(){$j(this).children("ul.edubarMenulist").hide()},timeout:250}),this.element.find("ul.edubarMenulist > li").click(function(){$j(this).siblings("li").find("ul.edubarMenulist").hide(),$j(this).children("ul.edubarMenulist").show()}),this.element.find(".edubarHoverMenu").hover(function(){e.profileBoxTimeout&&clearTimeout(e.profileBoxTimeout);var t=this;e.profileBoxTimeout=setTimeout(function(){e.element.find(".edubarHoverMenu").toggleClass("hovered2",!1),$j(t).toggleClass("hovered",!0),e.profileBoxTimeout=null},500)},function(){e.profileBoxTimeout&&clearTimeout(e.profileBoxTimeout),$j(this).toggleClass("hovered",!1)}).click(function(t){e.profileBoxTimeout&&clearTimeout(e.profileBoxTimeout);var i=this;$j(t.target).closest("a[href]").length>0?($j(this).toggleClass("hovered2",!1),$j(this).toggleClass("hovered",!1)):$j(this).toggleClass("hovered2",!0),e.documentClickEdubarHoverMenuInited||($j(document).on("click.edubarHoverMenu",function(t){var n=$j(t.target).closest(".edubarHoverMenu");0!=n.length&&n.get(0)==i||($j(document).off("click.edubarHoverMenu"),e.element.find(".edubarHoverMenu").toggleClass("hovered2",!1),e.documentClickEdubarHoverMenuInited=!1,n.length>0&&n.click())}),e.documentClickEdubarHoverMenuInited=!0)}),this.element.find(".edubarHideCalloutBtn").on("click",function(){$j("#bar_protoUserCallout").fadeOut("fast")}),this.element.find("#edubarNewItemBtn").on("click",function(){barNewDialog({title:ls(3278),source:"/timeline/?cmd=creator",dialogClass:"whiteDialog",height:518})}),this.element.find(".edubarHideCalloutBtn").on("click",function(){$j("#bar_protoUserCallout").fadeOut("fast")}),this.element.find(".profilemenu a.switchChildBtn").on("click",function(){var e=$j(this).attr("data-sid");$j.get("/login/switchchild?studentid="+e,function(e){document.location.reload(!0)})}),this.element.find("#edubarSchoolYear select").on("change",function(){e.switchSchoolYear($j(this).val())}).each(function(){e.schoolYearVal=$j(this).val()}),this.hashChange(),this.initSmartLinks(this.element),this.initGlobalEvents(),e.options.sessionPingInterval>0&&!e.options.somNaPortali&&setTimeout(function(){e.sessionPing()},1e3*e.options.sessionPingInterval),this.initCheckTimer(),this.options.syncIntervalMultiplier&&(this.syncIntervalMultiplier=Math.min(5,Math.max(.5,parseFloat(this.options.syncIntervalMultiplier)))),this.lastLoadedLocation=window.location.pathname+window.location.search,$j(window).on("load",function(){e.initSmartLinks($j("#bar_mainDiv")),e.initSyncInterval(),sessionStorage&&"1"==sessionStorage.getItem("chatOpened")&&!EdubarUtils.isAdmin()&&e.openChat(),sessionStorage&&"1"==sessionStorage.getItem("bbPanelOpened")&&-1==window.location.href.indexOf("/bb/")&&e.action_openBBPopup()});var t={};for(var i in this.options.urlToModule)for(var n in t[i]||(t[i]={}),this.options.urlToModule[i])t[i][barEncLink(n)]=1;for(var i in t)for(var n in t[i])this.options.urlToModule[i][n]=1;if(this.selectModule([window.location.pathname+window.location.search]),this.options.ascspl||!1===this.options.ascspl){var a="";this.options.ascspl?(a+='<a class="ascSupportLnk" style="">',a+='<i class="fa fa-fw fa-bell" style="color: #FF5722"></i>',a+="</a>"):(a+='<a class="ascSupportLnk" style="">',a+='<i class="fa fa-fw fa-bell-o" style="color: #FFEB3B"></i>',a+="</a>"),$j(a).appendTo(this.element.find(".profilemenu")).on("click",function(){var t=window.location.href;t=t.split("#")[0],t+=(-1!=t.indexOf("?")?"&":"?")+"extendedSupport="+(e.options.ascspl?"1":"0"),window.location=t})}if(this.options.ecourseenabled){a='<div class="edubarSidebarCollapseDiv" title="Collapse menu">';a+='<i class="fa fa-angle-'+ertl("left","right")+'"></i>',$j(a+="</div>").appendTo(this.element.find(".edubarSidebar")).on("click",function(){$j("body").toggleClass("edubarSidebarCollapsed");var e=$j("body").hasClass("edubarSidebarCollapsed");localStorage.setItem("edubarSidebarCollapsed"+sha1(EdubarUtils.getLoggedUser()),e?"1":"0"),$j(window).resize()})}$j("#edubarStartButton").click(function(){e.toggleStartButton()}).hover(function(){$j("#edubarStartContainer").find(".edubarStartNotifier").fadeOut(200,function(){$(this).remove()}).find(".eb-anim-move-left").toggleClass("eb-anim-move-left",!1)}).each(function(){setTimeout(function(){$j("#edubarStartContainer").find(".edubarStartNotifier").fadeOut(200,function(){$(this).remove()}).find(".eb-anim-move-left").toggleClass("eb-anim-move-left",!1)},8e3)}),EdubarUtils.isUcitel()&&this.initCoursesToolbar()},toggleStartButton:function(e,t){var i=this;void 0===e&&(e=!this.startButtonBox||!this.startButtonBox.is(":visible")),(e||this.startButtonBox)&&(this.startButtonBox||this.initStartButtonBox(),$j(document).off("click.edubarStartButton"),e?($j("#edubarStartContainer").find(".edubarStartNotifier").remove(),t&&this.startButtonBox.find('.edubarstart-tab-button[data-id="'+et(t)+'"]').click(),this.startButtonBox.css("margin-left","-30px").css("opacity",0).show().animate({"margin-left":0,opacity:1},100,"swing",function(){$j(document).on("click.edubarStartButton",function(e){$j(e.target).closest(".edubarStartButtonBox").length>0&&0==$j(e.target).closest(".edubarSmartLink,.qintro-btn").length||(i.toggleStartButton(!1),$j(document).off("click.edubarStartButton"))})})):this.startButtonBox.animate({"margin-left":-30,opacity:0},100,"swing",function(){i.startButtonBox.hide()}),i.startButtonBox.find(".estart-pageEditBtn").toggle(!!i.options.isEditablePage).find(".estart-editableModuleName").text(i.options.editableModuleName),i.startButtonBox.find(".estart-cancelEditBtn").toggle(!!i.options.isEditing),$j("#edubarStartButton").toggleClass("opened",e))},initStartButtonBox:function(){var e=this;this.startButtonBox=$('<div class="edubarStartButtonBox fixedLeft" style="display:none"><div class="" style="padding: 25px;text-align:center;opacity:0.5;color: #000;position: absolute;top: 50%;left:0;right:0;transform: translateY(-50%);"><i class="fa fa-spinner fa-spin" style="font-size: 64px;color: #aaa"></i></div></div>').appendTo("#edubarStartContainer"),$j.post("/user/?cmd=StartButton&akcia=getContent",{},function(t){e.startButtonBox.html(t),e.startButtonBox.find(".estart-cancelEditBtn").toggle(!!e.options.isEditing),e.startButtonBox.find(".estart-pageEditBtn").toggle(!!e.options.isEditablePage).find(".estart-editableModuleName").text(e.options.editableModuleName)})},iniCoursesListBox:function(){var e=this;this.coursesToolbar.find(".edubarCourseListBoxOuter").remove(),this.coursesListBoxOuter=$('<div style="position: fixed;left:0;right:0;top:0;bottom:0;background-color: rgba(0,0,0,0.2);display:none" class="edubarCourseListBoxOuter"><div class="edubarCourseListBox fixedLeft" ><div class="" style="padding: 25px;text-align:center;opacity:0.5;color: #000;position: absolute;top: 50%;left:0;right:0;transform: translateY(-50%);"><i class="fa fa-spinner fa-spin" style="font-size: 64px;color: #aaa"></i></div></div></div>').appendTo(this.coursesToolbar),this.coursesListBox=this.coursesListBoxOuter.find(".edubarCourseListBox");var t=$(".etest-meditor-topmain"),i={ed:t.length>0?t.attr("data-searcherpohlad"):"last",edubar:"1",skipDp:"undefined"!=typeof DailyPlan&&DailyPlan.isCachedDate((new Date).format("Y-m-d"))?"1":"0"};$j.post("/elearning/?cmd=Standards&akcia=getContent",i,function(t){e.coursesListBox.html(t)})},toggleCoursesListBox:function(e){var t=this;void 0===e&&(e=!this.coursesListBox||!this.coursesListBox.is(":visible")),(e||this.coursesListBox)&&(this.coursesListBox||this.iniCoursesListBox(),e?(this.coursesListBoxOuter.show(),this.coursesListBox.css("margin-left","-30px").css("opacity",0).show().animate({"margin-left":0,opacity:1},100,"swing",function(){t.coursesListBoxOuter.on("click",function(e){$j(e.target).closest(".edubarCourseListBox").length>0||t.toggleCoursesListBox(!1)})})):this.coursesListBox.animate({"margin-left":-30,opacity:0},100,"swing",function(){t.coursesListBox&&(t.coursesListBox.hide(),t.coursesListBoxOuter.hide())}))},clearCoursesListBox:function(){this.coursesListBox=null,this.coursesToolbar.find(".edubarCourseListBoxOuter").remove(),this.coursesListBoxOuter=null},clearCoursesToolbar:function(){this.coursesListBox=null,this.coursesToolbar&&this.coursesToolbar.html("")},initCoursesToolbar:function(e){if(!this.options.isRestrictedEdupage){if(this.coursesListBox=null,e)for(var t in e)this.options[t]=e[t];var i=this,n="",a=this.options.courserow?this.options.courserow:{name:ls(7879),edubarCls:"notSelectedCourse"},o=!1;e&&e.asAdmin&&(o=!0),EdubarUtils.isUcitel()&&a&&a.ucitelids&&-1==EdubarUtils.indexOf(a.ucitelids,EdubarUtils.isUcitel())&&!a.isKompetenciePlan&&(o=!0),n+=renderS('<a class="edubarCourseListBtn {invalidPlan} edubarCourseModuleLink {edubarCls}" data-module="courses">',{invalidPlan:a&&a.valid?"":"invalidPlan",edubarCls:a.edubarCls?a.edubarCls:""});var r="";r+='<div class="edubar-course-image" style="background-image:url(\'{img}\')">',n+=renderS(r+="</div>",{img:a&&a.img?a.img:"/elearning/pics/icons/subjectDefault2.jpg"}),n+='<span style="display: inline-block;vertical-align: middle;">',n+="<b>";var s=a.name.split(/[-]/);2==s.length?(n+=et(s[0]),n+="<br>",n+=et(s[1])):n+=a.name.naDvaRiadky(),a.rok_nazov&&a.rok!=this.options.autoYear&&(n+=' <span style="font-weight:normal;opacity:0.7">('+et(a.rok_nazov)+")</span>"),n+="</b>",n+="</span>",n+=' <i class="fa fa-caret-down fa-fw" style="padding:0;font-size:16px;"></i>',n+="</a>";var l=[];EdubarUtils.isAdmin()||EdubarUtils.isStudentOrParent()||o||(EdubarUtils.isStudentOrParent()||(l.push({id:"preparations",title:ls(7878),href:barEncLink("/elearning/?cmd=EtestCreator&cspohladStart=classPlan"),sidebarTab:"classPlan"}),l.push({id:"standards",title:ls(7876),href:barEncLink("/elearning/?cmd=EtestCreator&cspohladStart=globalPlan"),sidebarTab:"globalPlan"})),EdubarUtils.isUcitel()&&l.push({id:"activity",title:ls(7880),href:barEncLink("/elearning/?cmd=EtestCreator&cspohladStart=library"),sidebarTab:"library"}),EdubarUtils.isStudentOrParent()&&l.push({id:"curriculum",title:ls(3367),href:barEncLink("/elearning/?cmd=PlanBrowser"),sidebarTab:"curriculum"}),l.push({id:"results",title:ls(2133),href:barEncLink("/elearning/?cmd=EtestCreator&cspohladStart=tests"),sidebarTab:"tests"}),l.push({id:"znamky",title:ls(1131),href:barEncLink(EdubarUtils.isAdmin()?"/znamky/?what=zobraztriedu":"/znamky/")}),(EdubarUtils.isUcitel()||EdubarUtils.isAdmin())&&l.push({id:"students",title:ls(1006),href:barEncLink("/elearning/?cmd=Students")}),EdubarUtils.isUcitel()&&this.options.bbenabled);for(var d=0;d<l.length;d++){var u=l[d];r="";r+="<a "+(u.href?'href="{r.href}"':"")+' class="edubarCourseModuleLink edubarCourseModuleLink0" data-module="{r.id}" data-stab="{r.sidebarTab}" title="{title}" data-action="{r.action}">',r+='<div class="ebicon ebicon-module-{r.id}"></div>',(EdubarUtils.isUcitel()||EdubarUtils.isStudentOrParent())&&(r+="<span>{r.title}</span>"),"openBBPopup"==u.action&&(r+='<i class="fa fa-fw fa-caret-down" style="opacity:0.5"></i>'),n+=renderS(r+="</a>",{r:u,selectd:"",title:EdubarUtils.isUcitel()?"":u.title})}this.coursesToolbar=this.element.find(".edubarHeaderCourses"),this.coursesToolbar.html(n),this.initSmartLinks(this.coursesToolbar),this.coursesToolbar.find(".edubarCourseListBtn").click(function(e){o?barSmartLoadPage(barEncLink("/plany/?cmd=planyadmin")):EdubarUtils.isAdmin()?barSmartLoadPage(barEncLink("/elearning/?cmd=Standards&ed=last")):i.toggleCoursesListBox()}),this.coursesToolbar.find(".edubarCourseModuleLink0").click(function(e){if(1==e.which&&!e.isDefaultPrevented()){var t=$j(this).attr("href");if(t){var n=$j(this).attr("data-stab");if(e.preventDefault(),n&&i.options.courserow){var a=$j("#etest-sidebar-tab-btn-g-"+et(n));if(a.length>0)return void a.click()}i.options.hasActiveModuleSkin?window.location=t:i.smartLoadPage(t)}else{var o=$j(this).attr("data-action");o&&i["action_"+o]&&i["action_"+o]()}}})}},toggleBBPopup:function(e){this.bbPanel=$("#edubarBbPanel"),!0===e&&this.bbPanel.length>0||!1===e&&0==this.bbPanel.length||this.action_openBBPopup()},action_openBBPopup:function(){if(this.bbPanel=$("#edubarBbPanel"),this.bbPanel.length>0)return this.bbPanel.remove(),$("body").toggleClass("bbpanelOpened",!1),void sessionStorage.setItem("bbPanelOpened","0");this.closeChat();var e=this;$("body").toggleClass("bbpanelOpened",!0);this.bbPanel=$('<div id="edubarBbPanel" class="smartPreservedDiv"><div class=" bbListBox" ><div class="" style="padding: 25px;text-align:center;opacity:0.5;color: #000;position: absolute;top: 50%;left:0;right:0;transform: translateY(-50%);"><i class="fa fa-spinner fa-spin" style="font-size: 64px;color: #aaa"></i></div></div></div>').appendTo("body"),this.bblistBox=this.bbPanel.find(".bbListBox"),sessionStorage.setItem("bbPanelOpened","1");var t=$(".etest-meditor-topmain"),i=$(".etest-search-container").data("publicActions"),n={ed:t.length>0?t.attr("data-searcherpohlad"):"last",edubar:"1",temaid:this.editorState&&t.length>0?this.editorState.getCurrentPlanTopic():"",cardids:(i?i.getSelectedCardids():[]).join(";")};$j.post("/bb/?cmd=BBMain",n,function(t){e.bblistBox.html(t)})},checkTimeoutId:null,initCheckTimer:function(){var e=this;this.lastSessionPingTime=(new Date).getTime(),this.checkTimerId=setTimeout(function(){e.checkTimer()},1e3)},switchSchoolYear:function(e){var t=this;"more"==e?(this.schoolYearVal&&this.element.find("#edubarSchoolYear select").val(this.schoolYearVal),barNewDialog({source:"/znamky/?what=SwitchYear"})):(this.element.find("#edubarSchoolYear").css("opacity","0.5"),$j.post("/znamky/?what=setyear",{znamky_yearid:e},function(e){t.element.find("#edubarSchoolYear").css("opacity","1"),t.element.find("#edubarSchoolYear select").val(e),t.options.selectedYear=e,t.clearCoursesToolbar(),barSmartReloadPage(),EdubarUtils.isUcitel()&&t.initCoursesToolbar()}))},checkTimer:function(){var e=this;(new Date).getTime()-this.lastSessionPingTime>1e3*this.options.sessionPingInterval*1.3&&this.sessionPing(!0),this.checkTimerId=setTimeout(function(){e.checkTimer()},1e3)},initSmartLinks:function(e){var t=this;e.find(".edubarSmartLink").off("click.smartlink"),e.find(".edubarSmartLink").on("click.smartlink",function(e){if(1==e.which&&!e.isDefaultPrevented()){var i=$j(this).attr("href");if(i)return"/dashboard/eb.php?mode=reports"==i?(e.preventDefault(),void t.smartLoadScript(i)):void($j(this).hasClass("edubarLinkToSkin")||!$j(this).hasClass("edubarLinkToSkin")&&t.options.hasActiveModuleSkin||(e.preventDefault(),t.smartLoadPage(i)))}}),e.find("form.edubarSmartLoadFrm").off("submit.smartlink"),e.find("form.edubarSmartLoadFrm").on("submit.smartlink",function(e){e.preventDefault();var i=$j(this).attr("action");return i+=(-1==i.indexOf("?")?"?":"&")+$j(this).serialize(),t.smartLoadPage(barEncLink(i)),!1})},initGlobalEvents:function(){var e=this;$j(document).off("click.edubar"),$j(document).on("click.edubar",function(t){0==$j(t.target).closest("ul.edubarMenulist").length&&e.element.find("ul.edubarMenulist.level1").hide()}),$j(window).off("hashchange.edubar"),$j(window).on("hashchange.edubar",function(t){e.hashChange()}),$j(window).off("popstate.edubar"),$j(window).on("popstate.edubar",function(t){if(edubar.popStateHandlers&&edubar.popStateHandlers.length>0){var i=edubar.popStateHandlers[edubar.popStateHandlers.length-1];if(i.func&&i.elem&&$(i.elem).closest("body").length>0)return void(!1===i.func(t)&&(window.history.pushState(i.state,"",i.url),t.stopPropagation()))}if(e.smartLinksHashChanged)e.smartLinksHashChanged=!1;else if(t.originalEvent.state&&t.originalEvent.state.eduSmartHref){var n=t.originalEvent.state.eduSmartHref;e.smartLoadPage(n,!0),t.stopImmediatePropagation()}else setTimeout(function(){e.smartLinksHashChanged?e.smartLinksHashChanged=!1:t.cancelBarHandler?e.lastLoadedLocation=window.location.pathname+window.location.search:(e.smartLoadPage(window.location.pathname+window.location.search,!0),t.stopImmediatePropagation())},100)}),$j(window).off("storage.edubar"),$j(window).on("storage.edubar",function(t){e.handleStorageEvent(t)})},smartLoadPage:function(e,t,i,n,a){var o=new Date,r=this;if(!r.smartLeaveFunc||n){var s=jQuery.Event("beforeunload");if(s.originalEvent={returnValue:""},$j(window).trigger(s),!s.isDefaultPrevented()&&(""==s.originalEvent.returnValue||confirm(s.originalEvent.returnValue)))if(MobileAppBridge.isV2Active())$(window).trigger("smartLoadPage",[e]);else{MobileAppBridge.isActive()&&!r.noHideContent&&$j("#bar_mainDiv").hide(),r.noHideContent=!1,$j("#edubar").find("#quickIntroBtn").remove();var l=e.indexOf("#"),d="";if(-1!=l&&(d=e.substr(l+1),e=e.substr(0,l)),src=e+(-1==e.indexOf("?")?"?":"&")+"barNoSkin=1&ebuid="+this.options.loggedUser,$j("#edubarLogo").fadeOut("fast"),barHideSchoolYearSelector(),this.options.ecourseenabled){'<div class="edubar-loading-indicator" id="barSmartLinkLoadingDiv">','<div class="edubar-loading-line"></div>','<div class="edubar-loading-subline edubar-loading-inc"></div>','<div class="edubar-loading-subline edubar-loading-dec"></div>',"</div>",$j("body").append('<div class="edubar-loading-indicator" id="barSmartLinkLoadingDiv"><div class="edubar-loading-line"></div><div class="edubar-loading-subline edubar-loading-inc"></div><div class="edubar-loading-subline edubar-loading-dec"></div></div>')}else $j("body").append('<div id="barSmartLinkLoadingDiv"></div>');this.planSlowSync(),this.toggleCoursesListBox(!1),"/dashboard/eb.php"==src.substr(0,"/dashboard/eb.php".length)&&"undefined"!=typeof DailyPlan&&DailyPlan.clearCache(),$j.get(src,function(i){if(i&&"ebcmd_need_reload"==$j.trim(i))MobileAppBridge.isActive()?window.location="https://checklogin/":window.location=e;else{EdubarUtils.isUcitel()||r.clearCoursesToolbar(),barTrackTiming("EdubarPageLoad","data downloaded",(new Date).getTime()-o.getTime(),src);var n=i.indexOf("%%%head%%%"),s=-1==n?-1:i.indexOf("%%%head%%%",n+10),l="";if(-1!=n&&-1!=s){l=i.substr(n+10,-1==s?0:s-n-10);i=i.substr(0,n)+i.substr(s+10),$j("head").html(r.defaultHeadHtml+l)}if(!t&&window.history.pushState){var u=e;d&&(u=e+"#"+d),window.history.pushState({eduSmartHref:u},null,u)}r.selectModule([e]),$j(window).off(),$j("body").off("keypress"),$j("body").off("keydown");var c=$j("body").children(),p=$j("#bar_mainDiv").children();ASC&&ASC.unmountReactChildren&&ASC.unmountReactChildren($j("#bar_mainDiv").get(0));for(var h=0;h<c.length;h++)$j(c.get(h)).hasClass("topDiv")||$j(c.get(h)).hasClass("smartPreservedDiv")||barRemoveDomElem(c.get(h));$j("#bar_mainDiv").empty(),r.smartLeaveFunc=null,barToggleSideBar(!0),barToggleEdubarHeader(!0),barToggleEdubarBorder(!0),barToggleEdubarLogo(!0),$j("#bar_mainDiv").css("padding-"+ertl("right","left"),"0"),r.element.find(".edubarHeader").css(ertl("right","left"),"0px"),$j("#bar_mainDiv").html(i).show(),r.initGlobalEvents(),r.lastLoadedLocation=e;for(h=0;h<p.length;h++)barRemoveDomElem(p.get(h));$(window).scrollTop(0),$j(document).ready(function(){$j("#barSmartLinkLoadingDiv").remove(),$j("#barSmartLinkLoadingText").remove(),$j("#edubarLogo").fadeIn("fast"),$j(window).load(),barInitPage(),barTrackTiming("EdubarPageLoad","page finished",(new Date).getTime()-o.getTime(),src),$j("body").trigger("smartLoaded",[r]),a&&a()})}})}}else r.smartLeaveFunc(function(){r.smartLoadPage(e,t,i,!0)})},smartLoadScript:function(e,t){$j("#edubarLogo").fadeOut("fast"),$j("body").append('<div id="barSmartLinkLoadingDiv"></div>'),$j("body").append('<div id="barSmartLinkLoadingText">'+ls(3358)+"</div>"),e=e+(-1==e.indexOf("?")?"?":"&")+"barNoSkin=1&barContentOnly=1",t||(t="GET"),$j.ajax({type:t,url:e,data:{},success:function(e){$j("#barSmartLinkLoadingDiv").remove(),$j("#barSmartLinkLoadingText").remove(),$j("#edubarLogo").fadeIn("fast"),$j("body").append('<div class="barSmartLinkDataDiv" style="display:none">'+e+"</div>")}})},smartLinksHashChanged:!1,oldHash:"",hashChange:function(){var e=window.location.hash;("#"!=e&&""!=e||this.oldHash&&this.oldHash!=e)&&(this.smartLinksHashChanged=!0),this.oldHash=e},selectModule:function(e){var t={};for(var i in this.options.urlToModule){var n=this.options.urlToModule[i];if(n){for(var a in n){n[a.replace(/(&|\?)eqts=[^&#]+/,"")]=n[a]}for(var o=!1,r=0;r<e.length;r++){if(e[r]=e[r].replace(/(&|\?)eqts=[^&#]+/,""),n[e[r]]&&1==n[e[r]]){o=!0;break}var s=(c=EdubarUtils.getQueryParameters(e[r])).module,l=c.params;if("elearning"!=s||"elearningUvod"!=i||"Intro"!=l.cmd&&l.cmd||(o=!0),"elearning"==s&&"moje"==i&&"MojeTesty"==l.cmd&&(o=!0),"elearning"==s&&"mnouPridelene"==i&&"MnouPridelene"==l.cmd&&(o=!0),"elearning"==s&&"mnePridelene"==i&&"MnePridelene"==l.cmd&&(o=!0),"elearning"!=s||"skolske"!=i||"SkolskePredmety"!=l.cmd&&"SkolskeTesty"!=l.cmd||(o=!0),"elearning"!=s||"zosity"!=i||"ZosityPredmety"!=l.cmd&&"ZosityPredmet"!=l.cmd&&"ZosityZosit"!=l.cmd||(o=!0),"noticeboard"==i&&"timeline"==s&&"noticeboard"==l.cmd&&(o=!0),"orbit_"==i.substr(0,6)){var d=i.substr(6);if("orbit"==s&&l.cmd==d){o=!0;break}"orbit"==s&&"schooldetail"==l.cmd&&"Schools"==d&&(o=!0)}if("teachers"==i&&"text"==s)"teachers"==(l.text?l.text.split("/"):["",""])[0]&&(o=!0);if("anketa"==i&&"anketa"==s&&(o=!0),"timeline"==i&&"timeline"==s&&(o=!0),"konzulatcie"==i&&"calendar"==s&&"KonzultacneHodinyScheduler"==l.cmd&&(o=!0),"exam"==i&&"exam"==s&&(o=!0),"znamky"==s){var u=l.what?l.what:"";"kompetencie"==u.toLowerCase().substr(0,11)?o=o||"kompetencie"==i:"prihlaskass"==u.toLowerCase().substr(0,11)?o=o||"prihlaskass"==i:"dochadzka"==u||"prichody"==u||"dochadzkastart"==u?o=o||"attendance"==i:"znamky"==i&&(o=!0)}"plany"==s&&("vysledky"==l.cmd||"kurz"==l.pohlad?o=o||"pripravy"==i:"plany"==i&&(o=!0)),"timeline"==i&&"timeline"==s&&"noticeboard"==l.cmd&&(o=!1)}this.element.find('ul.edubarMenulist > li[data-module="'+et(i)+'"]').toggleClass("active",o),o&&(t[i]=!0)}}for(r=0;r<e.length;r++){var c;s=(c=EdubarUtils.getQueryParameters(e[r])).module,l=c.params;"znamky"!=s&&"plany"!=s||barShowSchoolYearSelector()}this.element.find("ul.edubarMenulist .edubarMenuitem.withSubmenu").each(function(){$j(this).find(".edubarMenuitem.active").length>0&&0==$j(this).siblings(".edubarMenuitem.active").length&&$j(this).toggleClass("active",!0)}),this.coursesToolbar&&this.coursesToolbar.find(".edubarCourseModuleLink").each(function(){$j(this).toggleClass("selected",!!t[$(this).attr("data-module")])})},selectModuleById:function(e){this.element.find("ul.edubarMenulist > li").each(function(){$j(this).toggleClass("active",$j(this).attr("data-module")==e)}),"znamky"!=e&&"plany"!=e||barShowSchoolYearSelector(),this.element.find("ul.edubarMenulist .edubarMenuitem.withSubmenu").each(function(){$j(this).find(".edubarMenuitem.active").length>0&&0==$j(this).siblings(".edubarMenuitem.active").length&&$j(this).toggleClass("active",!0)}),this.coursesToolbar&&this.coursesToolbar.find(".edubarCourseModuleLink").each(function(){$j(this).toggleClass("selected",$(this).attr("data-module")==e)})},sessionPing:function(e){var t=this,i=this.options.sessionPingUrl;this.lastSessionPingTime=(new Date).getTime();var n=[];$j(".asc-gadget-jsc").each(function(){var e=this.ASC_gjsc;e&&e.ASC_gpid&&n.push(e.ASC_gpid)}),$j.ajax({type:"post",url:i,data:{gpids:n.join(";")},success:function(e){t.options.createNotLogged||("notlogged"!=e?"OK"!=e&&(obj=$j.parseJSON(e),"notlogged"!=obj.status||t.sessionNotLogged()):t.sessionNotLogged())},global:!1}),t.options.sessionPingInterval>0&&!e&&setTimeout(function(){t.sessionPing()},1e3*t.options.sessionPingInterval)},sessionNotLoggedDlg:null,sessionNotLogged:function(){if(MobileAppBridge.isActive())window.location="https://checklogin/";else if(!this.sessionNotLoggedDlg){var e=this,t="";t+='<img src="/global/pics/door_lock_64.png" alt="" style="float:left;margin:10px;">',t+="<p>"+et(ls(4111))+"</p>",t+='<div style="text-align:center;margin-top:10px;clear:both;">',t+='<input type="button" class="button-blue closeBtn" value="'+et(ls(1573))+'" onclick="barCloseDialog(this)">',t+="</div>",this.sessionNotLoggedDlg=barNewDialog({title:ls(1017),content:t,width:350,close:function(){e.sessionNotLoggedDlg=null,document.barLogoutForm.submit()}}),this.sessionNotLoggedDlg.data("yuiDialog")&&(this.sessionNotLoggedDlg.closest(".yui-panel").find("a.container-close").remove(),this.sessionNotLoggedDlg.find(".closeBtn").on("click",function(){e.sessionNotLoggedDlg=null,document.barLogoutForm.submit()}))}},toggleChat:function(){0==$j("#bar_chatPanel").length?this.openChat():this.closeChat()},openChat:function(){var e=this;this.toggleBBPopup(!1);var t=$j("#bar_mainDiv").parent(),i=$j('<div id="bar_chatPanel" class="loading-background" style="display:none"></div>').appendTo(t).fadeIn("fast");$j.post("/chat/?cmd=ChatList",function(t){i.html(t),i.removeClass("loading-background"),e.initSmartLinks($j("#bar_chatPanel"))}),$("body").toggleClass("chatPanelOpened",!0),sessionStorage&&sessionStorage.setItem("chatOpened","1"),this.initFixedRightPos()},closeChat:function(){$j("#bar_chatPanel").remove(),$("body").toggleClass("chatPanelOpened",!1),this.initFixedRightPos(),sessionStorage&&sessionStorage.removeItem("chatOpened")},initFixedRightPos:function(){0==$j("#bar_chatPanel").length?$j(".chatMarginRight").toggleClass("chatMarginRight",!1):$("body").find("*").each(function(){var e=$(this);"fixed"!=e.css("position")||"bar_chatPanel"==e.attr("id")||e.hasClass("edubarHeader")||e.hasClass("fixed-right")||e.hasClass("fixedRight")||e.toggleClass("chatMarginRight",!0)})},registerChatWindow:function(e,t){this.openedChatWindows[e]=t,this.initSyncInterval(),this._trigger("chatopened",null,{chatid:e,wnd:t})},unregisterChatWindow:function(e){delete this.openedChatWindows[e],this._trigger("chatclosed",null,{chatid:e})},isOpenedChatWindow:function(e){return!!this.openedChatWindows[e]},openedChatWindowsCount:function(e){var t=0;for(var i in this.openedChatWindows)t++;return t},openChatWindow:function(e){if($j("#barChatWindow"+e).length>0)$j("#barChatWindow"+e).find(".textInput").focus();else{var t=$("#barChatWindowsParent");0==t.length&&(t=$('<div id="barChatWindowsParent"></div>').appendTo($j("#bar_mainDiv").parent()));var i=this,n='<div id="barChatWindow'+et(e)+'" class="chatWindow loading-background" style="display:none"></div>',a=$j(n).appendTo(t);a.css("bottom",10),a.css("left",$j(window).width()-240-410*(edubar.openedChatWindowsCount()+1)),a.fadeIn("fast"),$j.post("/chat/?cmd=ChatWindow&chatid="+e,function(e){a.html(e),a.removeClass("loading-background"),a.data("chat-list",i)})}},currentSync:0,currentTimeoutID:null,syncInterval:9e4,syncIntervalMultiplier:1,initSyncInterval:function(){var e=this;this.currentTimeoutID&&clearTimeout(this.currentTimeoutID);var t=3e4,i=!1;for(var n in this.openedChatWindows){var a=this.openedChatWindows[n];if(t=16e3,a.element.find(".textInput").is(":focus")||a.element.is(":focus")){t=8e3,i=!0;break}}i||(t*=e.syncIntervalMultiplier),t+=Math.round(Math.random()*(t/2)-t/4),this.getGlobalOpenedChats(!0),this.syncInterval=t,e.currentSync++;var o=e.currentSync;this.currentTimeoutID=setTimeout(function(){e.dataSyncTimer(o)},t)},dataSyncTimer:function(e){this.currentSync==e&&(this.currentTimeoutID=null,this.dataSync())},slowSyncPlanned:!1,lastSlowSync:new Date,planSlowSync:function(){this.slowSyncPlanned=!0},dataSync:function(e,t,i){var n=this,a=[];for(var o in this.openedChats)a.push(this.openedChats[o]);var r={akcia:"sync",openedChats:a.join(";"),uid:EdubarUtils.getLoggedUser(),uidsgn:this.options.uidsgn};e&&(r.actions=JSON.stringify(e));var s=new Date,l=localStorage.getItem("edubarSyncing");if(l&&l>=s.getTime()-1.2*this.syncInterval&&!i)n.initSyncInterval();else{this.lastSyncTime=s.getTime();var d=this.getLastGlobalSync();if(d)return n.dataSyncReceived(d),void n.initSyncInterval();localStorage.setItem("edubarSyncing",s.getTime());var u="quick";e||i?u="slow":this.slowSyncPlanned&&this.lastSlowSync&&s.getTime()-this.lastSlowSync.getTime()>=6e5&&(u="slow",this.lastSlowSync=s,this.slowSyncPlanned=!1),$j.ajax({type:"post",dataType:"json",url:"/chat/"+u+"?cmd=ChatList&t="+et(n.options.lastSync)+"&e="+et(n.options.edupage),data:r,success:function(i){i.hit?n.dataSync(e,t,!0):(t&&t(),i.lastSync&&(n.options.lastSync=i.lastSync),i.nt&&(n.options.lastSync=i.nt),n.setLastGlobalSync(i),n.dataSyncReceived(i),localStorage.removeItem("edubarSyncing"),i.syncIntervalMultiplier&&(n.syncIntervalMultiplier=Math.min(5,Math.max(.5,parseFloat(i.syncIntervalMultiplier)))),n.initSyncInterval())},global:!1,error:function(){localStorage.removeItem("edubarSyncing"),n.initSyncInterval()}})}},edubarSyncData:null,edubarLastSync:null,handleStorageEvent:function(e){var t=e.originalEvent,i=t.newValue;if(i)if("edubarSyncData"==t.key)this.edubarSyncData=i;else if("edubarLastSync"==t.key)this.edubarLastSync=i;else if("edubarGetOpenedChats"==t.key){var n={};for(var a in this.openedChatWindows){var o=this.openedChatWindows[a];o&&(n[a]=a+"|"+o.options.lastSprava)}localStorage.setItem("edubarOpenedChats",JSON.stringify(n)),localStorage.removeItem("edubarOpenedChats")}else if("edubarOpenedChats"==t.key){n=JSON.parse(i);for(var a in n)this.openedChats[a]=n[a]}},openedChats:{},getGlobalOpenedChats:function(e){for(var t in e&&(this.openedChats={}),localStorage.setItem("edubarGetOpenedChats","1"),localStorage.removeItem("edubarGetOpenedChats"),this.openedChatWindows){var i=this.openedChatWindows[t];i&&(this.openedChats[t]=t+"|"+i.options.lastSprava)}return this.openedChats},setLastGlobalSync:function(e){var t=new Date;localStorage.setItem("edubarLastSync",t.getTime()),localStorage.setItem("edubarSyncData",JSON.stringify(e)),localStorage.removeItem("edubarSyncData"),localStorage.removeItem("edubarLastSync")},getLastGlobalSync:function(e){var t=new Date,i=this.edubarLastSync?this.edubarLastSync:localStorage.getItem("edubarLastSync");if((new Date).setTime(i),i&&i>t.getTime()-this.syncInterval){var n=this.edubarSyncData?this.edubarSyncData:localStorage.getItem("edubarSyncData");return JSON.parse(n)}return null},dataSyncReceived:function(e){(e.timelineCount||0===e.timelineCount)&&this.element.find(".edubarTimelineBtn .notif").html(e.timelineCount>0?e.timelineCount:"").toggle(e.timelineCount>0),(e.chatCount||0===e.chatCount)&&this.element.find(".edubarChatBtn .notif").html(e.chatCount>0?e.chatCount:"").toggle(e.chatCount>0),this._trigger("datasync",null,e)},timelineDataReceived:function(e){this._trigger("timelinesync",null,e)}}),String.prototype.endsWith=function(e){return this.length>=e.length&&this.substr(this.length-e.length)==e},String.prototype.startsWith=function(e){return this.length>=e.length&&this.substr(0,e.length)==e},String.prototype.ucfirst=function(){return this.substr(0,1).toUpperCase()+this.substr(1)},String.prototype.naDvaRiadky=function(e){e||(e="<br>");for(var t=this.split(" "),i=[],n=0;n<t.length;n++)if(""!=t[n])if("/"!=t[n])for(var a=t[n].split("/"),o=0;o<a.length;o++)""!=a[o]&&(o<a.length-1&&a.length>1&&(a[o]+=" /"),i.push(a[o]));else i.push(t[n]);if(1==i.length)return this;var r=this.length,s=r,l="",d="",u="";for(n=1;n<i.length;n++){l="",d="";for(o=0;o<i.length;o++)o<n?(""!=l&&(l+=" "),l+=i[o]):(""!=d&&(d+=" "),d+=i[o]);var c=Math.max(l.length,d.length);c<s&&(s=c,u=l+e+d)}return u};var renderSnOptions={skipNotAvailable:!0};function renderSn(e,t){return renderS(e,t,renderSnOptions)}function renderS(e,t,i){window.renderSTime||(window.renderSTime=0);var n=(new Date).getTime();return e=(e=e.replace(/(src=")(\/[a-zA-Z0-9_]+\/pics\/[^"]+)(")/gi,function(e,t,i,n){return i.indexOf("global/pics/elearn/pics/")>=0?t+i+n:t+staticUrl(i)+n})).replace(new RegExp("{!?#?[a-z0-9A-Z_.]+}","g"),function(e){var n=e,a=e.substr(1,n.length-2),o=!1;"!"==a.substr(0,1)&&(a=a.substr(1),o=!0);var r=null;if("#"==a.substr(0,1))r=ls(a.substr(1));else if(t){for(var s=a.split("."),l=t,d=0;d<s.length-1;d++){if(!l[s[d]]){l=null;break}l=l[s[d]]}if(d=s.length-1,l){var u=s[d];r=l[u]||0===l[u]||""===l[u]?l[s[d]]:i&&i.skipNotAvailable?null:""}}return null===r?n:(r=r.toString(),o||(r=i&&i.nl2br?etnl2br(r):et(r)),r)}),window.renderSTime+=(new Date).getTime()-n,e}function esortth(e,t,i,n){var a="";return a+='<a class="sortLnk" data-sortby="'+et(t)+'" data-action="sortTh">',a+=n?e:et(e),i.sortBy==t&&(a+=' <span class="sortDir">'+("desc"==i.sortDir?"":"")+"</span>"),a+="</a>"}function esandbox(e,t){var i=e[0].contentDocument;i.write(t);for(var n=i.getElementsByTagName("head")[0],a=document.getElementsByTagName("style"),o=0;o<a.length;o++)n.appendChild(a[o].cloneNode(!0));for(a=document.getElementsByTagName("link"),o=0;o<a.length;o++)n.appendChild(a[o].cloneNode(!0));$j(n).append('<style type="text/css">html, body {min-height: auto;}</style>'),$j(e).height($j(i).outerHeight()),setTimeout(function(){$j(e).height($j(i).outerHeight())},100)}var Latinise={latin_map:{"":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A"," ":"A"," ":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"AA","":"AE","":"AE","":"AE","":"AO","":"AU","":"AV","":"AV","":"AY","":"B","":"B","":"B","":"B","":"B","":"B","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"DZ","":"DZ","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"ET","":"F","":"F","":"G","":"G","":"G","":"G","":"G"," ":"G","":"G"," ":"G","":"G","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"D","":"F","":"G","":"R","":"S","":"T","":"IS","":"J","":"J","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"L","":"L","":"L","":"L","":"L","":"L","":"L"," ":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"LJ","":"M","":"M","":"M","":"M","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N"," ":"N","":"N","":"N","":"NJ","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O"," ":"O","":"O","":"O","":"O","":"O"," ":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"OI","":"OO","":"E","":"O","":"OU","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"Q","":"Q","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"C","":"E","":"S","":"S"," ":"S","":"S","":"S","":"S","":"S"," ":"S","":"S","":"S","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"A","":"L","":"M","":"V","":"TZ","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"V","":"V","":"V","":"V"," ":"VY","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"X","":"X","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"IJ","":"OE","":"A","":"AE","":"B","":"B","":"C","":"D","":"E","":"F","":"G","":"G","":"H","":"I","":"R","":"J","":"K","":"L","":"L","":"M","":"N","":"O","":"OE","":"O","":"OU","":"P","":"R","":"N","":"R","":"S","":"T","":"E","":"R","":"U"," ":"V","":"W","":"Y","":"Z","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a"," ":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"aa","":"ae","":"ae","":"ae","":"ao","":"au","":"av","":"av","":"ay","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"o","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"i","":"j","":"j","":"j","":"dz","":"dz","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"et","":"f","":"f","":"f","":"f","":"g","":"g","":"g","":"g","":"g","":"g"," ":"g","":"g","":"g","":"g","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"hv","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"d","":"f","":"g","":"r","":"s","":"t","":"is","":"j","":"j","":"j","":"j","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"lj","":"s","":"s","":"s","":"s","":"m","":"m","":"m","":"m","":"m","":"m","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"nj","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"oi","":"oo","":"e","":"e","":"o","":"o","":"ou","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"q"," ":"q","":"q","":"q","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"c","":"c","":"e","":"r","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"g","":"o","":"o","":"u","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"th","":"a","":"ae","":"e","":"g","":"h","":"h","":"h","":"i","":"k","":"l","":"m","":"m","":"oe","":"r","":"r","":"r","":"r","":"t","":"v","":"w","":"y","":"tz","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"ue","":"um","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"vy","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"x","":"x","":"x","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"ff","":"ffi","":"ffl","":"fi","":"fl","":"ij","":"oe","":"st","":"a","":"e","":"i","":"j","":"o","":"r","":"u","":"v","":"x"}};String.prototype.latinise=function(){return this.replace(/[^A-Za-z0-9\[\] ]/g,function(e){return Latinise.latin_map[e]||e})},String.prototype.latinize=String.prototype.latinise,String.prototype.isLatin=function(){return this==this.latinise()},Date.prototype.ascAddTime=function(e){return this.setTime(this.getTime()+e),this},Date.prototype.format=function(e){if(this.ascIsEmpty)return"";for(var t="",i=Date.replaceChars,n=0;n<e.length;n++){var a=e.charAt(n);n-1>=0&&"\\"==e.charAt(n-1)?t+=a:i[a]?t+=i[a].call(this):"\\"!=a&&(t+=a)}return t},Date.prototype.getWeekStart=function(){var e=new Date(this.getTime()),t=EdubarUtils.getFirstDayOfWeek();return e.setDate(e.getDate()-(e.getDay()+(7-t))%7),e},Date.prototype.getWeekEnd=function(){var e=new Date(this.getTime()),t=EdubarUtils.getFirstDayOfWeek();return e.setDate(e.getDate()+(7-t-e.getDay())),e},Date.prototype.asc_shortFormat=function(){var e=new Date,t=this;return t.format("Y-m-d")==e.format("Y-m-d")?t.format("H:i"):t.format("Y")==e.format("Y")?t.format("M j"):t.format("d.m.y")},Date.prototype.slovom=function(e,t,i){var n="",a=new Date;return e&&(n+="d.m.",a.getFullYear()!=this.getFullYear()&&(n+="Y")),t&&(n+=" H:i"),a.setUTCDate(a.getUTCDate()-1),this.format("Y-m-d")==a.format("Y-m-d")?ls(1734)+(""!=n?" "+this.format(n):""):(a.setUTCDate(a.getUTCDate()+1),this.format("Y-m-d")==a.format("Y-m-d")?ls(1733)+(""!=n?" "+this.format(n):""):(a.setUTCDate(a.getUTCDate()+1),this.format("Y-m-d")==a.format("Y-m-d")?ls(3280)+(""!=n?" "+this.format(n):""):i?this.format("D d.m."):(e||(n="d.m.Y"+n),this.dniVTyzdni||(this.dniVTyzdni=[ls(1703),ls(1704),ls(1705),ls(1706),ls(1707),ls(1708),ls(1709)]),this.dniVTyzdni[(this.getDay()+6)%7]+" "+this.format(n))))},Date.ascParse=function(e){var t=new Date,i=/^[0-9]+\.[0-9]+\.?([0-9]+)?$/gi;if(i.test(e))return(n=e.split(".")).length<3&&n.push(t.getFullYear().toString()),n.length<3?new Date:(2!=n[2].length&&4!=n[2].length&&(n[2]=t.getFullYear().toString()),2==n[2].length&&(n[2]=1*n[2]>50?"19"+n[2]:"20"+n[2]),new Date(1*n[2],1*n[1]-1,1*n[0],0,0,0));if((i=/^[0-9]+\/[0-9]+(\/[0-9]+)?$/gi).test(e))return(n=e.split("/")).length<3&&n.push(t.getFullYear()),2==n[2].length&&(n[2]=1*n[2]>50?"19"+n[2]:"20"+n[2]),new Date(1*n[2],1*n[0]-1,1*n[1],0,0,0);if((i=/^[0-9]+-[0-9]+-[0-9]+$/gi).test(e)){var n=e.split("-");return new Date(1*n[0],1*n[1]-1,1*n[2],0,0,0)}if((i=/^[0-9]+-[0-9]+-[0-9]+ [0-9]+:[0-9]+(:[0-9]+)?$/gi).test(e)){n=(o=e.split(" "))[0].split("-");var a=o[1].split(":");return new Date(1*n[0],1*n[1]-1,1*n[2],1*a[0],1*a[1],a[2]?1*a[2]:0)}if((i=/^[0-9]+\.[0-9]+\.?([0-9]+)? [0-9]+:[0-9]+(:[0-9]+)?$/gi).test(e)){var o;(n=(o=e.split(" "))[0].split(".")).length<3&&n.push(t.getFullYear().toString()),2!=n[2].length&&4!=n[2].length&&(n[2]=t.getFullYear().toString()),2==n[2].length&&(n[2]=1*n[2]>50?"19"+n[2]:"20"+n[2]);a=o[1].split(":");return new Date(1*n[2],1*n[1]-1,1*n[0],1*a[0],1*a[1],a[2]?1*a[2]:0)}return e.toLowerCase()==ls(1733).toLowerCase()?t:e.toLowerCase()==ls(1439).toLowerCase()?new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()+1,0,0,0):e.toLowerCase()==ls(1734).toLowerCase()?new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()-1,0,0,0):(t.ascIsEmpty=!0,t)},Date.parse=Date.ascParse,Date.parseTime=function(e){var t=new Date,i=e.split(":");return i.length<3&&i.push("00"),t.setHours(1*i[0]),t.setMinutes(1*i[1]),t.setSeconds(1*i[2]),t},Date.fromDbString=function(e,t){null==e&&(e="");var i=e.split(" ");if(0==i.length)return!1;1==i.length&&i.push("00:00:00");var n=i[0].split("-");n.length<3&&(n=["1999","01","01"]);var a=i[1].split(":");a.length<3&&a.push("00"),a.length<3&&a.push("00"),a.length<3&&a.push("00");for(var o=new Date,r=0;r<3;r++)"0"==n[r].charAt(0)&&(n[r]=n[r].substr(1)),"0"==a[r].charAt(0)&&(a[r]=a[r].substr(1));return o.setFullYear(parseInt(n[0]),parseInt(n[1])-1,parseInt(n[2])),o.setHours(parseInt(a[0]),parseInt(a[1]),parseInt(a[2])),t&&edubar&&edubar.options.timezonediff&&o.setTime(o.getTime()+1e3*edubar.options.timezonediff),o},Date.initReplaceChars=function(){Date.replaceChars={shortMonths:[ls(1711).substr(0,3),ls(1712).substr(0,3),ls(1713).substr(0,3),ls(1714).substr(0,3),ls(1715).substr(0,3),ls(1716).substr(0,3),ls(1717).substr(0,3),ls(1718).substr(0,3),ls(1719).substr(0,3),ls(1720).substr(0,3),ls(1721).substr(0,3),ls(1722).substr(0,3)],longMonths:[ls(1711),ls(1712),ls(1713),ls(1714),ls(1715),ls(1716),ls(1717),ls(1718),ls(1719),ls(1720),ls(1721),ls(1722)],shortDays:[ls(1709).substr(0,3),ls(1703).substr(0,3),ls(1704).substr(0,3),ls(1705).substr(0,3),ls(1706).substr(0,3),ls(1707).substr(0,3),ls(1708).substr(0,3)],longDays:[ls(1709),ls(1703),ls(1704),ls(1705),ls(1706),ls(1707),ls(1708)],d:function(){return(this.getDate()<10?"0":"")+this.getDate()},D:function(){return Date.replaceChars.shortDays[this.getDay()]},j:function(){return this.getDate()},l:function(){return Date.replaceChars.longDays[this.getDay()]},N:function(){return(this.getDay()+6)%7+1},S:function(){return this.getDate()%10==1&&11!=this.getDate()?"st":this.getDate()%10==2&&12!=this.getDate()?"nd":this.getDate()%10==3&&13!=this.getDate()?"rd":"th"},w:function(){return this.getDay()},z:function(){var e=new Date(this.getFullYear(),0,1);return Math.ceil((this-e)/864e5)},W:function(){var e=new Date(this.valueOf()),t=(this.getDay()+6)%7;e.setDate(e.getDate()-t+3);var i=e.valueOf();return e.setMonth(0,1),4!==e.getDay()&&e.setMonth(0,1+(4-e.getDay()+7)%7),1+Math.ceil((i-e)/6048e5)},F:function(){return Date.replaceChars.longMonths[this.getMonth()]},m:function(){return(this.getMonth()<9?"0":"")+(this.getMonth()+1)},M:function(){return Date.replaceChars.shortMonths[this.getMonth()]},n:function(){return this.getMonth()+1},t:function(){return new Date(this.getFullYear(),this.getMonth()+1,0).getDate()},L:function(){var e=this.getFullYear();return e%400==0||e%100!=0&&e%4==0},o:function(){var e=new Date(this.valueOf());return e.setDate(e.getDate()-(this.getDay()+6)%7+3),e.getFullYear()},Y:function(){return this.getFullYear()},y:function(){return(""+this.getFullYear()).substr(2)},a:function(){return this.getHours()<12?"am":"pm"},A:function(){return this.getHours()<12?"AM":"PM"},B:function(){return Math.floor(1e3*((this.getUTCHours()+1)%24+this.getUTCMinutes()/60+this.getUTCSeconds()/3600)/24)},g:function(){return this.getHours()%12||12},G:function(){return this.getHours()},h:function(){return((this.getHours()%12||12)<10?"0":"")+(this.getHours()%12||12)},H:function(){return(this.getHours()<10?"0":"")+this.getHours()},i:function(){return(this.getMinutes()<10?"0":"")+this.getMinutes()},s:function(){return(this.getSeconds()<10?"0":"")+this.getSeconds()},u:function(){var e=this.getMilliseconds();return(e<10?"00":e<100?"0":"")+e},e:function(){return"Not Yet Supported"},I:function(){return"Not Yet Supported"},O:function(){return(-this.getTimezoneOffset()<0?"-":"+")+(Math.abs(this.getTimezoneOffset()/60)<10?"0":"")+Math.abs(this.getTimezoneOffset()/60)+"00"},P:function(){return(-this.getTimezoneOffset()<0?"-":"+")+(Math.abs(this.getTimezoneOffset()/60)<10?"0":"")+Math.abs(this.getTimezoneOffset()/60)+":00"},T:function(){var e=this.getMonth();this.setMonth(0);var t=this.toTimeString().replace(/^.+ \(?([^\)]+)\)?$/,"$1");return this.setMonth(e),t},Z:function(){return 60*-this.getTimezoneOffset()},c:function(){return this.format("Y-m-d\\TH:i:sP")},r:function(){return this.toString()},U:function(){return this.getTime()/1e3}}},Date.initReplaceChars();var AscDate={};AscDate.fromDbString=Date.fromDbString;var EdubarUtils={getFirstDayOfWeek:function(){return edubar&&edubar.options&&edubar.options.firstDayOfWeek?edubar.options.firstDayOfWeek:1},isBBEnabled:function(){return edubar&&edubar.options.bbenabled},replaceUrls:function(e){return e=(e=e.replace(/\b(?:https?|ftp):\/\/[a-z0-9-+&@#\/%?=~_|!:,.;]*[a-z0-9-+&@#\/%=~_|](?![^\s]*")/gim,function(e){return renderS('<a href="{url}" target="_blank" class="messageDangerousUrl">{match}</a>',{match:undoet(e),url:MobileAppBridge.isActive()&&!MobileAppBridge.isV2Active()?"/elearning/elearn/redirect?g="+encodeURIComponent(undoet(e)):undoet(e)})})).replace(/(^|[^\/])(www\.[^\r\n\t\f\v <>;,]+)(\b|$|<|>|;|,)/gim,function(e,t,i,n){var a="";return i&&i.endsWith("&quot")&&(a="&quot",i=i.substr(0,i.length-5)),i&&i.endsWith(".")&&(a="."+a,i=i.substr(0,i.length-1)),t+renderS('<a href="http://{url}" target="_blank" class="messageDangerousUrl">{p2}</a>'+a+n,{url:MobileAppBridge.isActive()&&!MobileAppBridge.isV2Active()?"/elearning/elearn/redirect?g="+encodeURIComponent("http://"+i):""+i,p2:i})})},doGetCaretPosition:function(e){var t=0;if(e.selectionStart||"0"==e.selectionStart)t=e.selectionStart;else if(window.getSelection){if(sel=window.getSelection(),sel.rangeCount)if(range=sel.getRangeAt(0),range.commonAncestorContainer.parentNode==e)t=range.endOffset;else if(range.commonAncestorContainer.parentNode&&range.commonAncestorContainer.parentNode.parentNode==e){var i=$j(range.commonAncestorContainer.parentNode.parentNode).text(),n=$j(range.commonAncestorContainer.parentNode).text();t=range.endOffset+i.indexOf(n)}else t=range.endOffset}else if(document.selection){e.focus();var a=document.selection.createRange();a.moveStart("character",-e.value.length),t=a.text.length}return t},doSetCaretPosition:function(e,t){if(document.selection){e.focus();var i=document.selection.createRange();try{i.moveStart("character",-e.value.length),i.moveStart("character",t),i.moveEnd("character",0),i.select()}catch(e){}}else if(e.selectionStart||"0"==e.selectionStart)e.selectionStart=t,e.selectionEnd=t,e.focus();else if(e.setSelectionRange)e.setSelectionRange(t,t);else if(e.createTextRange){var n=e.createTextRange();n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",t),n.select()}else if(window.getSelection){var a=window.getSelection();try{a.collapse(e,t)}catch(e){}}},getSelectionTextInfo:function(e){var t,i,n=!1,a=!1;if(window.getSelection){var o=window.getSelection();o.rangeCount&&((i=(t=o.getRangeAt(0)).cloneRange()).selectNodeContents(e),i.setEnd(t.startContainer,t.startOffset),n=""==i.toString(),i.selectNodeContents(e),i.setStart(t.endContainer,t.endOffset),a=""==i.toString())}else document.selection&&"Control"!=document.selection.type&&((i=(t=document.selection.createRange()).duplicate()).moveToElementText(e),i.setEndPoint("EndToStart",t),n=""==i.text,i.moveToElementText(e),i.setEndPoint("StartToEnd",t),a=""==i.text);return{atStart:n,atEnd:a}},mozePreskocit:function(e,t){var i="number"==typeof e.selectionStart&&"number"==typeof e.selectionEnd?e.selectionStart:this.doGetCaretPosition(e),n="number"==typeof e.selectionStart&&"number"==typeof e.selectionEnd?e.selectionEnd:i,a=this.getSelectionTextInfo(e),o=e.value||""===e.value?e.value:$j(e).text();(e.value||""===e.value)&&(a.atStart=0==i,a.atEnd=n>=o.length);var r=!1;return"hore"==t&&a.atStart&&(r=!0),"dole"==t&&a.atEnd&&(r=!0),"dole"==t&&n>=o.length&&(r=!0),"dolava"==t&&0==i&&(0==n||n>=o.length)&&(r=!0),"doprava"==t&&(0==i||i>=o.length)&&n>=o.length&&(r=!0),!$j(e).hasClass("ui-autocomplete-input")||"hore"!=t&&"dole"!=t||(event&&13==event.which?r=!0:$j(e).data("ignorable_open")&&(!$j(e).data("is_open")||$j(e).data("itemCount")<=1)?r=!0:"dole"==t&&$j(e).data("incoming_open")?r=!1:$j(e).data("is_open")&&(r=!1)),$j(e).hasClass("ui-autocomplete-input")&&r&&$j(e).autocomplete("close"),r},kurzorNaKoniec:function(e){e.focus();var t=e.value?e.value:$j(e).html();if($j(e).attr("contenteditable")){var i=$j(e).get(0);document.createRange?(range=document.createRange(),range.selectNodeContents(i),range.collapse(!1),selection=window.getSelection(),selection.removeAllRanges(),selection.addRange(range)):document.selection&&(range=document.body.createTextRange(),range.moveToElementText(i),range.collapse(!1),range.select())}else this.doSetCaretPosition(e,t.length)},kurzorNaZaciatok:function(e){e.focus(),this.doSetCaretPosition(e,0)},indexOf:function(e,t){if(!e)return-1;try{var i=e.length>>>0,n=Number(arguments[2])||0;for((n=n<0?Math.ceil(n):Math.floor(n))<0&&(n+=i);n<i;n++)if(n in e&&e[n]==t)return n}catch(e){return-1}return-1},jeZUS:function(){return edubar&&edubar.options&&edubar.options.school_type?"5"==edubar.options.school_type:null},jeSUS:function(){return edubar&&edubar.options&&edubar.options.school_type?"7"==edubar.options.school_type:null},jeSportovyKlub:function(){return edubar&&edubar.options&&edubar.options.school_type?"14"==edubar.options.school_type:null},getLoggedUser:function(){return edubar&&edubar.options&&edubar.options.loggedUser?edubar.options.loggedUser:null},isLoggedToPortal:function(){return edubar&&edubar.options&&edubar.options.loggedPortalid?edubar.options.loggedPortalid:null},getLoggedUserName:function(){return edubar&&edubar.options&&edubar.options.loggedUserName?edubar.options.loggedUserName:null},jeEdupagePro:function(){return edubar&&edubar.options&&edubar.options.jePro?edubar.options.jePro:null},getEdupage:function(){return edubar&&edubar.options&&edubar.options.edupage?edubar.options.edupage:null},getSchoolCountry:function(){return edubar&&edubar.options&&edubar.options.school_country?edubar.options.school_country:null},isRestrictedEdupage:function(){return!!(edubar&&edubar.options&&edubar.options.isRestrictedEdupage)&&edubar.options.isRestrictedEdupage},getSelectedSchoolYear:function(){return edubar&&edubar.options&&edubar.options.selectedYear?edubar.options.selectedYear:null},getUserType:function(e){return e||(e=""),"Ucitel"==e.substr(0,6)?"Ucitel":"Studen"==e.substr(0,6)?"Student":"Rodic"==e.substr(0,5)?"Rodic":"Admin"==e.substr(0,5)?"Admin":"Guest"==e.substr(0,5)?"Guest":""},getLoggedUserType:function(){return edubar?(edubar.options._getLoggedUserType||(edubar.options._getLoggedUserType=this.getUserType(edubar.options.loggedUser)),edubar.options._getLoggedUserType):""},isStudent:function(){return edubar&&edubar.options?(void 0===edubar.options._isStudent&&(edubar.options._isStudent=EdubarUtils.isStudent0()),edubar.options._isStudent):null},isStudent0:function(){return"Student"==this.getLoggedUserType()?this.getLoggedUser().substr(7):null},isGuest:function(){return edubar&&edubar.options?(void 0===edubar.options._isGuest&&(edubar.options._isGuest=EdubarUtils.isGuest0()),edubar.options._isGuest):null},isGuest0:function(){return"Guest"==this.getLoggedUserType()?this.getLoggedUser().substr(5):null},isStudentOrParent:function(){return EdubarUtils.isParent()&&edubar&&edubar.options.loggedChild?edubar.options.loggedChild:EdubarUtils.isStudent()},isParentChild:function(){return EdubarUtils.isParent()&&edubar&&edubar.options.loggedChild?edubar.options.loggedChild:null},isRodic:function(){return edubar&&edubar.options?(void 0===edubar.options._isRodic&&(edubar.options._isRodic=EdubarUtils.isRodic0()),edubar.options._isRodic):null},isRodic0:function(){return"Rodic"==this.getLoggedUserType()?this.getLoggedUser().substr(5):null},isParent:function(){return EdubarUtils.isRodic()},isAdultStudent:function(){return!!EdubarUtils.isStudent()&&!!(edubar&&edubar.options&&edubar.options.isAdult)},isParentOrAdultStudent:function(){return EdubarUtils.isParent()?EdubarUtils.isStudentOrParent():EdubarUtils.isAdultStudent()?EdubarUtils.isStudent():null},isUcitel:function(){return edubar&&edubar.options?(void 0===edubar.options._isUcitel&&(edubar.options._isUcitel=EdubarUtils.isUcitel0()),edubar.options._isUcitel):null},isUcitel0:function(){return"Ucitel"==this.getLoggedUserType()?this.getLoggedUser().substr(6):null},isUcitelOrAdmin:function(){return"Admin"==this.getLoggedUserType()||("Ucitel"==this.getLoggedUserType()||null)},isAdmin:function(){return"Admin"==this.getLoggedUserType()},isWebpageAdmin:function(){return!!EdubarUtils.isAdmin()||!(!edubar||!edubar.options.webpageadmin)},hasUserRight:function(e){return!!EdubarUtils.isAdmin()||!!(edubar&&edubar.options.userrights&&edubar.options.userrights[e])},getVyucovacieDni:function(){return edubar&&edubar.options.vyucovacieDni?edubar.options.vyucovacieDni:[!1,!0,!0,!0,!0,!0,!1]},formatTimeDiff:function(e,t){var i=Math.floor(e/1e3),n=Math.floor(i/86400);i-=86400*n;var a=Math.floor(i/3600);i-=3600*a;var o=Math.floor(i/60);i-=60*o;var r=Math.floor(i),s="";return n>0?t&&t.short?s:(a>16&&n++,n.toString()+" "+ls(1465).substr(0,1)):a>=2?(o>=45&&a++,ASC.lsf(3147,{n:a})):a>0&&t&&t.short?(s+=(a<10?"0":"")+a.toString()+":",a+" "+ls(9465).substr(0,1)+" "+o+" "+ls(3888).substr(0,1)):(a>0&&(s+=(a<10?"0":"")+a.toString()+":"),s+=(o<10?"0":"")+o.toString(),0!=a&&t&&t.short||(s+=":"+(r<10?"0":"")+r.toString()),s)},showAlert:function(e){var t="";t+='<div class="edubarAlertBox">',t+=e,$j(t+="</div>").appendTo("body").fadeIn(300).delay(1e4).fadeOut(300,function(){$j(this).remove()})},getLang:function(){return edubar&&edubar.options&&edubar.options.lang?edubar.options.lang:"en"},hexToRGB:function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},sortObject:function(e,t){var i=[];if(t&&"byKey"==t){for(var n in e)i.push({key:n,val:e[n]});i.sort(function(e,t){var i=e.key.toString(),n=t.key.toString();return i.localeCompare(n)})}else{if($.isArray(e))i=e;else for(var n in e)i.push(e[n]);"function"==typeof t?i.sort(t):i.sort(function(e,i){if(!t)return(e||"").localeCompare(i||"");for(var n=0;n<t.length;n++){var a=t[n],o=!1;"-"==a.substr(0,1)&&(a=a.substr(1),o=!0);var r=e&&e[a]?e[a]:"",s=i&&i[a]?i[a]:"",l=0;if(!isNaN(parseFloat(r))&&isFinite(r)&&!isNaN(parseFloat(s))&&isFinite(s)?parseFloat(r)>parseFloat(s)?l=1:parseFloat(r)<parseFloat(s)&&(l=-1):(r=r.toString(),s=s.toString(),l=r.localeCompare(s)),o&&(l*=-1),0!=l)return l}return 0})}return i},getObjectKeys:function(e){if(!e)return[];var t=[];for(var i in e)t.push(i);return t},isEmptyObject:function(e){var t=0;for(var i in e){t++;break}return 0==t},countObject:function(e){var t=0;for(var i in e)t++;return t},arrayToObject:function(e){for(var t={},i=0;i<e.length;i++)t[i]=e[i];return t},_isEqualLastPath:"",isEqual:function(e,t,i,n){if(EdubarUtils._isEqualLastPath=n,e===t)return!0;if(!(e instanceof Object&&t instanceof Object))return!1;if(i&&i.objectArrays&&$j.isArray(e)!=$j.isArray(t)&&(e=$j.isArray(e)?EdubarUtils.arrayToObject(e):e,t=$j.isArray(t)?EdubarUtils.arrayToObject(t):t),e.constructor!==t.constructor)return!1;if($j.isArray(e)!=$j.isArray(t))return!1;if($j.isArray(e)){if(e.length!=t.length)return!1;for(var a=0;a<e.length;a++)if(!EdubarUtils.isEqual(e[a],t[a],i,(n||"")+"/"+a.toString()))return!1;return!0}for(var o in e)if(e.hasOwnProperty(o)&&(!i||!i[o])){if(!t.hasOwnProperty(o))return!1;if(e[o]!==t[o]){if("object"!=typeof e[o])return!1;if(!EdubarUtils.isEqual(e[o],t[o],i,(n||"")+"/"+o.toString()))return!1}}for(o in t)if((!i||!i[o])&&t.hasOwnProperty(o)&&!e.hasOwnProperty(o))return!1;return!0},getVideoLink:function(e){var t=edubar&&edubar.options.lang?edubar.options.lang:"en";return"sk"==t||"cz"==t?"11_preparations"==e?"http://www.triednakniha.sk/#!/videos/241":"12_preparations_withstudent"==e?"http://www.triednakniha.sk/#!/videos/242":"03_teachingplans"==e?"http://www.triednakniha.sk/#!/videos/5":"13_elearning_test"==e?"http://www.triednakniha.sk/#!/videos/202":"http://triednakniha.sk/video":"de"==t?"11_preparations"==e?"http://klassenbuch.edupage.org/#!/videos/222":"12_preparations_withstudent"==e?"http://klassenbuch.edupage.org/#!/videos/223":"03_teachingplans"==e?"http://klassenbuch.edupage.org/#!/videos/10":"13_elearning_test"==e?"http://klassenbuch.edupage.org/#!/videos/224":"http://klassenbuch.edupage.org/video":"11_preparations"==e?"http://classregister.edupage.org/#!/videos/231":"12_preparations_withstudent"==e?"http://classregister.edupage.org/#!/videos/232":"03_teachingplans"==e?"http://classregister.edupage.org/#!/videos/120":"13_elearning_test"==e?"http://classregister.edupage.org/#!/videos/233":"http://classregister.edupage.org/video"},hexToRgba:function(e,t){return renderS("rgba({c.r},{c.g},{c.b},{a})",{c:EdubarUtils.hexToRgb(e),a:(1*t).toFixed(2)})},hexToRgb:function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},componentToHex:function(e){var t=Math.min(255,Math.max(0,Math.round(e))).toString(16);return 1==t.length?"0"+t:t},rgbToHex:function(e,t,i){return"#"+this.componentToHex(e)+this.componentToHex(t)+this.componentToHex(i)},mergeColors:function(e,t,i){if(""==e)return""==t?"#ffffff":e;var n=this.hexToRgb(e),a=this.hexToRgb(t);if(!n||!a)return e;var o=Math.max(0,Math.min(255,Math.round(n.r*(1-i)+a.r*i))),r=Math.max(0,Math.min(255,Math.round(n.g*(1-i)+a.g*i))),s=Math.max(0,Math.min(255,Math.round(n.b*(1-i)+a.b*i)));return this.rgbToHex(o,r,s)},hsv2rgb:function(e,t,i){var n,a,o=[];if(0===t)n=[i,i,i];else switch(o=[i*(1-t),i*(1-t*((e/=60)-(a=Math.floor(e)))),i*(1-t*(1-(e-a)))],a){case 0:n=[i,o[2],o[0]];break;case 1:n=[o[1],i,o[0]];break;case 2:n=[o[0],i,o[2]];break;case 3:n=[o[0],o[1],i];break;case 4:n=[o[2],o[0],i];break;default:n=[i,o[0],o[1]]}return"#"+n.map(function(e){return("0"+Math.round(255*e).toString(16)).slice(-2)}).join("")},rgb2hsv:function(e,t,i){e/=255,t/=255,i/=255;var n,a,o,r,s,l=Math.max(e,t,i),d=l-Math.min(e,t,i),u=function(e){return(l-e)/6/d+.5};return 0==d?r=s=0:(s=d/l,n=u(e),a=u(t),o=u(i),e===l?r=o-a:t===l?r=1/3+n-o:i===l&&(r=2/3+a-n),r<0?r+=1:r>1&&(r-=1)),{h:Math.round(360*r),s:Math.round(100*s),v:Math.round(100*l)}},rgbToHsl:function(e,t,i){e/=255,t/=255,i/=255;var n,a,o=Math.max(e,t,i),r=Math.min(e,t,i),s=(o+r)/2;if(o==r)n=a=0;else{var l=o-r;switch(a=s>.5?l/(2-o-r):l/(o+r),o){case e:n=(t-i)/l+(t<i?6:0);break;case t:n=(i-e)/l+2;break;case i:n=(e-t)/l+4}n/=6}return{h:n,s:a,l:s}},hslToRgb:function(e,t,i){var n,a,o;if(0==t)n=a=o=i;else{function r(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+(t-e)*(2/3-i)*6:e}var s=i<.5?i*(1+t):i+t-i*t,l=2*i-s;n=r(l,s,e+1/3),a=r(l,s,e),o=r(l,s,e-1/3)}return{r:255*n,g:255*a,b:255*o}},adjustBrightness:function(e,t,i){var n=this.hexToRgb(e);if(!n)return e;var a=this.rgbToHsl(n.r,n.g,n.b);return t&&(a.l=a.l*t),i&&(a.s=a.s*i),n=this.hslToRgb(a.h,a.s,a.l),this.rgbToHex(n.r,n.g,n.b)},setBrightness:function(e,t,i){var n=this.hexToRgb(e);if(!n)return e;var a=this.rgbToHsl(n.r,n.g,n.b);return t&&(a.l=t),i&&(a.s=i),n=this.hslToRgb(a.h,a.s,a.l),this.rgbToHex(n.r,n.g,n.b)},getQueryParameters:function(e){var t=(e=e.toString().split("#")[0]).indexOf("?"),i=-1==t?e:e.substr(0,t),n={},a=new RegExp("^(http.?://[^/]*)?/([^/]*)/.*$","gi").exec(i);n.module=a?a[2]:"",n.params={};var o=-1==t?"":e.substr(t+1);if(""==o.split("&"))return n;var r=EdubarUtils.parseQueryParams(o);return n.params=r,n},parseQueryParams:function(e){for(var t=e.split("&"),i={},n=0;n<t.length;++n){var a=t[n].split("=");if(a.length<2)i[a[0]]="";else if("eqa"==a[0]){var o=EdubarUtils.parseQueryParams(Base64.decode(decodeURIComponent(a[1].replace(/\+/g," "))));for(var r in o)i[r]=o[r]}else i[a[0]]=decodeURIComponent(a[1].replace(/\+/g," "))}return i},nl2br:function(e,t){return(e+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1"+(t||void 0===t?"<br />":"<br>")+"$2")},getZnamkyPohladBtn:function(e,t,i,n,a,o){o||(o={}),n||(n=""),a||(a="");var r="";r+='<span class="dropDownBtn pohladDropDownBtn znamkySidePohladDropDown" style="display:block;">';var s=[];EdubarUtils.isAdmin()?"kurz"==e||"plan"==e?(s.push({id:"kurz",img:"/plany/pics/icons/pohlad_kurz.png",url:"/plany/?pohlad=kurz&planid="+n+"&triedaid="+t+"&predmetid="+i,name:ls(3891)}),s.push({id:"plan",img:"/plany/pics/icons/pohlad_plan.png",url:"/plany/?pohlad=plan&planid="+n+"&triedaid="+t+"&predmetid="+i,name:ls(3662)})):(s.push({id:"uvod",img:"/znamky/pics/znamky_intro.svg",url:"/znamky/",name:ls(3976)}),s.push({id:"znamky",img:"/znamky/pics/znamky_filled.svg",url:"/znamky/?what=zobraztriedu&p="+i+"&t="+t,name:ls(1131)}),s.push({id:"poznamky",img:"/global/pics/ui/note_32.png",url:"/znamky/?what=PoznamkyTriedy&triedaid="+t+"&predmetid=",name:ls(4829)}),s.push({id:"cesta",img:"/znamky/pics/znamkycesta.svg",url:"/znamky/?what=ZnamkyCestaTrieda&triedaid="+t+"&predmetid="+i+"&obdobie="+a,name:ls(4910)}),s.push({id:"kompetencie",img:"/znamky/pics/kompetencie.svg",url:"/znamky/?what=KompetencieManager",name:ls(4224)}),(edubar&&"il"==edubar.options.school_country||edubar&&edubar.options.useZnamkyExams)&&s.push({id:"znamkyexam",img:"/znamky/pics/znamkyexam.svg",url:"/znamky/?what=ZnamkyExams&t="+t+"&p="+i+(n?"&planid="+n:""),name:edubar&&"sk"==edubar.options.school_country?ls(1010):ls(9710)}),EdubarUtils.indexOf(["sk"],EdubarUtils.getSchoolCountry())>=0&&s.push({id:"komisionalneskusky",img:"/znamky/pics/icons/komisionalnaskuska2.svg",url:"/skd/?cmd=KomisionalneSkusky&mod=grades&triedaid="+(t||"")+"&predmetid="+(i||"")+"&obdobie="+(a||"")+(n?"&planid="+n:""),name:ls(12082)}),EdubarUtils.indexOf(["sk"],EdubarUtils.getSchoolCountry())>=0&&s.push({id:"certificates",img:"/znamky/pics/vysvedcenia.svg",url:"/znamky/?what=Certificates&triedaid="+(t||"")+"&predmetid="+(i||"")+"&obdobie="+(a||"")+(n?"&planid="+n:""),name:ls(12110)}),s.push({id:"osnova",img:"/znamky/pics/user_rights.svg",url:"/znamky/?what=OsnovaHodin",name:ls(6010)})):(s.push({id:"znamky",img:"/znamky/pics/znamky_filled.svg",url:"/znamky/?what=zobraztriedu&p="+i+"&t="+t+"&planid="+n,name:ls(1131)}),s.push({id:"poznamky",img:"/global/pics/ui/note_32.png",url:"/znamky/?what=PoznamkyTriedy&triedaid="+t+"&predmetid=&planid="+n,name:ls(4829)}),s.push({id:"cesta",img:"/znamky/pics/znamkycesta.svg",url:"/znamky/?what=ZnamkyCestaTrieda&triedaid="+t+"&predmetid="+i+"&obdobie="+a+"&planid="+n,name:ls(4910)}),s.push({id:"kompetencie",img:"/znamky/pics/kompetencie.svg",url:"/znamky/?what=kompetencie&t="+t+"&p="+i+(n?"&planid="+n:""),name:ls(4224)}),(edubar&&"il"==edubar.options.school_country||edubar&&edubar.options.useZnamkyExams)&&s.push({id:"znamkyexam",img:"/znamky/pics/znamkyexam.svg",url:"/znamky/?what=ZnamkyExams&t="+t+"&p="+i+(n?"&planid="+n:""),name:edubar&&"sk"==edubar.options.school_country?ls(1010):ls(9710)}),EdubarUtils.indexOf(["sk"],EdubarUtils.getSchoolCountry())>=0&&s.push({id:"komisionalneskusky",img:"/znamky/pics/icons/komisionalnaskuska2.svg",url:"/skd/?cmd=KomisionalneSkusky&mod=grades&triedaid="+(t||"")+"&predmetid="+(i||"")+"&obdobie="+(a||"")+(n?"&planid="+n:""),name:ls(12082)}),EdubarUtils.indexOf(["sk"],EdubarUtils.getSchoolCountry())>=0&&s.push({id:"certificates",img:"/znamky/pics/vysvedcenia.svg",url:"/znamky/?what=Certificates&triedaid="+(t||"")+"&predmetid="+(i||"")+"&obdobie="+(a||"")+(n?"&planid="+n:""),name:ls(12110)}),edubar&&edubar.options.ecourseenabled||(s.push({id:"kurz",img:"/plany/pics/icons/pohlad_kurz.png",url:"/plany/?pohlad=kurz&planid="+n+"&triedaid="+t+"&predmetid="+i,name:ls(3891)}),s.push({id:"plan",img:"/plany/pics/icons/pohlad_plan.png",url:"/plany/?planid="+n+"&triedaid="+t+"&predmetid="+i,name:ls(3662)}),s.push({id:"homeworks",img:"/elearning/pics/moje.png",url:"/exam/?cmd=HomeworkList&planid="+n+"&triedaid="+t+"&predmetid="+i,name:ls(1312)})));for(var l='<ul class="dropDownPanel znamkyPohladPanel" style="white-space:nowrap">',d=0;d<s.length;d++){var u=s[d];if(e==u.id){var c=u.name.split(" "),p=u.name.split("/");o.ecourseMode?(r+='<a class="ribbon-button ribbon-button-large alwaysEnabled" style="overflow:hidden;white-space:nowrap;;display:block;">',r+='<div style="font-size:10px;opacity:0.7;">'+lset(4462)+":</div>",r+='<span style="white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-size:16px;display:inline-block;vertical-align: middle;font-weight:bold">',r+=et(u.name),r+="</span>",r+="</a>"):(r+='<a class="ribbon-button ribbon-button-large alwaysEnabled" style="overflow:hidden;">',r+='<img class="ribbon-icon ribbon-normal" src="'+et(u.img)+'" alt="">',r+='<span class="button-title" style="padding-right:10px;'+et(1==c.length&&1==p.length?"margin-top:7px;":"")+'">',r+=et(u.name).naDvaRiadky(),r+="</span>",r+="</a>")}l+='<li class="'+et(e==u.id?"marked":"")+'">',l+='<a href="'+et(barEncLink(u.url))+'" class="edubarSmartLink">',o.ecourseMode?l+='<img src="'+et(u.img)+'" alt="" style="width: 25px;height:25px; margin-left: -8px;margin-right: 8px;">':l+='<img src="'+et(u.img)+'" alt="">',l+=et(u.name),l+="</a>",l+="</li>"}return EdubarUtils.isAdmin()&&(l+='<hr style="margin:1px 0">',l+="<li>",l+="<a onclick=\"barNewDialog({'title': ls(1637),'source': '/znamky/?jwgc=ZnamkyAdminSettings',close: function() {barSmartReloadPage()}});\">",l+='<img src="/global/pics/ui/settings_32.png" alt="">',l+=et(ls(3409)),l+="</a>",l+="</li>"),r+='<div class="dropDown pohladDropDown">',r+=l+="</ul>",r+="</div>",r+="</span>"},getUserRowName:function(e,t){if(!e)return"";var i=edubar&&"tr"==edubar.options.school_country||edubar&&"cn"==edubar.options.school_country||edubar&&"th"==edubar.options.school_country||edubar&&"mv"==edubar.options.school_country,n="";return e.p_meno||e.p_priezvisko?(e.p_meno||(e.p_meno=""),e.p_priezvisko||(e.p_priezvisko=""),n=i?e.p_meno+" "+e.p_priezvisko:e.p_priezvisko+", "+e.p_meno):e.firstname||e.lastname?(e.firstname||(e.firstname=""),e.lastname||(e.lastname=""),n=i?e.firstname+" "+e.lastname:e.lastname+", "+e.firstname):(e.meno||e.priezvisko)&&(e.meno||(e.meno=""),e.priezvisko||(e.priezvisko=""),n=i?e.meno+" "+e.priezvisko:e.priezvisko+", "+e.meno),!1!==t&&e.subname&&e.subname&&(n+=(n?", ":"")+et(e.subname)),n},switchRodicDieta:function(e,t){$j("body").append('<div id="barSmartLinkLoadingText">'+ls(3358)+"</div>"),$j.get("/login/switchchild?studentid="+e,function(i){EdubarUtils.isParent()&&edubar&&(edubar.options.loggedChild=e),$j(".edubarProfileChildBtn.switchChildBtn").each(function(){$(this).toggleClass("selected",$(this).attr("data-sid")==e)}),$j("#barSmartLinkLoadingText").remove(),t&&t()})},formatFileSize:function(e){var t=e+" B";return e>1e3&&(t=Math.round(e/1024)+" KB"),e>1e6&&(t=Math.round(e/1024/1024)+" MB"),t},strtr:function(e,t,i){var n,a,o,r,s="",l=0,d=0,u="",c=[],p=[],h="",f=!1;if("object"==typeof t){for(s in t)t.hasOwnProperty(s)&&(c.push(s),p.push(t[s]));t=c,i=p}for(n=e.length,a=t.length,o="string"==typeof t,r="string"==typeof i,l=0;l<n;l++){if(f=!1,o){for(u=e.charAt(l),d=0;d<a;d++)if(u==t.charAt(d)){f=!0;break}}else for(d=0;d<a;d++)if(e.substr(l,t[d].length)==t[d]){f=!0,l=l+t[d].length-1;break}h+=f?r?i.charAt(d):i[d]:e.charAt(l)}return h},htmlToText:function(e){return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/<style([\s\S]*?)<\/style>/gi,"")).replace(/<script([\s\S]*?)<\/script>/gi,"")).replace(/<\/div><\/div><\/li>/gi,"\n")).replace(/<\/div><\/li>/gi,"\n")).replace(/<\/p><\/div>/gi,"\n")).replace(/<\/div><\/div>/gi,"\n")).replace(/<\/div>/gi,"\n")).replace(/<\/li>/gi,"\n")).replace(/<\/a>/gi," ")).replace(/<li>/gi,"  *  ")).replace(/<\/ul>/gi,"\n")).replace(/<\/p>/gi,"\n \n")).replace(/<\/h1>/gi,"\n \n")).replace(/<\/h2>/gi,"\n \n")).replace(/<\/h3>/gi,"\n \n")).replace(/<br\s*[\/]?>/gi,"\n")).replace(/<[^>]+>/gi,"")).replace(/\r?\n\r?\n(\r?\n)+\r?/gi,"\n\n")},strip_tags:function(e,t){return t&&(e=(e||"").replace(/(<div[^>]*>|<\/div>|<\/p>|<p>|<br>|<br\/>)/gi,"\n")),(e||"").replace(/(<([^>]+)>)/gi,"")},emailIsValid:function(e){e||(e=""),e=e.toString(),e=$j.trim(e);return!!/^[a-zA-Z0-9]+[a-zA-Z0-9\._\-\+]*@([a-zA-Z0-9_\-]+\.)+[a-zA-Z]+$/.test(e.toLowerCase())&&!(e.endsWith("@gmail.sk")||e.endsWith("@gmail.cz")||e.endsWith("@gamil.com")||e.endsWith("@gmial.com")||e.endsWith("@gmal.com")||e.endsWith("@gmil.com")||e.endsWith("@gmali.com")||e.endsWith("@gmila.com")||e.endsWith("vgmail.com")||e.endsWith("vcentrum.sk"))}},EduSettings={};function barHideEdubar(){barToggleSideBar(!1),barToggleEdubarHeader(!1)}function barShowEdubar(){barToggleSideBar(!0),barToggleEdubarHeader(!0)}function barSaveSkinSettings(e){if(!e){var t=document.getElementById("edubarSkinSettingsFrm");e=$j(t).serialize()}$j.post("/customize/skinSettings.php",e,function(e){"ok"==e?document.location.reload(!0):alert("Nepodarilo sa uloi nastavenia. Chybov hlsenie: "+e)})}function barRefreshSkinSettings(){var e=document.getElementById("edubarSkinSettingsFrm");e.akcia.value="refreshSettings";var t=$j(e).serialize();e.akcia.value="changeSettings",$j.post("/customize/skinSettings.php",t,function(e){$j(e).appendTo("head")})}function barResetSkinSettings(){$j.post("/customize/skinSettings.php",{akcia:"resetSettings"},function(e){"ok"==e?document.location.reload(!0):alert("Nepodarilo sa uloi nastavenia. Chybov hlsenie: "+e)})}function barProcessSkinColor(e){return"#"==e.substr(0,1)?e:"rgb"==e.substr(0,3)?e:"theme"==e.substr(0,5)?$j("."+e).css("color"):e}EduSettings.getSchoolYearTournOver=function(){return edubar&&edubar.options.schoolyear_turnover?edubar.options.schoolyear_turnover:"08-01"},EduSettings.getZaciatocnyMesiacRoku=function(e){var t=edubar&&edubar.options.year_turnover?edubar.options.year_turnover:"";if(!t)return 9;var i=Date.fromDbString(t).format("n");return e?i:1==i?1:8!=i?i:9},EduSettings.getNazovSkolskehoRoku=function(e){return"undefined"!=typeof ASC&&ASC.req&&ASC.req.getSchoolYearName?ASC.req.getSchoolYearName(1*e):1==this.getZaciatocnyMesiacRoku()?e:(1*e).toString()+" / "+(1*e+1).toString()},EduSettings.getPoradieMesiacov=function(e){for(var t=this.getZaciatocnyMesiacRoku(e)-1,i=[],n=0;n<12;n++)(e||!edubar||-1==EdubarUtils.indexOf(["sk","cz"],edubar.options.school_country)||(t+n)%12+1!=7&&(t+n)%12+1!=8)&&i.push((t+n)%12+1);return i},WebFontConfig={google:{families:[]}};var barLoadedFonts={};function barLoadGoogleFont(e){if(!barLoadedFonts[e]){var t=e.replace(" ","_"),i=window.navigator.userAgent;i.indexOf("MSIE ")>0||i.match(/Trident.*rv\:11\./)?barCssLoad("/global/pics/gfonts/"+t+"/fontie.css"):barCssLoad("/global/pics/gfonts/"+t+"/font.css"),barLoadedFonts[e]=!0}}function barAdminBtnListClick(e){$j("#barSkinVolbaBtn .cp_groupDiv").hide(),$j("#barAdminBtn"+e).show(),$j("ul.barAdminBtnList > li").removeClass("selected"),$j("#barAdminBtnLi"+e).addClass("selected"),localStorage.setItem("barAdminBtnSelection",e)}var barDialogs=new Array;function barOpenDialog(e,t,i,n,a){barNewDialog({id:e,source:t,title:i,close:n,beforeClose:a})}function barMDialog(e){barStartLoading(),$.post(e.url,{},function(){},"script").always(function(){barEndLoading()})}function barNewDialog(e){if(!(e&&e.allowDialoginInAppLegacyView&&e.source&&MobileAppBridge.isV2Active())){if(e&&e.allowDialoginInAppLegacyView&&e.content&&MobileAppBridge.isV2Active())return EdupageApp.pushLegacyDialogView("<div>"+e.content+"</div>",e);var t=$j("body > .yui-dialog").length>0,i=e.source?e.source:"",n=e.dialogClass?e.dialogClass:"",a=e.maxHeightKoef?e.maxHeightKoef:1,o=e.postData?e.postData:{},r=e.width?e.width:820,s=e.close?e.close:null,l=e.onload?e.onload:null,d=e.beforeClose?e.beforeClose:null,u=e.id?e.id:"",c=e.buttons?e.buttons:{},p=e.title?e.title:"",h=e.height?e.height:"auto",f=!e.resizeable||e.resizeable,g=$j("<div>").appendTo("body"),b=e.returnFunc?e.returnFunc:null,m=!1!==e.modal,v=e.content?e.content:"";if(""!=u?g.attr("id",u):(window.dlgid||(window.dlgid=0),window.dlgid++,u="dlg"+window.dlgid.toString(),g.attr("id",u)),""!=i){MobileAppBridge.isActive()&&(h=$(window).height()+70);var y='<div class="" style="position: relative;padding:15px;'+("auto"!=h?"height:"+et(h-70)+"px;":"min-height:150px")+';">';y+='<i class="fa fa-spinner fa-pulse" style="color: rgba(0,0,0,0.2);position:absolute;left:50%;top:50%;margin-top:-24px;margin-left:-24px;font-size:48px"></i>',y+="</div>",g.html(y)}else{g.html(v);var w="";for(var S in c){var k=c[S],C=k.buttonClass?k.buttonClass:"button-blue";w+='<input type="button" onclick="'+et("close"==k.type?"barCloseDialog(this)":k.click?k.click:"")+'" class="'+et(C)+'" value="'+et(S)+'">'}""!=w&&g.append('<div style="text-align:right;margin-top:10px;">'+w+"</div>"),g.addClass("dialog")}if(t){var x=new YAHOO.widget.Dialog("yuidlg"+u,{modal:m});x.setHeader(p),x.setBody('<div id="jdlg'+et(u)+'"></div>'),x.render(document.body),$j("#jdlg"+u).replaceWith(g),x.center(),g.data("yuiDialog",x),g.addClass("ui-dialog-content")}else{var j={modal:m,dialogClass:n,width:r+"px",height:h,minHeight:60,maxHeight:$j(window).height(),resizeable:f,appendTo:e.appendTo?e.appendTo:"body",close:function(){var e=barDialogs&&barDialogs.length>0?barDialogs.pop():null;e&&e.remove(),$j(".tipsy").remove(),$j(window).off("resize.centerDialog"+u),s&&s()},title:p,beforeClose:function(e){window.skipDialogClose?e.preventDefault():d&&d()}};if(e.dlgOpts)for(var S in e.dlgOpts)j[S]||(j[S]=e.dlgOpts[S]);g.dialog(j),$j(window).on("resize.centerDialog"+u,function(){g.css("max-height",""),g.css("max-height",($j(window).height()*a-(g.closest(".ui-dialog").hasClass("noPadding")?0:52)).toString()+"px");var e=g.find(".whiteDialogTitle").outerHeight(),t=g.find(".whiteDialogFooter").outerHeight(),i=g.closest(".ui-dialog").find(".ui-dialog-titlebar");i.length>0&&i.is(":visible")&&(e+=i.outerHeight());var n=$(window).height()-e-t;g.find(".whiteDialogContent").css("max-height",n+"px"),g.dialog("option","maxHeight",$j(window).height()),barCenterDialog(g)}),g.on("remove",function(){$j(window).off("resize.centerDialog"+u)})}return g.data("returnFunc",b),g.data("dialogData",e.dialogData),barDialogs.push(g),""!=i?(-1==i.indexOf("asDialog")&&(i+=(-1==i.indexOf("?")?"?":"&")+"asDialog=1"),g.data("source",i),g.data("postData",o),$j.post(i,o,function(e){if(""!=e){iconsSelectedImg="",g.html(e);var i="";for(var o in c){var r=c[o],s=r.buttonClass?r.buttonClass:"button-blue";i+='<a onclick="'+et("close"==r.type?"barCloseDialog(this)":r.click?r.click:"")+'" class="'+et(s)+'" style="display:inline-block">'+et(o)+"</a>"}""!=i&&g.append('<div style="text-align:right">'+i+"</div>"),g.addClass("dialog"),t?x.center():(g.height()>$j(window).height()&&g.dialog("option","height",$j(window).height()*a),g.closest(".ui-dialog").css("position","fixed"),"skinBrowserDialog"!=n&&$j(window).resize()),barRefreshPage(),l&&l(g)}})):(t?x.center():(g.height()>$j(window).height()&&g.dialog("option","height",$j(window).height()*a),g.closest(".ui-dialog").css("position","fixed"),"skinBrowserDialog"!=n&&$j(window).resize()),barRefreshPage(),l&&l(g)),e.closeOnOverlayClick&&g.closest(".ui-dialog").next().on("click",function(){barCloseDialog(g)}),g.closest(".ui-dialog").css("position","fixed"),barCenterDialog(g),$j(".tipsy").remove(),$j(".dropDown").fadeOut(150),$j(".dropDownBtn").children("a").removeClass("icon-button-active"),barFixAutocenterDialogs(),setTimeout(function(){barFixAutocenterDialogs()},300),g}EdupageApp.pushLegacyUrlView(e)}function barFixAutocenterDialogs(){EdubarUtils._autoCenterDialogTimeout||(EdubarUtils._autoCenterDialogTimeout=setTimeout(function(){EdubarUtils._autoCenterDialogTimeout=null;var e=$j(".autoCenteredDialog");0!=e.length&&(e.each(function(){var e=$(this),t=Math.round(e.outerWidth()),i=Math.round(e.outerHeight());(!e.data("autocenterLastW")||!e.data("autocenterLastH")||Math.abs(t-e.data("autocenterLastW"))>5||Math.abs(i-e.data("autocenterLastH"))>5)&&barCenterDialog(e.find(".ui-dialog-content")),e.data("autocenterLastW",t),e.data("autocenterLastH",i)}),barFixAutocenterDialogs())},150))}function barRenderReactComponent(e,t,i,n){function a(){ASC.requireAsync(t).then(function(t){ASC.requireAsync("react-dom").then(function(a){window.ReactDOM=a;var o=ASC.require("react");a.render(o.createElement(t[i],n),e),$(e).on("remove",function(){a.unmountComponentAtNode(this)})})})}MobileAppBridge.isV2Active()?a():barJsLibraryLoad(edubar&&edubar.options&&edubar.options.srcv?edubar.options.srcv:"/global/pics/js/srcv.js?v="+(new Date).getTime(),function(){a()})}function barNewReactSourceDlg(e,t,i,n){function a(){barStartLoading(),ASC.requireAsync("react-dom").then(function(a){window.ReactDOM=a,ASC.requireAsync(e).then(function(e){barEndLoading(),barNewReactDlg(ASC.require("react").createElement(e[t],i),n)})})}n||(n={}),n.dialogClass||(n.dialogClass="grayTitleDialog noPadding"),n.closeOnOverlayClick||(n.closeOnOverlayClick=!1),MobileAppBridge.isV2Active()?n.allowDialoginInAppView||n.allowDialoginInAppLegacyView?(n.viewClass=t,EdupageApp.pushReactComponentView(e,i,n)):a():(barStartLoading(),barJsLibraryLoad(edubar&&edubar.options&&edubar.options.srcv?edubar.options.srcv:"/global/pics/js/srcv.js?v="+(new Date).getTime(),function(){barEndLoading(),a()}))}function barNewReactDlg(e,t){if(t||(t={}),t.closeOnOverlayClick=!1===t.closeOnOverlayClick||!0===t.closeOnOverlayClick?t.closeOnOverlayClick:!!MobileAppBridge.isActive(),t.dialogClass||(t.dialogClass="whiteDialog visibleEdges noPadding"),!(t&&t.allowDialoginInAppLegacyView&&MobileAppBridge.isV2Active())){var i=null,n=t.close;return t.close=function(){ReactDOM.unmountComponentAtNode(i.get(0)),n&&n()},!t.dlgOpts&&MobileAppBridge.isActive()&&(t.dlgOpts={show:{effect:"fade",delay:20,duration:100}}),(i=barNewDialog(t)).on("remove",function(){ReactDOM.unmountComponentAtNode(i.get(0))}),ReactDOM.render(e,i.get(0)),barCenterDialog(i),i}EdupageApp.pushReactComponentView("/app/pics/jsw/views/legacy/ReactDialogView.js",{children:e,options:t})}function barCloseDialogOrView(e){if($j(e).closest(".ui-dialog-content").data("ui-dialog"))$j(e).closest(".ui-dialog-content").dialog("close");else if($j(e).closest(".yui-dialog").length>0){(e=$j(e).closest(".ui-dialog-content")).data("yuiDialog").hide()}else if($j(e).closest(".etest-overlay.etest-return-div").length>0){(e=$j(e).closest(".etest-overlay.etest-return-div")).data("returnFunc")&&e.data("returnFunc")()}else $j(e).closest(".app-dlg-inner,.app-legacy-url,.app-view-stack").length>0&&"undefined"!=typeof EdupageApp&&EdupageApp.inst.goBack()}function barSetDialogTitle(e,t){if(MobileAppBridge.isActive()&&$(e).closest(".app-view-stack").length>0){var i=$(e).closest(".app-view").attr("data-viewid");EdupageApp.inst.setViewTitle(t,i)}else $(e).closest(".ui-dialog-content").dialog("option","title",t)}function barCloseDialog(e){if($j(e).closest(".etest-overlay.etest-return-div").length>0)(e=$j(e).closest(".etest-overlay.etest-return-div")).data("returnFunc")&&e.data("returnFunc")();else if($j(e).closest(".app-dlg-inner,.app-legacy-url, .app-react-dlg-inner").length>0&&"undefined"!=typeof EdupageApp){var t=$j(e).closest(".app-view").attr("data-uniqueviewid");t&&EdupageApp.removeViewId?EdupageApp.removeViewId(t):EdupageApp.inst.goBack()}else if($j(e).closest(".yui-dialog").length>0){(e=$j(e).closest(".ui-dialog-content")).data("yuiDialog").hide()}else $j(e).closest(".ui-dialog-content").data("ui-dialog")&&$j(e).closest(".ui-dialog-content").dialog("close")}function barCenterDialog(e){$j(e).closest(".ui-dialog-content").data("ui-dialog")&&($j(e).closest(".ui-dialog-content").dialog("option","position",{my:"center",at:"center",of:window}),$j(e).closest(".ui-dialog").height()>=$(window).height()-3&&$j(e).closest(".ui-dialog").css("top",0))}function barCenterTopDialog(e){$j(e).closest(".ui-dialog-content").data("ui-dialog")&&$j(e).closest(".ui-dialog-content").dialog("option","position",{my:"center top",at:"center top",of:window})}function barReloadDialog(e,t){var i=$j(e).closest(".ui-dialog-content"),n=i.data("source"),a=i.data("postData");i.append('<div class="loadingDiv loading-background"></div>'),$j.post(n,a,function(e){""!=e&&(i.html(e),i.toggleClass("dialog",!0),i.height()>$j(window).height()&&i.dialog("option","height",.98*$j(window).height()),i.css("max-height",.98*$j(window).height()-52+"px"),i.closest(".ui-dialog").css("position","fixed"),i.dialog("option","position",{my:"center",at:"center",of:window}),barRefreshPage(),t&&t(i))})}function barGetDialogReturnFunc(e,t){return t||(t="returnFunc"),e.data(t)?e.data(t):e.closest(".ui-dialog-content").data(t)?e.closest(".ui-dialog-content").data(t):e.closest(".barReturnElem").data(t)?e.closest(".barReturnElem").data(t):null}function barGetDialogData(e,t){var i=null;return e.data("dialogData")?i=e.data("dialogData"):e.closest(".ui-dialog-content").data("dialogData")?i=e.closest(".ui-dialog-content").data("dialogData"):e.closest(".barReturnElem").data("dialogData")&&(i=e.closest(".barReturnElem").data("dialogData")),t?i&&i[t]?i[t]:null:i}var iconsSelectedImg="";function bariconClicked(e,t,i,n){iconsSelectedImg=e,barDialogs[barDialogs.length-1].dialog("close")}function barOpenLoginDialog(e,t){barNewDialog({source:"/login/form",title:"Prihlsenie",width:"450",onload:function i(n){e&&n.find(".loginMsgDiv").append("<div>"+e+"</div>"),t&&n.find("form").on("submit",function(e){return e.preventDefault(),$j.post($j(this).attr("action")+"asAjax=1",$j(this).serialize(),function(e){if("loginok"==e.substr(0,7)){var a=e.split(";");edupage=a[1],t(edupage,a[2],a[3])}else n.html(e),i(n),n.dialog("options","position","center")}),!1})}})}function barChangeLang(e){window.location=$j(e).attr("data-l")}function barShowMessageBox(e,t,i){var n=MobileAppBridge.isActive()||$("body").hasClass("mobileBody");t&&"fa-"==t.substr(0,3)||(t="fa-comments");var a="";n?("fa-none"!=t&&(a+='<div style="margin: 12px 0 32px;text-align:center;"><i class="fa fa-fw {icon}" style="color: #BDBDBD;font-size:48px;opacity:0.7;"></i></div>'),a+='<div style="margin-bottom: 32px;text-align:center;">{!msg}</div>'):(a+=renderS('<i class="fa {icon}" style="color: #43A047;font-size:32px;'+(n?"margin:10px 0px 10px 0px;":"float:left;margin:10px 20px 10px 10px;")+'display:inline-block;"></i>',{icon:t}),a+='<div style="text-align:left;margin-left:62px;">{!msg}</div>',a+="<br>"),a+='<div class="barShowMessageBoxButtons" style="text-align:center;margin-top:10px;clear:both;">';var o=1,r=!1;if(i&&i.buttons){for(var s=0;s<i.buttons.length;s++){var l=i.buttons[s],d="";d+='<button type="button" class="{btnCls} customBtn" value="{title}" data-ind="{ind}" data-i="{i}">',d+="{title}",l.subtitle&&(d+='<div style="opacity: 0.8">{subtitle}</div>'),a+=renderS(d+="</button>",{btnCls:l.cssClass?l.cssClass:"button-gray",title:l.label,subtitle:l.subtitle,i:s,ind:l.ind?l.ind:s}),l.cssClass&&l.cssClass.indexOf("etest-btn-fw-confirm")>=0&&(r=!0)}o=i.buttons.length}else i&&i.confirm?(o=2,a+='<input type="button" class="'+(i.okClass?et(i.okClass):"button-green")+' okBtn" value="'+(i.okLbl?et(i.okLbl):"{#1573}")+'">',a+='<input type="button" class="'+(i.cancelClass?et(i.cancelClass):"button-gray")+' cancelBtn" value="'+(i.cancelLbl?et(i.cancelLbl):"{#1038}")+'">'):a+='<input type="button" class="button-blue closeBtn" value="{#1573}" onclick="barCloseDialog(this)">';if(o>2&&!r)for(s=0;s<3;s++)a+='<div class="barShowMessageBoxButtons-emptyItem"></div>';a+="</div>";var u="",c=barNewDialog({title:i&&i.title?et(i.title):et(ls(2315)),content:renderS(a,{msg:e,icon:t}),width:i&&i.width?i.width:350,dialogClass:(n?"whiteDialog mobileDlgPadding fixedPos":"")+(i&&i.dialogClass?" "+i.dialogClass:""),close:function(){i&&i.close&&i.close(u)}});return i&&i.buttons?c.find(".customBtn").click(function(){u=$j(this).attr("data-ind");var e=i.buttons[1*$j(this).attr("data-i")];e&&e.noDlgClose||barCloseDialog(c),i.buttonClick($j(this).attr("data-ind"))}):i&&i.confirm&&(c.find(".okBtn").click(function(){u="confirm",barCloseDialog(c),i.confirm()}),c.find(".cancelBtn").click(function(){barCloseDialog(c),i&&i.cancel&&i.cancel()})),c}function barShowPromptBox(e){var t="";if(t+='<div style="padding:0px">',t+='<form action="?" method="post">',t+="<div>{msg}</div>",e&&"textarea"==e.inputType)t+='<textarea name="prompt" style="width:100%;box-sizing: border-box;padding: 7px;height: 150px" class="promptField">{value}</textarea>';else if(e&&"select"==e.inputType){t+='<select name="prompt" style="width:100%;box-sizing: border-box;padding: 7px;" class="promptField">';for(var i=0;i<e.values.length;i++)t+=renderS('<option value="{v.id}" {selected}>{v.name}</option>',{v:e.values[i],selected:e.values[i].id==e.value?"selected":""});t+="</select>"}else e&&"number"==e.inputType?(t+='<input type="number" style="width:100%;box-sizing: border-box;padding: 7px" name="prompt" value="{value}"',e.max&&(t+=' max="'+et(e.max)+'"'),e.min&&(t+=' min="'+et(e.min)+'"'),t+=' class="promptField">'):t+='<input type="text" style="width:100%;box-sizing: border-box;padding: 7px" name="prompt" value="{value}" {maxLength}  class="promptField">';if(t+='<div style="text-align: right;padding-top:10px;">',e&&e.leftButtons){t+='<div style="float:left">';for(i=0;i<e.leftButtons.length;i++){var n=e.leftButtons[i];t+=renderS('<a class="leftBtn {btnCls}" data-btnind="{ind}" style="cursor:pointer;display:inline-block;">{title}</a>',{btnCls:n.cssClass?n.cssClass:"button-blue",title:n.label,ind:i})}t+="</div>"}t+='<input type="submit" value="{#1573}" class="button-green">',t+='<input type="button" value="{#1038}" class="button-gray" onclick="barCloseDialog(this)">',t+="</div>",t+="</form>",t+="</div>";var a=barNewDialog({title:et(e.title?e.title:"EduPage"),content:renderS(t,{msg:e.msg?e.msg:"",value:e.value?e.value:""}),width:350,maxLength:e.maxLength?' maxlength="'+et(e.maxLength)+'"':""});a.find('input[type="text"]').on("keydown",function(e){13==e.which&&$(this.form).submit()}),a.find("form").on("submit",function(t){(t.preventDefault(),e.confirm)?!1!==e.confirm($j(this).find(".promptField").val())&&barCloseDialog(a):barCloseDialog(a)}),e&&e.leftButtons&&a.find(".leftBtn").click(function(){var t=$j(this).attr("data-btnind");e.leftButtons[t].click&&e.leftButtons[t].click()}),a.find(".promptField").focus().select()}var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e,t){if(!t&&"function"==typeof btoa)return btoa(e);if("undefined"!=typeof btoa&&"plainjs"!=t)return btoa(Base64.UnicodetoUTF8(e));var i,n,a,o,r,s,l,d="",u=0;for(e=Base64._utf8_encode(e);u<e.length;)o=(i=e.charCodeAt(u++))>>2,r=(3&i)<<4|(n=e.charCodeAt(u++))>>4,s=(15&n)<<2|(a=e.charCodeAt(u++))>>6,l=63&a,isNaN(n)?s=l=64:isNaN(a)&&(l=64),d=d+this._keyStr.charAt(o)+this._keyStr.charAt(r)+this._keyStr.charAt(s)+this._keyStr.charAt(l);return d},UTF8toUnicode:function(e){return decodeURIComponent(escape(e))},UnicodetoUTF8:function(e){return unescape(encodeURIComponent(e))},decode:function(e,t){if(!t&&"function"==typeof atob)return atob(e);if("undefined"!=typeof btoa&&"plainjs"!=t)return Base64.UTF8toUnicode(atob(e));var i,n,a,o,r,s,l="",d=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");d<e.length;)i=this._keyStr.indexOf(e.charAt(d++))<<2|(o=this._keyStr.indexOf(e.charAt(d++)))>>4,n=(15&o)<<4|(r=this._keyStr.indexOf(e.charAt(d++)))>>2,a=(3&r)<<6|(s=this._keyStr.indexOf(e.charAt(d++))),l+=String.fromCharCode(i),64!=r&&(l+=String.fromCharCode(n)),64!=s&&(l+=String.fromCharCode(a));return l=Base64._utf8_decode(l)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",i=0;i<e.length;i++){var n=e.charCodeAt(i);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t},_utf8_decode:function(e){for(var t="",i=0,n=c1=c2=0;i<e.length;)(n=e.charCodeAt(i))<128?(t+=String.fromCharCode(n),i++):n>191&&n<224?(c2=e.charCodeAt(i+1),t+=String.fromCharCode((31&n)<<6|63&c2),i+=2):(c2=e.charCodeAt(i+1),c3=e.charCodeAt(i+2),t+=String.fromCharCode((15&n)<<12|(63&c2)<<6|63&c3),i+=3);return t}};function barOpenBoxEffect(e,t,i,n,a,o,r,s,l){l||(l={});var d=renderS('<div class="barOpenBoxEf" style="top: {startY}px;left:{startX}px;width:{startW}px;height:{startH}px;opacity: 1"></div>',{startX:e,startY:t,startW:i,startH:n}),u=$j(d).appendTo($j("body"));u.animate({top:o,left:a,width:r,height:s,opacity:l.dstOpacity?l.dstOpacity:.1},500,"easeInOutCubic").animate({opacity:0},200,"swing",function(){u.remove()})}function barShowTipArrow(e){var t=e.x,i=e.y,n="";n+='<div class="peTipArrowDiv" style="top:{y}px;left:{x}px;opacity:0;position:{options.position};">',n+='<i class="fa fa fa-arrow-{direction}"></i>',n=renderS(n+="</div>",{direction:e.direction?e.direction:"right",x:t-70,y:i+5,options:e});var a=$j(n).appendTo($j("body"));a.data("stopped",!1);var o=0;return function t(){a.data("stopped")||a.animate({"margin-left":50,opacity:1},300,"linear").delay(500).animate({opacity:0},200,"linear",function(){a.css("margin-left",0),o++,e.loopCount&&o>=e.loopCount?(a.data("stopped",!0),a.remove()):t()})}(),setTimeout(function(){$j(document).off("click.peArrowTip").on("click.peArrowTip",function(){$j("body").children(".peTipArrowDiv").each(function(){$j(this).data("stoppped",!0),$j(this).remove(),$j(document).off("click.peArrowTip")})})},300),a}var barMapsDoneFuncs=[];function barMapsApiLoaded(){if(barMapsDoneFuncs){for(var e=0;e<barMapsDoneFuncs.length;e++)barMapsDoneFuncs[e]();barMapsDoneFuncs=[]}}function barLoadMapsApi(e,t){barMapsDoneFuncs.push(t),barJsLibraryLoad("https://maps.googleapis.com/maps/api/js?key="+e+"&sensor=false&callback=barMapsApiLoaded",null,barMapsApiLoaded)}function barToggleSideBar(e){$j("#edubar").toggleClass("edubarSidebarHidden",!e),$j("#bar_mainDiv").toggleClass("edubarSidebarHidden",!e)}function barToggleEdubarHeader(e){$j("#edubar .edubarHeader").toggle(e),$j("#barHeaderMargin").toggle(e),$j("#bar_mainDiv").toggleClass("edubarHeaderHidden",!e),$j("#bar_chatPanel").toggle(e)}function barEdubarHeaderIsHidden(){return $j("#bar_mainDiv").hasClass("edubarHeaderHidden")}function barToggleEdubarLogo(e,t){if($j("#edubar .edubarHeaderTitle").toggle(e),$j("#edubar #edubarStartButton").toggle(e),t){var i=renderS('<a href="{url}" class="edubarSmartLink edubarBackBtn">',{url:!edubar||"pl"!=edubar.options.school_country&&"pl"!=edubar.options.lang?"/user/":"/"});$j(i+='<i class="fa fa-fw fa-arrow-left"></i></a>').appendTo($j("#edubar .edubarHeader"))}else $j("#edubar .edubarHeader .edubarBackBtn").remove()}function barToggleEdubarBorder(e){$j("#edubar").toggleClass("edubarNoBorder",!e)}function barAddBackUrl(e,t){return t||(t=window.location.pathname+window.location.search),e=e+="&ebu="+encodeURIComponent(t)}function barIsAscSupportLogin(){return!!window.isAscSupportLogin}function barToggleLoadingIndicator(e,t){if(t||(t="barSmartLinkLoadingDiv"),$("#"+t).remove(),e){var i="";i+='<div class="edubar-loading-indicator" id="'+et(t)+'">',i+='<div class="edubar-loading-line"></div>',i+='<div class="edubar-loading-subline edubar-loading-inc"></div>',i+='<div class="edubar-loading-subline edubar-loading-dec"></div>',i+="</div>",$j("body").append(i),$("#barSmartLinkLoadingDiv").show()}}function barStartLoading(e){var t=e||window;t.barLoadingIndicatorCount||(t.barLoadingIndicatorCount=0),0==t.barLoadingIndicatorCount&&barToggleLoadingIndicator(!0),t.barLoadingIndicatorCount++,e&&$(e).on("remove",function(){barEndLoading(e)})}function barEndLoading(e){var t=e||window;t.barLoadingIndicatorCount?t.barLoadingIndicatorCount--:t.barLoadingIndicatorCount=0,t.barLoadingIndicatorCount<=0&&barToggleLoadingIndicator(!1)}var MobileAppBridge={_isIOS:null,isIOS:function(){return null===MobileAppBridge._isIOS&&(MobileAppBridge._isIOS=MobileAppBridge.isIOS0()),MobileAppBridge._isIOS},isIOS0:function(){return!(!document||!document.location||"eduapp:"!=document.location.protocol)||(!(!navigator.platform||!/iPad|iPhone|iPod/.test(navigator.platform))||!(!navigator.userAgent||!/iPad|iPhone|iPod/i.test(navigator.userAgent)||window.MSStream))},getWebviewANE:function(){return"undefined"!=typeof webViewANE&&webViewANE?webViewANE:window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.webViewANE?window.webkit.messageHandlers.webViewANE:null},webview_call:function(e,t){if(!MobileAppBridge.getWebviewANE())return!1;var i=/Android/.test(navigator.userAgent),n={functionName:e,callbackName:"",args:t||[]};return MobileAppBridge.getWebviewANE().postMessage(i?JSON.stringify(n):n),!0},compareVersion:function(e,t){if("string"!=typeof e)return!1;if("string"!=typeof t)return!1;e=e.split("."),t=t.split(".");for(var i=Math.min(e.length,t.length),n=0;n<i;++n){if(e[n]=parseInt(e[n],10),t[n]=parseInt(t[n],10),e[n]>t[n])return 1;if(e[n]<t[n])return-1}return e.length==t.length?0:e.length<t.length?-1:1},isMinAppVersion:function(e){return MobileAppBridge.compareVersion(window.AscMobileAppVersion,e)>=0},runFlexMethod:function(e,t){if(MobileAppBridge.isActive())if(window.AscNativeWebview)$(window).trigger("runFlexMethodInvoked",[e,t]);else if("undefined"!=typeof MobileAppData)MobileAppData[e].apply(MobileAppData,t);else if(MobileAppBridge.getWebviewANE())MobileAppBridge.webview_call("webview_runMethod",[e,t]);else{this.locationCounter||(this.locationCounter=0),this.locationCounter++;var i={method:e,params:t,locationCounter:this.locationCounter},n=JSON.stringify(i);if(n.length>500&&MobileAppBridge.isMinAppVersion("2019.5.20")){MobileAppBridge.flexMethodParts=[];for(var a=0;a<n.length;){var o=n.substr(a,500);a+500<n.length&&(o+="##tl##"),this.flexMethodParts.push(o),a+=500}MobileAppBridge.flexMethodParts.reverse(),n=MobileAppBridge.flexMethodParts.pop()}var r="https://flexmethod/"+Base64.encode(n,!0);window.location=r}},sendNextFlexPart:function(){if(MobileAppBridge.flexMethodParts){var e=MobileAppBridge.flexMethodParts.pop(),t="https://flexmethod/"+Base64.encode(e,!0);window.location=t}},externalFunctions:{},registerJsFunction:function(e,t){MobileAppBridge.externalFunctions[e]=t},registerJsFunctions:function(e){for(var t in e)MobileAppBridge.externalFunctions[t]=e[t]},runJsFunction:function(e,t){if(MobileAppBridge.externalFunctions[e]){if("string"==typeof t&&"b64"==t.substr(0,3))try{t=JSON.parse(Base64.decode(t.substr(3),!0))}catch(e){alert("err")}MobileAppBridge.externalFunctions[e].apply(null,$j.isArray(t)?t:[t])}},isActive:function(){return!!window.AscMobileAppVersion},_isV2Active:null,isV2Active:function(){return null===MobileAppBridge._isV2Active&&(MobileAppBridge._isV2Active=!!window.AscMobileAppVersion&&$("body").hasClass("mobileBodyV2")),!!MobileAppBridge._isV2Active},registerBackHandler:function(e,t){if(MobileAppBridge.isV2Active())barRegisterPopstateHandler(e,t);else{MobileAppBridge.backHandlers||(MobileAppBridge.backHandlers=[]);$j(e).on("remove",function(){for(var t=[],i=0;i<MobileAppBridge.backHandlers.length;i++){var n=MobileAppBridge.backHandlers[i];n.elem!=e&&t.push(n)}MobileAppBridge.backHandlers=t});for(var i=[],n=0;n<MobileAppBridge.backHandlers.length;n++){var a=MobileAppBridge.backHandlers[n];a.elem!=e&&i.push(a)}MobileAppBridge.backHandlers=i,MobileAppBridge.backHandlers.push({elem:e,func:t})}},skipBack:function(){MobileAppBridge.getWebviewANE()?MobileAppBridge.webview_call("webview_skipBack",[]):window.location="https://skipback/"},goBack:function(){MobileAppBridge.getWebviewANE()?MobileAppBridge.webview_call("webview_goBack",[]):window.location="https://goback/"},handleBackClick:function(){var e=$j("body").find(".ui-dialog");if(e.length>0){var t=e.last();if(!t.hasClass("noBackClose"))return barCloseDialog(t.find(".ui-dialog-content")),void(MobileAppBridge.getWebviewANE()?MobileAppBridge.webview_call("webview_skipBack",[]):window.location="https://skipback/")}if(MobileAppBridge.backHandlers&&MobileAppBridge.backHandlers.length>0)for(var i=MobileAppBridge.backHandlers.length-1;i>=0;i--){return void("goback"===MobileAppBridge.backHandlers[i].func()?MobileAppBridge.getWebviewANE()?MobileAppBridge.webview_call("webview_goBack",[]):window.location="https://goback/":MobileAppBridge.getWebviewANE()?MobileAppBridge.webview_call("webview_skipBack",[]):window.location="https://skipback/")}MobileAppBridge.subviewStack&&MobileAppBridge.subviewStack.length>1?MobileAppBridge.getWebviewANE()?MobileAppBridge.webview_call("webview_skipBack",[]):window.location="https://skipback/":MobileAppBridge.getWebviewANE()?MobileAppBridge.webview_call("webview_goBack",[]):window.location="https://goback/"},useInWebviewPlayer:function(){if(!window.AscMobileAppVersion)return!1;var e=window.AscMobileAppVersion.split(".");return!(e[0]<2018)&&(!(2018==e[0]&&e[1]<4)&&!(2018==e[0]&&4==e[1]&&e[2]<8))}},BarQIntroAssistent={createElem:function(){this.element=$j('<div class="edubar-qiassist-main"><img class="edubar-qiassist-einsty edubar-qiassist-einsty1" src="/elearning/pics/icons/einstyl1s.png" alt=""><img class="edubar-qiassist-einsty edubar-qiassist-einsty2" src="/elearning/pics/icons/einstyl2s.png" alt=""></div>').appendTo("#edubar")},addQIntros:function(e,t){},addQIntros0:function(e,t){var i=this,n=edubar&&edubar.options.seenqi?edubar.options.seenqi:{};i.element||i.createElem(),i.intros||(i.intros={});for(var a="",o="",r=0;r<e.length;r++){var s=e[r].qintroid;i.intros[s]||(i.intros[s]={id:s,title:window.qintros&&window.qintros[s]?window.qintros[s].name:e[r].title?e[r].title:"Help",parentElems:[],link:e[r].link?e[r].link:null},n[s]||(a+=i.getQIntroIcon(i.intros[s])),o+=i.getHelpListItem(i.intros[s])),i.intros[s].parentElems.push(t)}if(t&&$j(t).on("remove",function(){var e=0;for(var n in i.intros){var a=i.intros[n],o=EdubarUtils.indexOf(a.parentElems,t);o>=0&&a.parentElems.splice(o,1),0==a.parentElems.length?(i.intros[n].element&&i.intros[n].element.remove(),i.intros[n].helpListElement&&i.intros[n].helpListElement.remove(),delete i.intros[n]):e++}0==e&&($j("#edubarHelpListQintrosHeader").remove(),i.remove())}),a){i.element.find(".edubar-qiassist-item").finish(),i.element.toggleClass("shaked",!1),i.shakeMeTimeout&&clearTimeout(i.shakeMeTimeout);var l=$j(a).appendTo(this.element);r=2;l.each(function(){var e=$j(this).attr("data-qid");i.intros[e].element=$j(this),$j(this).delay(250*r).animate({opacity:1,right:"0px"},800,"easeOutElastic"),r++}),i.element.find(".edubar-qiassist-einsty1").hide(),i.element.toggleClass("inited0",!0),setTimeout(function(){i.element&&i.element.find(".edubar-qiassist-einsty1").fadeIn("fast",function(){i.element&&i.element.toggleClass("inited",!0)})},250*r+500),l.on("click",function(){var e=$j(this).attr("data-qid"),t=i.intros[e].element.offset(),a=-(t.top-$j(window).height()/2),o=t.left-$j(window).width()/2;n[e]=!0,i.intros[e].link?barSmartLoadPage(i.intros[e].link):i.intros[e].element.toggleClass("opened",!0).animate({right:o+"px",top:a+"px"},300,"swing",function(){i.intros[e].element.find(".edubar-qiassist-fa").toggleClass("fa-spin",!0),$j.post("/quickintro/?cmd=QIntroSlider&forceShow=1&template="+e,{},function(t){$j("body").append(t),setTimeout(function(){i.intros[e].element.find(".edubar-qiassist-fa").toggleClass("fa-spin",!1)},500)});var t=0;for(var n in i.intros)n!=e&&i.intros[n].element&&t++;0==t&&i.element.find(".edubar-qiassist-einsty").hide()}).find(".edubar-qiassist-icon-outer").animate({"border-radius":"5px"},300,"swing")})}if(o){if(0==$j("#edubarHelpListQintrosHeader").length){a="";a+='<li class="qintro-item" id="edubarHelpListQintrosHeader">',a+="<hr>",a+="<h1>Quick intro</h1>",a+="<hr>",$j(a+="</li>").appendTo($j("#edubarHelpMenuList"))}$j(o).insertAfter($j("#edubarHelpMenuList .qintro-item").last()).each(function(){var e=$j(this).attr("data-qid");i.intros[e].helpListElement=$j(this)}).click(function(){var e=$j(this).attr("data-qid");$j.post("/quickintro/?cmd=QIntroSlider&forceShow=1&template="+e,{},function(e){$j("body").append(e)})})}i.shakeMeTimeout||(i.shakeMeTimeout=setTimeout(function(){BarQIntroAssistent.shakeMe()},5e3)),$j(document).off("qintroclosed"),$j(document).on("qintroclosed",function(e,t){if(i.intros[t]&&i.intros[t].element){var n=0;for(var a in i.intros)a!=t&&i.intros[a].element&&n++;0==n&&i.element.find(".edubar-qiassist-einsty").hide(),console.log(n),i.intros[t].element.toggleClass("opened",!1).toggleClass("moved",!0).animate({top:"0px",right:"160px",opacity:"0.01"},400,function(){edubar&&(edubar.options.seenqi||(edubar.options.seenqi={}),edubar.options.seenqi[t]=(new Date).format("Y-m-d H:i:s")),i.intros[t].element.remove(),i.intros[t].element=null,$j("#edubarHelpMenuBtn").toggleClass("edubar-qiassist-zoomed",!0),setTimeout(function(){$j("#edubarHelpMenuBtn").toggleClass("edubar-qiassist-zoomed",!1)},400),console.log(n),0==n&&i.remove()})}}),i.element.hover(function(){i.hovered=!0},function(){i.hovered=!1})},shakeMe:function(){var e=this;if(e.shakeMeTimeout=null,e.element){var t=0;e.hovered||0!=$j("body").children(".qiSliderContainer").length||document.hidden||(e.element.find(".edubar-qiassist-item").each(function(){$j(this).hasClass("moved")||$j(this).hasClass("opened")||($j(this).delay(350*t).effect("bounce",{direction:"left",distance:20},"slow"),t++)}),e.element.toggleClass("shaked"),setTimeout(function(){e.element&&e.element.toggleClass("shaked")},1e3)),this.shakeMeTimeout=setTimeout(function(){BarQIntroAssistent.shakeMe()},2e3*(1+9*Math.random()))}},getHelpListItem:function(e){var t="";return t+='<li class="qintro-item"  data-qid="{r.id}">',e.link?t+='<a class="edubarSmartLink" href="{r.link}" style="padding: 8px 10px">':t+='<a class="edubar-qassist-qintrolink" style="padding: 8px 10px">',t+='<i class="fa fa-fw fa-info" style="font-size:18px;width:32px;height:18px;padding-top:0px;vertical-align: middle;margin-right:5px"></i>',t+='<span class="title" style="font-size: 13px;white-space:normal">',t+="{r.title}",t+="</span>",t+="</a>",t=renderS(t+="</li>",{r:e})},getQIntroIcon:function(e){var t="";return t+='<div class="edubar-qiassist-item" data-qid="{r.id}" tabindex="0">',t+='<div class="edubar-qiassist-icon-outer">',t+='<i class="fa fa-info edubar-qiassist-fa"></i>',t+='<div class="edubar-qiassist-title1">',t+='<span class="edubar-qiassist-title-text">{r.title}</span>',t+="</div>",t+="</div>",t=renderS(t+="</div>",{r:e})},remove:function(){if(this.intros)for(var e in this.intros)this.intros[e].element&&this.intros[e].element.remove(),this.intros[e].helpListElement&&this.intros[e].helpListElement.remove();this.intros=null,this.element&&($j(this.element).remove(),this.element=null),$j(document).off("qintroclosed")}},LZString=function(){function e(e,t){if(!a[e]){a[e]={};for(var i=0;i<e.length;i++)a[e][e.charAt(i)]=i}return a[e][t]}var t=String.fromCharCode,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",a={},o={compressToBase64:function(e){if(null==e)return"";var t=o._compress(e,6,function(e){return i.charAt(e)});switch(t.length%4){default:case 0:return t;case 1:return t+"===";case 2:return t+"==";case 3:return t+"="}},decompressFromBase64:function(t){return null==t?"":""==t?null:o._decompress(t.length,32,function(n){return e(i,t.charAt(n))})},compressToUTF16:function(e){return null==e?"":o._compress(e,15,function(e){return t(e+32)})+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:o._decompress(e.length,16384,function(t){return e.charCodeAt(t)-32})},compressToUint8Array:function(e){for(var t=o.compress(e),i=new Uint8Array(2*t.length),n=0,a=t.length;a>n;n++){var r=t.charCodeAt(n);i[2*n]=r>>>8,i[2*n+1]=r%256}return i},decompressFromUint8Array:function(e){if(null==e)return o.decompress(e);for(var i=new Array(e.length/2),n=0,a=i.length;a>n;n++)i[n]=256*e[2*n]+e[2*n+1];var r=[];return i.forEach(function(e){r.push(t(e))}),o.decompress(r.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":o._compress(e,6,function(e){return n.charAt(e)})},decompressFromEncodedURIComponent:function(t){return null==t?"":""==t?null:(t=t.replace(/ /g,"+"),o._decompress(t.length,32,function(i){return e(n,t.charAt(i))}))},compress:function(e){return o._compress(e,16,function(e){return t(e)})},_compress:function(e,t,i){if(null==e)return"";var n,a,o,r={},s={},l="",d="",u="",c=2,p=3,h=2,f=[],g=0,b=0;for(o=0;o<e.length;o+=1)if(l=e.charAt(o),Object.prototype.hasOwnProperty.call(r,l)||(r[l]=p++,s[l]=!0),d=u+l,Object.prototype.hasOwnProperty.call(r,d))u=d;else{if(Object.prototype.hasOwnProperty.call(s,u)){if(u.charCodeAt(0)<256){for(n=0;h>n;n++)g<<=1,b==t-1?(b=0,f.push(i(g)),g=0):b++;for(a=u.charCodeAt(0),n=0;8>n;n++)g=g<<1|1&a,b==t-1?(b=0,f.push(i(g)),g=0):b++,a>>=1}else{for(a=1,n=0;h>n;n++)g=g<<1|a,b==t-1?(b=0,f.push(i(g)),g=0):b++,a=0;for(a=u.charCodeAt(0),n=0;16>n;n++)g=g<<1|1&a,b==t-1?(b=0,f.push(i(g)),g=0):b++,a>>=1}0==--c&&(c=Math.pow(2,h),h++),delete s[u]}else for(a=r[u],n=0;h>n;n++)g=g<<1|1&a,b==t-1?(b=0,f.push(i(g)),g=0):b++,a>>=1;0==--c&&(c=Math.pow(2,h),h++),r[d]=p++,u=String(l)}if(""!==u){if(Object.prototype.hasOwnProperty.call(s,u)){if(u.charCodeAt(0)<256){for(n=0;h>n;n++)g<<=1,b==t-1?(b=0,f.push(i(g)),g=0):b++;for(a=u.charCodeAt(0),n=0;8>n;n++)g=g<<1|1&a,b==t-1?(b=0,f.push(i(g)),g=0):b++,a>>=1}else{for(a=1,n=0;h>n;n++)g=g<<1|a,b==t-1?(b=0,f.push(i(g)),g=0):b++,a=0;for(a=u.charCodeAt(0),n=0;16>n;n++)g=g<<1|1&a,b==t-1?(b=0,f.push(i(g)),g=0):b++,a>>=1}0==--c&&(c=Math.pow(2,h),h++),delete s[u]}else for(a=r[u],n=0;h>n;n++)g=g<<1|1&a,b==t-1?(b=0,f.push(i(g)),g=0):b++,a>>=1;0==--c&&(c=Math.pow(2,h),h++)}for(a=2,n=0;h>n;n++)g=g<<1|1&a,b==t-1?(b=0,f.push(i(g)),g=0):b++,a>>=1;for(;;){if(g<<=1,b==t-1){f.push(i(g));break}b++}return f.join("")},decompress:function(e){return null==e?"":""==e?null:o._decompress(e.length,32768,function(t){return e.charCodeAt(t)})},_decompress:function(e,i,n){var a,o,r,s,l,d,u,c=[],p=4,h=4,f=3,g="",b=[],m={val:n(0),position:i,index:1};for(a=0;3>a;a+=1)c[a]=a;for(r=0,l=Math.pow(2,2),d=1;d!=l;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=i,m.val=n(m.index++)),r|=(s>0?1:0)*d,d<<=1;switch(r){case 0:for(r=0,l=Math.pow(2,8),d=1;d!=l;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=i,m.val=n(m.index++)),r|=(s>0?1:0)*d,d<<=1;u=t(r);break;case 1:for(r=0,l=Math.pow(2,16),d=1;d!=l;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=i,m.val=n(m.index++)),r|=(s>0?1:0)*d,d<<=1;u=t(r);break;case 2:return""}for(c[3]=u,o=u,b.push(u);;){if(m.index>e)return"";for(r=0,l=Math.pow(2,f),d=1;d!=l;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=i,m.val=n(m.index++)),r|=(s>0?1:0)*d,d<<=1;switch(u=r){case 0:for(r=0,l=Math.pow(2,8),d=1;d!=l;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=i,m.val=n(m.index++)),r|=(s>0?1:0)*d,d<<=1;c[h++]=t(r),u=h-1,p--;break;case 1:for(r=0,l=Math.pow(2,16),d=1;d!=l;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=i,m.val=n(m.index++)),r|=(s>0?1:0)*d,d<<=1;c[h++]=t(r),u=h-1,p--;break;case 2:return b.join("")}if(0==p&&(p=Math.pow(2,f),f++),c[u])g=c[u];else{if(u!==h)return null;g=o+o.charAt(0)}b.push(g),c[h++]=o+g.charAt(0),o=g,0==--p&&(p=Math.pow(2,f),f++)}}};return o}();if("function"==typeof define&&define.amd?define(function(){return LZString}):"undefined"!=typeof module&&null!=module&&(module.exports=LZString),
/** @license zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License */function(){"use strict";var e=void 0,t=!0,i=this;function n(t,n){var a,o=t.split("."),r=i;!(o[0]in r)&&r.execScript&&r.execScript("var "+o[0]);for(;o.length&&(a=o.shift());)o.length||n===e?r=r[a]?r[a]:r[a]={}:r[a]=n}var a="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array&&"undefined"!=typeof DataView;function o(e,t){if(this.index="number"==typeof t?t:0,this.d=0,this.buffer=e instanceof(a?Uint8Array:Array)?e:new(a?Uint8Array:Array)(32768),2*this.buffer.length<=this.index)throw Error("invalid index");this.buffer.length<=this.index&&r(this)}function r(e){var t,i=e.buffer,n=i.length,o=new(a?Uint8Array:Array)(n<<1);if(a)o.set(i);else for(t=0;t<n;++t)o[t]=i[t];return e.buffer=o}o.prototype.a=function(e,t,i){var n,a=this.buffer,o=this.index,s=this.d,l=a[o];if(i&&1<t&&(e=8<t?(p[255&e]<<24|p[e>>>8&255]<<16|p[e>>>16&255]<<8|p[e>>>24&255])>>32-t:p[e]>>8-t),8>t+s)l=l<<t|e,s+=t;else for(n=0;n<t;++n)l=l<<1|e>>t-n-1&1,8==++s&&(s=0,a[o++]=p[l],l=0,o===a.length&&(a=r(this)));a[o]=l,this.buffer=a,this.d=s,this.index=o},o.prototype.finish=function(){var e,t=this.buffer,i=this.index;return 0<this.d&&(t[i]<<=8-this.d,t[i]=p[t[i]],i++),a?e=t.subarray(0,i):(t.length=i,e=t),e};var s,l=new(a?Uint8Array:Array)(256);for(s=0;256>s;++s){for(var d=c=s,u=7,c=c>>>1;c;c>>>=1)d<<=1,d|=1&c,--u;l[s]=(d<<u&255)>>>0}var p=l;function h(e){this.buffer=new(a?Uint16Array:Array)(2*e),this.length=0}function f(e,t){this.e=b,this.f=0,this.input=a&&e instanceof Array?new Uint8Array(e):e,this.c=0,t&&(t.lazy&&(this.f=t.lazy),"number"==typeof t.compressionType&&(this.e=t.compressionType),t.outputBuffer&&(this.b=a&&t.outputBuffer instanceof Array?new Uint8Array(t.outputBuffer):t.outputBuffer),"number"==typeof t.outputIndex&&(this.c=t.outputIndex)),this.b||(this.b=new(a?Uint8Array:Array)(32768))}h.prototype.getParent=function(e){return 2*((e-2)/4|0)},h.prototype.push=function(e,t){var i,n,a,o=this.buffer;for(i=this.length,o[this.length++]=t,o[this.length++]=e;0<i&&(n=this.getParent(i),o[i]>o[n]);)a=o[i],o[i]=o[n],o[n]=a,a=o[i+1],o[i+1]=o[n+1],o[n+1]=a,i=n;return this.length},h.prototype.pop=function(){var e,t,i,n,a,o=this.buffer;for(t=o[0],e=o[1],this.length-=2,o[0]=o[this.length],o[1]=o[this.length+1],a=0;!((n=2*a+2)>=this.length)&&(n+2<this.length&&o[n+2]>o[n]&&(n+=2),o[n]>o[a]);)i=o[a],o[a]=o[n],o[n]=i,i=o[a+1],o[a+1]=o[n+1],o[n+1]=i,a=n;return{index:e,value:t,length:this.length}};var g,b=2,m=[];for(g=0;288>g;g++)switch(t){case 143>=g:m.push([g+48,8]);break;case 255>=g:m.push([g-144+400,9]);break;case 279>=g:m.push([g-256+0,7]);break;case 287>=g:m.push([g-280+192,8]);break;default:throw"invalid literal: "+g}f.prototype.h=function(){var i,n,r,s,l=this.input;switch(this.e){case 0:for(r=0,s=l.length;r<s;){var d,u,c,p=n=a?l.subarray(r,r+65535):l.slice(r,r+65535),h=(r+=n.length)===s,f=e,g=e,v=this.b,y=this.c;if(a){for(v=new Uint8Array(this.b.buffer);v.length<=y+p.length+5;)v=new Uint8Array(v.length<<1);v.set(this.b)}if(d=h?1:0,v[y++]=0|d,c=65536+~(u=p.length)&65535,v[y++]=255&u,v[y++]=u>>>8&255,v[y++]=255&c,v[y++]=c>>>8&255,a)v.set(p,y),y+=p.length,v=v.subarray(0,y);else{for(f=0,g=p.length;f<g;++f)v[y++]=p[f];v.length=y}this.c=y,this.b=v}break;case 1:var S=new o(a?new Uint8Array(this.b.buffer):this.b,this.c);S.a(1,1,t),S.a(1,2,t);var x,j,A,$=w(this,l);for(x=0,j=$.length;x<j;x++)if(A=$[x],o.prototype.a.apply(S,m[A]),256<A)S.a($[++x],$[++x],t),S.a($[++x],5),S.a($[++x],$[++x],t);else if(256===A)break;this.b=S.finish(),this.c=this.b.length;break;case b:var L,E,D,T,B,M,I,O,U,P,_,z,H,R,N,F=new o(a?new Uint8Array(this.b.buffer):this.b,this.c),W=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],q=Array(19);for(L=b,F.a(1,1,t),F.a(L,2,t),E=w(this,l),I=C(M=k(this.j,15)),U=C(O=k(this.i,7)),D=286;257<D&&0===M[D-1];D--);for(T=30;1<T&&0===O[T-1];T--);var Y,V,J,Z,G,Q,K=D,X=T,ee=new(a?Uint32Array:Array)(K+X),te=new(a?Uint32Array:Array)(316),ie=new(a?Uint8Array:Array)(19);for(Y=V=0;Y<K;Y++)ee[V++]=M[Y];for(Y=0;Y<X;Y++)ee[V++]=O[Y];if(!a)for(Y=0,Z=ie.length;Y<Z;++Y)ie[Y]=0;for(Y=G=0,Z=ee.length;Y<Z;Y+=V){for(V=1;Y+V<Z&&ee[Y+V]===ee[Y];++V);if(J=V,0===ee[Y])if(3>J)for(;0<J--;)te[G++]=0,ie[0]++;else for(;0<J;)(Q=138>J?J:138)>J-3&&Q<J&&(Q=J-3),10>=Q?(te[G++]=17,te[G++]=Q-3,ie[17]++):(te[G++]=18,te[G++]=Q-11,ie[18]++),J-=Q;else if(te[G++]=ee[Y],ie[ee[Y]]++,3>--J)for(;0<J--;)te[G++]=ee[Y],ie[ee[Y]]++;else for(;0<J;)(Q=6>J?J:6)>J-3&&Q<J&&(Q=J-3),te[G++]=16,te[G++]=Q-3,ie[16]++,J-=Q}for(i=a?te.subarray(0,G):te.slice(0,G),P=k(ie,7),R=0;19>R;R++)q[R]=P[W[R]];for(B=19;4<B&&0===q[B-1];B--);for(_=C(P),F.a(D-257,5,t),F.a(T-1,5,t),F.a(B-4,4,t),R=0;R<B;R++)F.a(q[R],3,t);for(R=0,N=i.length;R<N;R++)if(z=i[R],F.a(_[z],P[z],t),16<=z){switch(R++,z){case 16:H=2;break;case 17:H=3;break;case 18:H=7;break;default:throw"invalid code: "+z}F.a(i[R],H,t)}var ne,ae,oe,re,se,le,de,ue,ce=[I,M],pe=[U,O];for(se=ce[0],le=ce[1],de=pe[0],ue=pe[1],ne=0,ae=E.length;ne<ae;++ne)if(oe=E[ne],F.a(se[oe],le[oe],t),256<oe)F.a(E[++ne],E[++ne],t),re=E[++ne],F.a(de[re],ue[re],t),F.a(E[++ne],E[++ne],t);else if(256===oe)break;this.b=F.finish(),this.c=this.b.length;break;default:throw"invalid compression type"}return this.b};var v=function(){function e(e){switch(t){case 3===e:return[257,e-3,0];case 4===e:return[258,e-4,0];case 5===e:return[259,e-5,0];case 6===e:return[260,e-6,0];case 7===e:return[261,e-7,0];case 8===e:return[262,e-8,0];case 9===e:return[263,e-9,0];case 10===e:return[264,e-10,0];case 12>=e:return[265,e-11,1];case 14>=e:return[266,e-13,1];case 16>=e:return[267,e-15,1];case 18>=e:return[268,e-17,1];case 22>=e:return[269,e-19,2];case 26>=e:return[270,e-23,2];case 30>=e:return[271,e-27,2];case 34>=e:return[272,e-31,2];case 42>=e:return[273,e-35,3];case 50>=e:return[274,e-43,3];case 58>=e:return[275,e-51,3];case 66>=e:return[276,e-59,3];case 82>=e:return[277,e-67,4];case 98>=e:return[278,e-83,4];case 114>=e:return[279,e-99,4];case 130>=e:return[280,e-115,4];case 162>=e:return[281,e-131,5];case 194>=e:return[282,e-163,5];case 226>=e:return[283,e-195,5];case 257>=e:return[284,e-227,5];case 258===e:return[285,e-258,0];default:throw"invalid length: "+e}}var i,n,a=[];for(i=3;258>=i;i++)n=e(i),a[i]=n[2]<<24|n[1]<<16|n[0];return a}(),y=a?new Uint32Array(v):v;function w(i,n){function o(e,i){var n,a,o,r,s=e.g,l=[],d=0;switch(n=y[e.length],l[d++]=65535&n,l[d++]=n>>16&255,l[d++]=n>>24,t){case 1===s:a=[0,s-1,0];break;case 2===s:a=[1,s-2,0];break;case 3===s:a=[2,s-3,0];break;case 4===s:a=[3,s-4,0];break;case 6>=s:a=[4,s-5,1];break;case 8>=s:a=[5,s-7,1];break;case 12>=s:a=[6,s-9,2];break;case 16>=s:a=[7,s-13,2];break;case 24>=s:a=[8,s-17,3];break;case 32>=s:a=[9,s-25,3];break;case 48>=s:a=[10,s-33,4];break;case 64>=s:a=[11,s-49,4];break;case 96>=s:a=[12,s-65,5];break;case 128>=s:a=[13,s-97,5];break;case 192>=s:a=[14,s-129,6];break;case 256>=s:a=[15,s-193,6];break;case 384>=s:a=[16,s-257,7];break;case 512>=s:a=[17,s-385,7];break;case 768>=s:a=[18,s-513,8];break;case 1024>=s:a=[19,s-769,8];break;case 1536>=s:a=[20,s-1025,9];break;case 2048>=s:a=[21,s-1537,9];break;case 3072>=s:a=[22,s-2049,10];break;case 4096>=s:a=[23,s-3073,10];break;case 6144>=s:a=[24,s-4097,11];break;case 8192>=s:a=[25,s-6145,11];break;case 12288>=s:a=[26,s-8193,12];break;case 16384>=s:a=[27,s-12289,12];break;case 24576>=s:a=[28,s-16385,13];break;case 32768>=s:a=[29,s-24577,13];break;default:throw"invalid distance"}for(n=a,l[d++]=n[0],l[d++]=n[1],l[d++]=n[2],o=0,r=l.length;o<r;++o)b[m++]=l[o];w[l[0]]++,k[l[3]]++,v=e.length+i-1,h=null}var r,s,l,d,u,c,p,h,f,g={},b=a?new Uint16Array(2*n.length):[],m=0,v=0,w=new(a?Uint32Array:Array)(286),k=new(a?Uint32Array:Array)(30),C=i.f;if(!a){for(l=0;285>=l;)w[l++]=0;for(l=0;29>=l;)k[l++]=0}for(w[256]=1,r=0,s=n.length;r<s;++r){for(l=u=0,d=3;l<d&&r+l!==s;++l)u=u<<8|n[r+l];if(g[u]===e&&(g[u]=[]),c=g[u],!(0<v--)){for(;0<c.length&&32768<r-c[0];)c.shift();if(r+3>=s){for(h&&o(h,-1),l=0,d=s-r;l<d;++l)f=n[r+l],b[m++]=f,++w[f];break}0<c.length?(p=S(n,r,c),h?h.length<p.length?(f=n[r-1],b[m++]=f,++w[f],o(p,0)):o(h,-1):p.length<C?h=p:o(p,0)):h?o(h,-1):(f=n[r],b[m++]=f,++w[f])}c.push(r)}return b[m++]=256,w[256]++,i.j=w,i.i=k,a?b.subarray(0,m):b}function S(e,t,i){var n,a,o,r,s,l,d=0,u=e.length;r=0,l=i.length;e:for(;r<l;r++){if(n=i[l-r-1],o=3,3<d){for(s=d;3<s;s--)if(e[n+s-1]!==e[t+s-1])continue e;o=d}for(;258>o&&t+o<u&&e[n+o]===e[t+o];)++o;if(o>d&&(a=n,d=o),258===o)break}return new function(e,t){this.length=e,this.g=t}(d,t-a)}function k(e,t){var i,n,o,r,s,l=e.length,d=new h(572),u=new(a?Uint8Array:Array)(l);if(!a)for(r=0;r<l;r++)u[r]=0;for(r=0;r<l;++r)0<e[r]&&d.push(r,e[r]);if(i=Array(d.length/2),n=new(a?Uint32Array:Array)(d.length/2),1===i.length)return u[d.pop().index]=1,u;for(r=0,s=d.length/2;r<s;++r)i[r]=d.pop(),n[r]=i[r].value;for(o=function(e,t,i){function n(e){var i=f[e][g[e]];i===t?(n(e+1),n(e+1)):--p[i],++g[e]}var o,r,s,l,d,u=new(a?Uint16Array:Array)(i),c=new(a?Uint8Array:Array)(i),p=new(a?Uint8Array:Array)(t),h=Array(i),f=Array(i),g=Array(i),b=(1<<i)-t,m=1<<i-1;for(u[i-1]=t,r=0;r<i;++r)b<m?c[r]=0:(c[r]=1,b-=m),b<<=1,u[i-2-r]=(u[i-1-r]/2|0)+t;for(u[0]=c[0],h[0]=Array(u[0]),f[0]=Array(u[0]),r=1;r<i;++r)u[r]>2*u[r-1]+c[r]&&(u[r]=2*u[r-1]+c[r]),h[r]=Array(u[r]),f[r]=Array(u[r]);for(o=0;o<t;++o)p[o]=i;for(s=0;s<u[i-1];++s)h[i-1][s]=e[s],f[i-1][s]=s;for(o=0;o<i;++o)g[o]=0;for(1===c[i-1]&&(--p[0],++g[i-1]),r=i-2;0<=r;--r){for(l=o=0,d=g[r+1],s=0;s<u[r];s++)(l=h[r+1][d]+h[r+1][d+1])>e[o]?(h[r][s]=l,f[r][s]=t,d+=2):(h[r][s]=e[o],f[r][s]=o,++o);g[r]=0,1===c[r]&&n(r)}return p}(n,n.length,t),r=0,s=i.length;r<s;++r)u[i[r].index]=o[r];return u}function C(e){var t,i,n,o,r=new(a?Uint16Array:Array)(e.length),s=[],l=[],d=0;for(t=0,i=e.length;t<i;t++)s[e[t]]=1+(0|s[e[t]]);for(t=1,i=16;t<=i;t++)l[t]=d,d+=0|s[t],d<<=1;for(t=0,i=e.length;t<i;t++)for(d=l[e[t]],l[e[t]]+=1,n=r[t]=0,o=e[t];n<o;n++)r[t]=r[t]<<1|1&d,d>>>=1;return r}n("Zlib.RawDeflate",f),n("Zlib.RawDeflate.prototype.compress",f.prototype.h);var x,j,A,$,L={NONE:0,FIXED:1,DYNAMIC:b};if(Object.keys)x=Object.keys(L);else for(j in x=[],A=0,L)x[A++]=j;for(A=0,$=x.length;A<$;++A)n("Zlib.RawDeflate.CompressionType."+(j=x[A]),L[j])}.call(this),"undefined"==typeof TextEncoder){TextEncoder=function(){},TextEncoder.prototype.encode=function(e){"use strict";for(var t=e.length,i=-1,n="undefined"==typeof Uint8Array?new Array(1.5*t):new Uint8Array(3*t),a=0,o=0,r=0;r!==t;){if(a=e.charCodeAt(r),r+=1,a>=55296&&a<=56319){if(r===t){n[i+=1]=239,n[i+=1]=191,n[i+=1]=189;break}if(!((o=e.charCodeAt(r))>=56320&&o<=57343)){n[i+=1]=239,n[i+=1]=191,n[i+=1]=189;continue}if(r+=1,(a=1024*(a-55296)+o-56320+65536)>65535){n[i+=1]=240|a>>>18,n[i+=1]=128|a>>>12&63,n[i+=1]=128|a>>>6&63,n[i+=1]=128|63&a;continue}}a<=127?n[i+=1]=0|a:a<=2047?(n[i+=1]=192|a>>>6,n[i+=1]=128|63&a):(n[i+=1]=224|a>>>12,n[i+=1]=128|a>>>6&63,n[i+=1]=128|63&a)}return"undefined"!=typeof Uint8Array?n.subarray(0,i+1):(n.length=i+1,n)},TextEncoder.prototype.toString=function(){return"[object TextEncoder]"};try{Object.defineProperty(TextEncoder.prototype,"encoding",{get:function(){if(TextEncoder.prototype.isPrototypeOf(this))return"utf-8";throw TypeError("Illegal invocation")}})}catch(e){TextEncoder.prototype.encoding="utf-8"}"undefined"!=typeof Symbol&&(TextEncoder.prototype[Symbol.toStringTag]="TextEncoder")}function importLegacyJsLib(e){if(MobileAppBridge.isV2Active()&&"undefined"!=typeof Edupage&&Edupage.EdupageModule)return Edupage.EdupageModule.require(e,null,{isLegacyJsLib:!0})}function importCss(e){if(MobileAppBridge.isV2Active()&&"undefined"!=typeof Edupage&&Edupage.EdupageModule)return Edupage.EdupageModule.require(e,null,{isCss:!0})}